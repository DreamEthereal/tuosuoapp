<?php
//dezend by http://www.yunlu99.com/
if ((ob_get_length() === false) && !ini_get('zlib.output_compression') && (ini_get('output_handler') != 'ob_gzhandler') && (ini_get('output_handler') != 'mb_output_handler')) {
	ob_start('ob_gzhandler');
}

header('Cache-Control: public');
header('Pragma: cache');
$offset = 2592000;
$ExpStr = 'Expires: ' . gmdate('D, d M Y H:i:s', time() + $offset) . ' GMT';
$LmStr = 'Last-Modified: ' . gmdate('D, d M Y H:i:s', filemtime(__FILE__)) . ' GMT';
header($ExpStr);
header($LmStr);
header('Content-Type: text/javascr¨©pt; charset: UTF-8');
echo '' . "\r\n" . '' . "\r\n" . 'var http_request = false;' . "\r\n" . 'function AjaxRequest(url)' . "\r\n" . '{' . "\r\n" . '	http_request = false;' . "\r\n" . '	if(window.ActiveXObject)' . "\r\n" . '	{' . "\r\n" . '		try  // IE' . "\r\n" . '		{' . "\r\n" . '			http_request = new ActiveXObject("Msxml2.XMLHTTP");' . "\r\n" . '		}' . "\r\n" . '		catch (e)' . "\r\n" . '		{' . "\r\n" . '			try' . "\r\n" . '			{' . "\r\n" . '				http_request = new ActiveXObject("Microsoft.XMLHTTP");' . "\r\n" . '			}' . "\r\n" . '			catch (e) {}' . "\r\n" . '		}' . "\r\n" . '	}' . "\r\n" . '	else if(window.XMLHttpRequest)' . "\r\n" . '	{' . "\r\n" . '		// Mozilla, Safari,...' . "\r\n" . '		http_request = new XMLHttpRequest();' . "\r\n" . '		if (http_request.overrideMimeType)' . "\r\n" . '		{' . "\r\n" . '			http_request.overrideMimeType(\'text/xml\');' . "\r\n" . '		}' . "\r\n" . '	}' . "\r\n" . '	' . "\r\n" . '	if (!http_request)' . "\r\n" . '	{' . "\r\n" . '		alert("Cannot create an XMLHTTP instance");' . "\r\n" . '		return false;' . "\r\n" . '	}' . "\r\n" . '	http_request.onreadystatechange = AlertContents;' . "\r\n" . '	http_request.open(\'GET\', url, true);' . "\r\n" . '	http_request.send(null);' . "\r\n" . '}' . "\r\n" . 'function AlertContents()' . "\r\n" . '{' . "\r\n" . '	if (http_request.readyState == 4)' . "\r\n" . '	{' . "\r\n" . '		if(http_request.status == 200)' . "\r\n" . '		{' . "\r\n" . '			results = http_request.responseText.split(\'|\');' . "\r\n" . '			document.getElementById(results[0]).innerHTML = results[1];' . "\r\n" . '		}' . "\r\n" . '		else' . "\r\n" . '		{' . "\r\n" . '			alert(\'ÍøÂç´«ÊäÎÊÌâ\');' . "\r\n" . '		}' . "\r\n" . '	}' . "\r\n" . '}' . "\r\n" . '' . "\r\n" . '//function Init()' . "\r\n" . '//{' . "\r\n" . '//   Check_Survey_Conditions();' . "\r\n" . '//   initLightbox();' . "\r\n" . '//}' . "\r\n" . 'function OnQuestionFocus(objTable,objAction)' . "\r\n" . '{' . "\r\n" . '   objTable.className = "edit_active_table";' . "\r\n" . '   objAction.style.display = "block";' . "\r\n" . '}' . "\r\n" . 'function OnQuestionBlur(objTable,objAction)' . "\r\n" . '{' . "\r\n" . '   if ( arguments[2] == null )' . "\r\n" . '   {' . "\r\n" . '	  objTable.className = "edit_inactive_table";' . "\r\n" . '   }' . "\r\n" . '   else' . "\r\n" . '   {' . "\r\n" . '	  objTable.className = "pertable";' . "\r\n" . '   }' . "\r\n" . '   objAction.style.display = "none";' . "\r\n" . '}' . "\r\n" . '' . "\r\n" . 'var urlBase = "System/AjaxChangePageEdit.php"; ' . "\r\n" . 'var formVars = ""; ' . "\r\n" . 'var changing = false; ' . "\r\n" . '' . "\r\n" . 'function fieldBlur(campo,idfld)' . "\r\n" . '{ ' . "\r\n" . '    var sid = document.getElementById("surveyID").value;' . "\r\n" . '	if (T_rim(campo.value)!="") { ' . "\r\n" . '        elem = document.getElementById( idfld ); ' . "\r\n" . '		AjaxRequest(urlBase + "?fieldname=" +elem.id+ "&sid=" + sid + "&content="+escape(campo.value.replace(/&/g,\'&amp;\'))+"&"+formVars);' . "\r\n" . '        changing = false; ' . "\r\n" . '        return false; ' . "\r\n" . '    } ' . "\r\n" . '	else' . "\r\n" . '	{' . "\r\n" . '        elem = document.getElementById( idfld ); ' . "\r\n" . '		AjaxRequest(urlBase + "?fieldname=" +elem.id + "&sid=" + sid + "&content=empty&"+formVars);' . "\r\n" . '        changing = false; ' . "\r\n" . '        return false; ' . "\r\n" . '   }' . "\r\n" . '} ' . "\r\n" . '' . "\r\n" . '//È¥³ý×Ö·û´®×ó¶Ë¿Õ¸ñ' . "\r\n" . 'function L_Trim(str) {' . "\r\n" . '  return str.replace(/^\\s*/, \'\');' . "\r\n" . '}' . "\r\n" . '' . "\r\n" . '//È¥³ý×Ö·û´®ÓÒ¶Ë¿Õ¸ñ' . "\r\n" . 'function R_Trim(str) {' . "\r\n" . '  return str.replace(/\\s*$/, \'\');' . "\r\n" . '}' . "\r\n" . '' . "\r\n" . '//È¥³ý×Ö·û´®Á½¶Ë¿Õ¸ñ' . "\r\n" . 'function T_rim(str) {' . "\r\n" . '  return L_Trim(R_Trim(str));' . "\r\n" . '}' . "\r\n" . '' . "\r\n" . 'function cambia(actual) ' . "\r\n" . '{ ' . "\r\n" . '    if(!changing){ ' . "\r\n" . '        width = widthEl(actual.id) +50; ' . "\r\n" . '        height = heightEl(actual.id); ' . "\r\n" . '        var html = actual.innerHTML;' . "\r\n" . '        ' . "\r\n" . '		var thisFontSize = actual.currentStyle.fontSize;' . "\r\n" . '		var thisForeColor = actual.currentStyle.color;' . "\r\n" . '		var thisBackColor = actual.currentStyle.backgroundColor;' . "\r\n" . '		var thisFontName = actual.currentStyle.fontFamily;' . "\r\n" . '		var thisBold = actual.currentStyle.fontWeight;' . "\r\n" . '		var thisFontStyle = actual.currentStyle.fontStyle;' . "\r\n" . '		var thisStyle = "width:"+width+"px;height:"+height+"px;overflow-y:visible;font-family:"+thisFontName+";font-size:"+thisFontSize+";color:"+thisForeColor+";background-color:"+thisBackColor+";font-weight:"+thisBold+";font-style:"+thisFontStyle+";";' . "\r\n" . '' . "\r\n" . '		actual.innerHTML = "<textarea class=editarea name=\\"textarea\\" id=\\""+ actual.id +"_field\\" style=\\""+thisStyle+"\\"  onfocus=\\"highLight(this);\\" onblur=\\"noLight(this); return fieldBlur(this,\'" + actual.id + "\');\\">" +  html + "</textarea>";' . "\r\n" . '		actual.focus();' . "\r\n" . '        changing = true; ' . "\r\n" . '    } ' . "\r\n" . '    actual.firstChild.focus(); ' . "\r\n" . '} ' . "\r\n" . '' . "\r\n" . 'function editbox_init()' . "\r\n" . '{ ' . "\r\n" . '    if (!document.getElementsByTagName){ return; } ' . "\r\n" . '    var spans = document.getElementsByTagName("span"); ' . "\r\n" . '' . "\r\n" . '    // loop through all span tags ' . "\r\n" . '    for (var i=0; i<spans.length; i++){ ' . "\r\n" . '        var spn = spans[i]; ' . "\r\n" . '        if (((\' \'+spn.className+\' \').indexOf("textEdit") != -1) && (spn.id)) { ' . "\r\n" . '            spn.onclick = function () { cambia(this); } ' . "\r\n" . '            spn.style.cursor = "pointer"; ' . "\r\n" . '            spn.title = "µã»÷Ö±½Ó½øÐÐ±à¼­"; ' . "\r\n" . '        } ' . "\r\n" . '    } ' . "\r\n" . '} ' . "\r\n" . '' . "\r\n" . 'function addEvent(elm, evType, fn, useCapture) ' . "\r\n" . '{ ' . "\r\n" . '	if (elm.addEventListener){ ' . "\r\n" . '		elm.addEventListener(evType, fn, useCapture); ' . "\r\n" . '		return true; ' . "\r\n" . '	} else if (elm.attachEvent){ ' . "\r\n" . '		var r = elm.attachEvent("on"+evType, fn); ' . "\r\n" . '		return r; ' . "\r\n" . '	} else { ' . "\r\n" . '		alert("Please upgrade your browser to use full functionality on this page"); ' . "\r\n" . '	} ' . "\r\n" . '} ' . "\r\n" . '' . "\r\n" . 'function widthEl(span)' . "\r\n" . '{ ' . "\r\n" . '    if (document.layers){ ' . "\r\n" . '		w = document.layers[span].clip.width; ' . "\r\n" . '    } else if (document.all && !document.getElementById){ ' . "\r\n" . '		w = document.all[span].offsetWidth; ' . "\r\n" . '    } else if(document.getElementById){ ' . "\r\n" . '		w = document.getElementById(span).offsetWidth; ' . "\r\n" . '    } ' . "\r\n" . '	return w; ' . "\r\n" . '} ' . "\r\n" . '' . "\r\n" . 'function heightEl(span)' . "\r\n" . '{ ' . "\r\n" . '    if (document.layers){ ' . "\r\n" . '		h = document.layers[span].clip.height; ' . "\r\n" . '    } else if (document.all && !document.getElementById){ ' . "\r\n" . '		h = document.all[span].offsetHeight; ' . "\r\n" . '    } else if(document.getElementById){ ' . "\r\n" . '		h = document.getElementById(span).offsetHeight; ' . "\r\n" . '    } ' . "\r\n" . '	return h; ' . "\r\n" . '} ' . "\r\n" . '' . "\r\n" . 'function highLight(span){ ' . "\r\n" . '} ' . "\r\n" . '' . "\r\n" . 'function noLight(span){ ' . "\r\n" . '    span.parentNode.style.border = "0px"; ' . "\r\n" . '    span.parentNode.style.padding = "0px"; ' . "\r\n" . '    span.style.border = "0px";        ' . "\r\n" . '} ' . "\r\n" . '' . "\r\n" . 'function setVarsForm(vars){ ' . "\r\n" . '    formVars  = vars; ' . "\r\n" . '} ' . "\r\n" . '' . "\r\n" . 'addEvent(window, "load", editbox_init); ';

?>
