<?php
//dezend by http://www.yunlu99.com/
if ((ob_get_length() === false) && !ini_get('zlib.output_compression') && (ini_get('output_handler') != 'ob_gzhandler') && (ini_get('output_handler') != 'mb_output_handler')) {
	ob_start('ob_gzhandler');
}

header('Cache-Control: public');
header('Pragma: cache');
$offset = 2592000;
$ExpStr = 'Expires: ' . gmdate('D, d M Y H:i:s', time() + $offset) . ' GMT';
$LmStr = 'Last-Modified: ' . gmdate('D, d M Y H:i:s', filemtime(__FILE__)) . ' GMT';
header($ExpStr);
header($LmStr);
header('Content-Type: text/javascrīpt; charset: UTF-8');
echo '' . "\r\n" . '//文件成功选择后触发的事件' . "\r\n" . 'function fileQueued(file) {' . "\r\n" . '	try {' . "\r\n" . '		var progress = new FileProgress(file, this.customSettings.progressTarget);' . "\r\n" . '		progress.setStatus("等待上传过程中，需点击上传按钮继续...");' . "\r\n" . '		progress.toggleCancel(true, this);' . "\r\n" . '' . "\r\n" . '	} catch (ex) {' . "\r\n" . '		this.debug(ex);' . "\r\n" . '	}' . "\r\n" . '' . "\r\n" . '}' . "\r\n" . '' . "\r\n" . 'function fileQueueError(file, errorCode, message) {' . "\r\n" . '	try {' . "\r\n" . '		if (errorCode === SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED) {' . "\r\n" . '			$.notification("选择过多文件。\\n" + (message == 0 ? "超出文件个数限制。" : "仅能选择1个文件。"));' . "\r\n" . '			return;' . "\r\n" . '		}' . "\r\n" . '' . "\r\n" . '		var progress = new FileProgress(file, this.customSettings.progressTarget);' . "\r\n" . '		progress.setError();' . "\r\n" . '		progress.toggleCancel(false);' . "\r\n" . '' . "\r\n" . '		switch (errorCode) {' . "\r\n" . '		case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:' . "\r\n" . '			progress.setStatus("选择文件过大。");' . "\r\n" . '			this.debug("Error Code: File too big, File name: " + file.name + ", File size: " + file.size + ", Message: " + message);' . "\r\n" . '			break;' . "\r\n" . '		case SWFUpload.QUEUE_ERROR.ZERO_BYTE_FILE:' . "\r\n" . '			progress.setStatus("选择的是空文件。");' . "\r\n" . '			this.debug("Error Code: Zero byte file, File name: " + file.name + ", File size: " + file.size + ", Message: " + message);' . "\r\n" . '			break;' . "\r\n" . '		case SWFUpload.QUEUE_ERROR.INVALID_FILETYPE:' . "\r\n" . '			progress.setStatus("选择的文件不是支持的文件类型。");' . "\r\n" . '			this.debug("Error Code: Invalid File Type, File name: " + file.name + ", File size: " + file.size + ", Message: " + message);' . "\r\n" . '			break;' . "\r\n" . '		case SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED:' . "\r\n" . '			$.notification("选择过多文件。" +  (message > 1 ? "仅能选择 " +  message + " 个文件。" : "不能再选择更多文件。"));' . "\r\n" . '			break;' . "\r\n" . '		default:' . "\r\n" . '			if (file !== null) {' . "\r\n" . '				progress.setStatus("选择文件出现错误，请重新选择。");' . "\r\n" . '			}' . "\r\n" . '			this.debug("Error Code: " + errorCode + ", File name: " + file.name + ", File size: " + file.size + ", Message: " + message);' . "\r\n" . '			break;' . "\r\n" . '		}' . "\r\n" . '	} catch (ex) {' . "\r\n" . '        this.debug(ex);' . "\r\n" . '    }' . "\r\n" . '}' . "\r\n" . '' . "\r\n" . 'function fileDialogComplete(numFilesSelected, numFilesQueued) {' . "\r\n" . '}' . "\r\n" . '' . "\r\n" . '//上传开始时触发事件' . "\r\n" . 'function uploadStart(file) {' . "\r\n" . '	try {' . "\r\n" . '		if( document.getElementById(\'SurveyNextSubmit\') != null ) document.getElementById(\'SurveyNextSubmit\').disabled = true;' . "\r\n" . '		if( document.getElementById(\'SurveyOverSubmit\') != null ) document.getElementById(\'SurveyOverSubmit\').disabled = true;' . "\r\n" . '' . "\r\n" . '		var progress = new FileProgress(file, this.customSettings.progressTarget);' . "\r\n" . '		progress.setStatus("正在上传文件过程中...");' . "\r\n" . '		progress.toggleCancel(true, this);' . "\r\n" . '	}' . "\r\n" . '	catch (ex) {' . "\r\n" . '	}' . "\r\n" . '	' . "\r\n" . '	return true;' . "\r\n" . '}' . "\r\n" . '' . "\r\n" . '//文件上传过程中触发事件' . "\r\n" . 'function uploadProgress(file, bytesLoaded, bytesTotal) {' . "\r\n" . '' . "\r\n" . '	try {' . "\r\n" . '		var percent = Math.ceil((bytesLoaded / bytesTotal) * 100);' . "\r\n" . '' . "\r\n" . '		var progress = new FileProgress(file, this.customSettings.progressTarget);' . "\r\n" . '		progress.setProgress(percent);' . "\r\n" . '		progress.setStatus("正在上传文件过程中...");' . "\r\n" . '	} catch (ex) {' . "\r\n" . '		this.debug(ex);' . "\r\n" . '	}' . "\r\n" . '}' . "\r\n" . '' . "\r\n" . '//文件传输过程中出错触发事件' . "\r\n" . 'function uploadError(file, errorCode, message) {' . "\r\n" . '	try {' . "\r\n" . '		var progress = new FileProgress(file, this.customSettings.progressTarget);' . "\r\n" . '		progress.setError();' . "\r\n" . '		progress.toggleCancel(false);' . "\r\n" . '' . "\r\n" . '		switch (errorCode) {' . "\r\n" . '		case SWFUpload.UPLOAD_ERROR.HTTP_ERROR:' . "\r\n" . '			progress.setStatus("上传文件出现错误：" + message);' . "\r\n" . '			this.debug("Error Code: HTTP Error, File name: " + file.name + ", Message: " + message);' . "\r\n" . '			break;' . "\r\n" . '		case SWFUpload.UPLOAD_ERROR.UPLOAD_FAILED:' . "\r\n" . '			progress.setStatus("上传文件失败。");' . "\r\n" . '			this.debug("Error Code: Upload Failed, File name: " + file.name + ", File size: " + file.size + ", Message: " + message);' . "\r\n" . '			break;' . "\r\n" . '		case SWFUpload.UPLOAD_ERROR.IO_ERROR:' . "\r\n" . '			progress.setStatus("服务器I/O错误。");' . "\r\n" . '			this.debug("Error Code: IO Error, File name: " + file.name + ", Message: " + message);' . "\r\n" . '			break;' . "\r\n" . '		case SWFUpload.UPLOAD_ERROR.SECURITY_ERROR:' . "\r\n" . '			progress.setStatus("安全错误。");' . "\r\n" . '			this.debug("Error Code: Security Error, File name: " + file.name + ", Message: " + message);' . "\r\n" . '			break;' . "\r\n" . '		case SWFUpload.UPLOAD_ERROR.UPLOAD_LIMIT_EXCEEDED:' . "\r\n" . '			progress.setStatus("上传的文件个数可能超出限制。");' . "\r\n" . '			this.debug("Error Code: Upload Limit Exceeded, File name: " + file.name + ", File size: " + file.size + ", Message: " + message);' . "\r\n" . '			break;' . "\r\n" . '		case SWFUpload.UPLOAD_ERROR.FILE_VALIDATION_FAILED:' . "\r\n" . '			progress.setStatus("文件检验错误。上传被取消。");' . "\r\n" . '			this.debug("Error Code: File Validation Failed, File name: " + file.name + ", File size: " + file.size + ", Message: " + message);' . "\r\n" . '			break;' . "\r\n" . '		case SWFUpload.UPLOAD_ERROR.FILE_CANCELLED:' . "\r\n" . '			progress.setStatus("文件上传被取消。");' . "\r\n" . '			progress.setCancelled();' . "\r\n" . '			break;' . "\r\n" . '		case SWFUpload.UPLOAD_ERROR.UPLOAD_STOPPED:' . "\r\n" . '			progress.setStatus("文件上传被停止。");' . "\r\n" . '			break;' . "\r\n" . '		default:' . "\r\n" . '			progress.setStatus("上传文件出现错误，请重新上传：" + errorCode);' . "\r\n" . '			this.debug("Error Code: " + errorCode + ", File name: " + file.name + ", File size: " + file.size + ", Message: " + message);' . "\r\n" . '			break;' . "\r\n" . '		}' . "\r\n" . '	} catch (ex) {' . "\r\n" . '        this.debug(ex);' . "\r\n" . '    }' . "\r\n" . '}' . "\r\n" . '' . "\r\n" . 'function uploadComplete(file){}' . "\r\n" . '';

?>
