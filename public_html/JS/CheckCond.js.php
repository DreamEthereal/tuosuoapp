<?php
//dezend by http://www.yunlu99.com/
if ((ob_get_length() === false) && !ini_get('zlib.output_compression') && (ini_get('output_handler') != 'ob_gzhandler') && (ini_get('output_handler') != 'mb_output_handler')) {
	ob_start('ob_gzhandler');
}

header('Cache-Control: public');
header('Pragma: cache');
$offset = 2592000;
$ExpStr = 'Expires: ' . gmdate('D, d M Y H:i:s', time() + $offset) . ' GMT';
$LmStr = 'Last-Modified: ' . gmdate('D, d M Y H:i:s', filemtime(__FILE__)) . ' GMT';
header($ExpStr);
header($LmStr);
header('Content-Type: text/javascrīpt; charset: UTF-8');
echo '' . "\r\n" . ' //theOptionList格式' . "\r\n" . ' //theBaseOptionID||||theOptionValue1,theOptionValue2&&&&theOptionText1####theOptionText2****' . "\r\n" . ' function getCondOptionSamePage(theBaseID,theID,isList,theOriValue,theOptionList){' . "\r\n" . '  ' . "\r\n" . '   var theBaseObj =  eval("document.Survey_Form.option_"+theBaseID );' . "\r\n" . '   var theObj =  eval("document.getElementById(\\"option_"+theID + "\\")");' . "\r\n" . '   var theBaseOptionIDArray,theOptionGroup,theOptionTextValueArray,theOptinValue,theOptionText;' . "\r\n" . '   var theItemOptionIDList;' . "\r\n" . '   var isTheOriList = false;' . "\r\n" . '' . "\r\n" . '   if( theBaseObj != null )' . "\r\n" . '   {' . "\r\n" . '		theBaseOptionIDArray = theOptionList.split(\'****\');' . "\r\n" . '		for(k=0;k<=theBaseOptionIDArray.length-1;k++)' . "\r\n" . '		{' . "\r\n" . '			theOptionGroup = theBaseOptionIDArray[k].split(\'||||\');' . "\r\n" . '			if( isList == 1)  //下拉' . "\r\n" . '			{' . "\r\n" . '               if( IsInSelectedList(theBaseObj,theOptionGroup[0]) ) {' . "\r\n" . '				     //值与文本联合字符串数组' . "\r\n" . '					 theOptionTextValueArray = theOptionGroup[1].split(\'&&&&\');' . "\r\n" . '					 //值数组' . "\r\n" . '					 theOptinValue = theOptionTextValueArray[0].split(\',\');' . "\r\n" . '					 //查原有ID是否在数组中' . "\r\n" . '					 theOptionTextValueListStr = \',\' + theOptionTextValueArray[0] + \',\';' . "\r\n" . '					 for( m=0;m<theObj.options.length;m++ ) { ' . "\r\n" . '						if( theOptionTextValueListStr.indexOf(","+  theObj.options[m].value + ",") != -1 )' . "\r\n" . '						{' . "\r\n" . '						    isTheOriList = true;' . "\r\n" . '							break;' . "\r\n" . '						}' . "\r\n" . '					 }' . "\r\n" . '					 if( isTheOriList == false )' . "\r\n" . '					 {' . "\r\n" . '						 //文本数组' . "\r\n" . '						 theOptionText = theOptionTextValueArray[1].split(\'####\');' . "\r\n" . '						 //清空所有的Options' . "\r\n" . '						 theObj.options.length=0;' . "\r\n" . '						 theObj.options.add(new Option(\'请选择...\',\'\')); ' . "\r\n" . '						 for(j=0;j<=theOptinValue.length-1;j++){' . "\r\n" . '							theObj.options.add(new Option(theOptionText[j],theOptinValue[j])); ' . "\r\n" . '						 }' . "\r\n" . '					 }' . "\r\n" . '			    } //end for if' . "\r\n" . '			}' . "\r\n" . '			else' . "\r\n" . '			{' . "\r\n" . '                if( IsInCheckBox(theBaseObj,theOptionGroup[0]) ) {' . "\r\n" . '				     //值与文本联合字符串数组' . "\r\n" . '					 theOptionTextValueArray = theOptionGroup[1].split(\'&&&&\');' . "\r\n" . '					 //值数组' . "\r\n" . '					 theOptinValue = theOptionTextValueArray[0].split(\',\');' . "\r\n" . '					 //查原有ID是否在数组中' . "\r\n" . '					 theOptionTextValueListStr = \',\' + theOptionTextValueArray[0] + \',\';' . "\r\n" . '					 for( m=0;m<theObj.options.length;m++ ) { ' . "\r\n" . '						if( theOptionTextValueListStr.indexOf(","+  theObj.options[m].value + ",") != -1 )' . "\r\n" . '						{' . "\r\n" . '						    isTheOriList = true;' . "\r\n" . '							break;' . "\r\n" . '						}' . "\r\n" . '					 }' . "\r\n" . '					 if( isTheOriList == false )' . "\r\n" . '					 {' . "\r\n" . '						 //文本数组' . "\r\n" . '						 theOptionText = theOptionTextValueArray[1].split(\'####\');' . "\r\n" . '						 //清空所有的Options' . "\r\n" . '						 theObj.options.length=0;' . "\r\n" . '						 theObj.options.add(new Option(\'请选择...\',\'\')); ' . "\r\n" . '						 for(j=0;j<=theOptinValue.length-1;j++){' . "\r\n" . '							theObj.options.add(new Option(theOptionText[j],theOptinValue[j])); ' . "\r\n" . '						 }' . "\r\n" . '					 }' . "\r\n" . '			    } //end for if' . "\r\n" . '			}//end for if islist' . "\r\n" . '	    } //end for for' . "\r\n" . '' . "\r\n" . '		//判断选中' . "\r\n" . '		if( theOriValue != \'\' && isTheOriList == false )' . "\r\n" . '		{' . "\r\n" . '		    theItemOptionIDList = \',\' + theOriValue + \',\' ;' . "\r\n" . '		    for( i=0;i<theObj.options.length;i++ )' . "\r\n" . '			{' . "\r\n" . '				if( theItemOptionIDList.indexOf(","+ theObj.options[i].value + ",") == -1 )' . "\r\n" . '				{' . "\r\n" . '					theObj.options[i].selected = false;' . "\r\n" . '				}' . "\r\n" . '				else' . "\r\n" . '				{' . "\r\n" . '' . "\r\n" . '					theObj.options[i].selected = true;' . "\r\n" . '				}' . "\r\n" . '			}' . "\r\n" . '		}		   ' . "\r\n" . '    }//end for if' . "\r\n" . '}' . "\r\n" . '' . "\r\n" . ' function getCondOptionNoSamePage(theBaseValue,theID,theOriValue,theOptionList){' . "\r\n" . '  ' . "\r\n" . '   var theObj =  eval("document.getElementById(\\"option_"+theID + "\\")");' . "\r\n" . '   var theBaseOptionIDArray,theOptionGroup,theOptionTextValueArray,theOptinValue,theOptionText;' . "\r\n" . '   var theItemOptionIDList;' . "\r\n" . '   var isTheOriList = false;' . "\r\n" . '' . "\r\n" . '   if( theBaseValue != \'\' )' . "\r\n" . '	{' . "\r\n" . '		theBaseOptionIDArray = theOptionList.split(\'****\');' . "\r\n" . '		for(k=0;k<=theBaseOptionIDArray.length-1;k++)' . "\r\n" . '		{' . "\r\n" . '			theOptionGroup = theBaseOptionIDArray[k].split(\'||||\');' . "\r\n" . '            if( theBaseValue == theOptionGroup[0] ) {' . "\r\n" . '				     //值与文本联合字符串数组' . "\r\n" . '					 theOptionTextValueArray = theOptionGroup[1].split(\'&&&&\');' . "\r\n" . '					 //值数组' . "\r\n" . '					 theOptinValue = theOptionTextValueArray[0].split(\',\');' . "\r\n" . '					 //查原有ID是否在数组中' . "\r\n" . '					 theOptionTextValueListStr = \',\' + theOptionTextValueArray[0] + \',\';' . "\r\n" . '					 for( m=0;m<theObj.options.length;m++ ) { ' . "\r\n" . '						if( theOptionTextValueListStr.indexOf(","+  theObj.options[m].value + ",") != -1 )' . "\r\n" . '						{' . "\r\n" . '						    isTheOriList = true;' . "\r\n" . '							break;' . "\r\n" . '						}' . "\r\n" . '					 }' . "\r\n" . '					 if( isTheOriList == false )' . "\r\n" . '					 {' . "\r\n" . '						 //文本数组' . "\r\n" . '						 theOptionText = theOptionTextValueArray[1].split(\'####\');' . "\r\n" . '						 //清空所有的Options' . "\r\n" . '						 theObj.options.length=0;' . "\r\n" . '						 theObj.options.add(new Option(\'请选择...\',\'\')); ' . "\r\n" . '						 for(j=0;j<=theOptinValue.length-1;j++){' . "\r\n" . '							theObj.options.add(new Option(theOptionText[j],theOptinValue[j])); ' . "\r\n" . '						 }' . "\r\n" . '					 }' . "\r\n" . '			}//end for if islist' . "\r\n" . '	    } //end for for' . "\r\n" . '' . "\r\n" . '		//判断选中' . "\r\n" . '		if( theOriValue != \'\' && isTheOriList == false )' . "\r\n" . '		{' . "\r\n" . '		    theItemOptionIDList = \',\' + theOriValue + \',\' ;' . "\r\n" . '		    for( i=0;i<theObj.options.length;i++ )' . "\r\n" . '			{' . "\r\n" . '				if( theItemOptionIDList.indexOf(","+ theObj.options[i].value + ",") == -1 )' . "\r\n" . '				{' . "\r\n" . '					theObj.options[i].selected = false;' . "\r\n" . '				}' . "\r\n" . '				else' . "\r\n" . '				{' . "\r\n" . '' . "\r\n" . '					theObj.options[i].selected = true;' . "\r\n" . '				}' . "\r\n" . '			}' . "\r\n" . '		}		   ' . "\r\n" . '    }//end for if' . "\r\n" . '}';

?>
