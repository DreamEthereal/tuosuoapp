<?php
//dezend by http://www.yunlu99.com/
if ((ob_get_length() === false) && !ini_get('zlib.output_compression') && (ini_get('output_handler') != 'ob_gzhandler') && (ini_get('output_handler') != 'mb_output_handler')) {
	ob_start('ob_gzhandler');
}

header('Cache-Control: public');
header('Pragma: cache');
$offset = 2592000;
$ExpStr = 'Expires: ' . gmdate('D, d M Y H:i:s', time() + $offset) . ' GMT';
$LmStr = 'Last-Modified: ' . gmdate('D, d M Y H:i:s', filemtime(__FILE__)) . ' GMT';
header($ExpStr);
header($LmStr);
header('Content-Type: text/javascrīpt; charset: UTF-8');
echo '' . "\r\n" . 'var http_request = false;' . "\r\n" . 'function AliasAjaxRequest(url)' . "\r\n" . '{' . "\r\n" . '	http_request = false;' . "\r\n" . '	if(window.ActiveXObject)' . "\r\n" . '	{' . "\r\n" . '		try  // IE' . "\r\n" . '		{' . "\r\n" . '			http_request = new ActiveXObject("Msxml2.XMLHTTP");' . "\r\n" . '		}' . "\r\n" . '		catch (e)' . "\r\n" . '		{' . "\r\n" . '			try' . "\r\n" . '			{' . "\r\n" . '				http_request = new ActiveXObject("Microsoft.XMLHTTP");' . "\r\n" . '			}' . "\r\n" . '			catch (e) {}' . "\r\n" . '		}' . "\r\n" . '	}' . "\r\n" . '	else if(window.XMLHttpRequest)' . "\r\n" . '	{' . "\r\n" . '		// Mozilla, Safari,...' . "\r\n" . '		http_request = new XMLHttpRequest();' . "\r\n" . '		if (http_request.overrideMimeType)' . "\r\n" . '		{' . "\r\n" . '			http_request.overrideMimeType(\'text/xml\');' . "\r\n" . '		}' . "\r\n" . '	}' . "\r\n" . '	' . "\r\n" . '	if (!http_request)' . "\r\n" . '	{' . "\r\n" . '		alert("Cannot create an XMLHTTP instance");' . "\r\n" . '		return false;' . "\r\n" . '	}' . "\r\n" . '	http_request.onreadystatechange = RtnContents;' . "\r\n" . '	http_request.open(\'GET\', url, true);' . "\r\n" . '	http_request.send(null);' . "\r\n" . '}' . "\r\n" . '' . "\r\n" . 'function RtnContents()' . "\r\n" . '{' . "\r\n" . '	if (http_request.readyState == 4)' . "\r\n" . '	{' . "\r\n" . '		if(http_request.status == 200)' . "\r\n" . '		{' . "\r\n" . '			if(http_request.responseText == "false")' . "\r\n" . '			{' . "\r\n" . '			   document.getElementById("alias_info").innerHTML="<img src=../Images/check_no.gif border=0> <span class=red>输入的问题别名已存在&nbsp;</span>";' . "\r\n" . '			}' . "\r\n" . '			else if(http_request.responseText == "true")' . "\r\n" . '			{' . "\r\n" . '			   document.getElementById("alias_info").innerHTML="<img src=../Images/check_yes.gif border=0> <span class=green>输入的问题别名可使用&nbsp;</span>";' . "\r\n" . '			}' . "\r\n" . '			else' . "\r\n" . '			{' . "\r\n" . '			   document.getElementById("alias_info").innerHTML="";' . "\r\n" . '            }' . "\r\n" . '		}' . "\r\n" . '		else' . "\r\n" . '		{' . "\r\n" . '			alert(\'网络传输问题\');' . "\r\n" . '		}' . "\r\n" . '	}' . "\r\n" . '}' . "\r\n" . '' . "\r\n" . 'function checkAliasValid()' . "\r\n" . '{' . "\r\n" . '	if (event.keyCode<48 || event.keyCode>126)' . "\r\n" . '	{' . "\r\n" . '		  event.keyCode=0;' . "\r\n" . '	}' . "\r\n" . '}' . "\r\n" . '' . "\r\n" . 'function ajaxChangeOption(url,stringText) {' . "\r\n" . '	var ajax=false; ' . "\r\n" . '	try { ajax = new ActiveXObject("Msxml2.XMLHTTP"); }' . "\r\n" . '	catch (e) { try { ajax = new ActiveXObject("Microsoft.XMLHTTP"); } catch (E) { ajax = false; } }' . "\r\n" . '	if (!ajax && typeof XMLHttpRequest!=\'undefined\') ajax = new XMLHttpRequest(); ' . "\r\n" . '' . "\r\n" . '	ajax.open("POST", url, true); ' . "\r\n" . '	ajax.setRequestHeader("Content-Type","application/x-www-form-urlencoded"); ' . "\r\n" . '	ajax.send(stringText);' . "\r\n" . '	ajax.onreadystatechange = function(){' . "\r\n" . '	  if( ajax.readyState == 4 && ajax.status == 200)' . "\r\n" . '	  {' . "\r\n" . '		  var theRtnValue = ajax.responseText.split(\'######\');' . "\r\n" . '		  document.getElementById("baseOptionID").value = theRtnValue[0];' . "\r\n" . '		  document.getElementById("theOptionText").innerHTML = theRtnValue[1];' . "\r\n" . '	  }' . "\r\n" . '	} ' . "\r\n" . '}';

?>
