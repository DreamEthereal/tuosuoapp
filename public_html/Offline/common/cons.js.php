<?php
//dezend by http://www.yunlu99.com/
echo '//判断逻辑关系相关的两方是否在同页' . "\r\n" . 'function IsSamePage(baseQtnID,conQtnID)' . "\r\n" . '{' . "\r\n" . '   var pageQtn = PagesListArray;' . "\r\n" . '   if( count(pageQtn)==0 || count(pageQtn[thisPageStep])==0 )' . "\r\n" . '   {' . "\r\n" . '	   return false;' . "\r\n" . '   }' . "\r\n" . '' . "\r\n" . '   if( in_array(baseQtnID,pageQtn[thisPageStep])  && in_array(conQtnID,pageQtn[thisPageStep]) )' . "\r\n" . '   {' . "\r\n" . '	   return true;' . "\r\n" . '   }' . "\r\n" . '   else' . "\r\n" . '   {' . "\r\n" . '	   return false;' . "\r\n" . '   }' . "\r\n" . '}' . "\r\n" . '' . "\r\n" . '//得到页面逻辑关系计算表达式' . "\r\n" . 'function _GetQuestionCond( qtnID,surveyID )' . "\r\n" . '{' . "\r\n" . '	//逻辑关系' . "\r\n" . '	var j = 0;' . "\r\n" . '	var conList = \'\';' . "\r\n" . '	if( typeof CondListArray[qtnID] == \'undefined\') return conList;' . "\r\n" . '	for( var condOnID in CondListArray[qtnID] )' . "\r\n" . '	{' . "\r\n" . '		var theCondOnIDArray = CondListArray[qtnID][condOnID];' . "\r\n" . '		var condOnID_QuestionType = QtnListArray[condOnID].questionType;' . "\r\n" . '		//1,2,3,6,7,24,25,30,19,28,17,4,23,10,15,16,20,21,22,31' . "\r\n" . '		switch(condOnID_QuestionType)' . "\r\n" . '		{' . "\r\n" . '			case 1: //YesNo' . "\r\n" . '			case 2: //Radio' . "\r\n" . '			case 3: //CheckBox' . "\r\n" . '			case 4: //Text' . "\r\n" . '			case 24: //CombRadio' . "\r\n" . '			case 25: //CombCheckBox' . "\r\n" . '			case 30: //Empty' . "\r\n" . '			case 17: //Auto' . "\r\n" . '				var Con_Total = count(theCondOnIDArray[0]); //qtnID=0' . "\r\n" . '				var i = 0;' . "\r\n" . '				if( Con_Total >= 2 )  conList += \'(\';' . "\r\n" . '				for( var p in theCondOnIDArray[0] )' . "\r\n" . '				{' . "\r\n" . '					var theOptionArray = theCondOnIDArray[0][p];' . "\r\n" . '					i++;' . "\r\n" . '					if( condOnID_QuestionType == 4 )  //数值填空' . "\r\n" . '					{' . "\r\n" . '						switch(theOptionArray[1])' . "\r\n" . '						{' . "\r\n" . '							case 1:opertion = \'==\';break;' . "\r\n" . '							case 2:opertion = \'<\';break;' . "\r\n" . '							case 3:opertion = \'<=\';break;' . "\r\n" . '							case 4:opertion = \'>\';break;' . "\r\n" . '							case 5:opertion = \'>=\';break;' . "\r\n" . '							case 6:opertion = \'!=\';break;' . "\r\n" . '						}' . "\r\n" . '						if( i == Con_Total) opertionRelation = \'\';' . "\r\n" . '						else opertionRelation = \' && \';' . "\r\n" . '						conList += \'( getID(\\\'option_\'+condOnID+\'\\\') != null && !isNaN(getID(\\\'option_\'+condOnID+\'\\\').value) && getID(\\\'option_\'+condOnID+\'\\\').value != \\\'\\\' && getID(\\\'option_\'+condOnID+\'\\\').value \'+opertion+\' \'+theOptionArray[0]+\')\'+opertionRelation;' . "\r\n" . '					}' . "\r\n" . '					else' . "\r\n" . '					{' . "\r\n" . '						if( i == Con_Total) opertionRelation = \'\';' . "\r\n" . '						else{' . "\r\n" . '							if( parseInt(theOptionArray[2]) == 1 ) opertionRelation = \' && \';' . "\r\n" . '							else opertionRelation = \' || \';' . "\r\n" . '						}' . "\r\n" . '						switch( condOnID_QuestionType )' . "\r\n" . '						{' . "\r\n" . '							case 1: //是非题' . "\r\n" . '								if( theOptionArray[1] == 1 )  //选择' . "\r\n" . '								{' . "\r\n" . '									if( IsSamePage(qtnID,condOnID) )' . "\r\n" . '									{' . "\r\n" . '										conList += \'( IsInCheckBox(document.Survey_Form.option_\'+condOnID+\',\'+theOptionArray[0]+\') )\'+opertionRelation;' . "\r\n" . '									}' . "\r\n" . '									else' . "\r\n" . '									{' . "\r\n" . '										conList += \'( getID(\\\'option_\'+condOnID+\'\\\') != null && getID(\\\'option_\'+condOnID+\'\\\').value == \'+theOptionArray[0]+\')\'+opertionRelation;' . "\r\n" . '									}' . "\r\n" . '								}' . "\r\n" . '								else' . "\r\n" . '								{' . "\r\n" . '									if( IsSamePage(qtnID,condOnID) )' . "\r\n" . '									{' . "\r\n" . '										conList += \'( !IsInCheckBox(document.Survey_Form.option_\'+condOnID+\',\'+theOptionArray[0]+\') )\'+opertionRelation;' . "\r\n" . '									}' . "\r\n" . '									else' . "\r\n" . '									{' . "\r\n" . '										conList += \'( getID(\\\'option_\'+condOnID+\'\\\') != null && getID(\\\'option_\'+condOnID+\'\\\').value != \'+theOptionArray[0]+\')\'+opertionRelation;' . "\r\n" . '									}' . "\r\n" . '								}' . "\r\n" . '							break;' . "\r\n" . '							case 2:  //单选题						   ' . "\r\n" . '								if( theOptionArray[1] == 1 )  //选择' . "\r\n" . '								{' . "\r\n" . '									if( IsSamePage(qtnID,condOnID) )' . "\r\n" . '									{' . "\r\n" . '										if( QtnListArray[condOnID].isSelect == 1 ) //下拉' . "\r\n" . '										{' . "\r\n" . '											conList += \'( IsInSelectedList(document.Survey_Form.option_\'+condOnID+\',\'+theOptionArray[0]+\') )\'+opertionRelation;' . "\r\n" . '										}' . "\r\n" . '										else' . "\r\n" . '										{' . "\r\n" . '											conList += \'( IsInCheckBox(document.Survey_Form.option_\'+condOnID+\',\'+theOptionArray[0]+\') )\'+opertionRelation;' . "\r\n" . '										}' . "\r\n" . '									}' . "\r\n" . '									else' . "\r\n" . '									{' . "\r\n" . '										conList += \'( getID(\\\'option_\'+condOnID+\'\\\') != null && getID(\\\'option_\'+condOnID+\'\\\').value == \\\'\'+theOptionArray[0]+\'\\\')\'+opertionRelation;' . "\r\n" . '									}' . "\r\n" . '								}' . "\r\n" . '								else' . "\r\n" . '								{' . "\r\n" . '									if( IsSamePage(qtnID,condOnID) )' . "\r\n" . '									{' . "\r\n" . '										if( QtnListArray[condOnID].isSelect == 1 ) //下拉' . "\r\n" . '										{' . "\r\n" . '											conList += \'( !IsInSelectedList(document.Survey_Form.option_\'+condOnID+\',\'+theOptionArray[0]+\') )\'+opertionRelation;' . "\r\n" . '										}' . "\r\n" . '										else' . "\r\n" . '										{' . "\r\n" . '											conList += \'( !IsInCheckBox(document.Survey_Form.option_\'+condOnID+\',\'+theOptionArray[0]+\') )\'+opertionRelation;' . "\r\n" . '										}' . "\r\n" . '									}' . "\r\n" . '									else' . "\r\n" . '									{' . "\r\n" . '										conList += \'( getID(\\\'option_\'+condOnID+\'\\\') != null && getID(\\\'option_\'+condOnID+\'\\\').value != \'+theOptionArray[0]+\')\'+opertionRelation;' . "\r\n" . '									}' . "\r\n" . '								}' . "\r\n" . '							break;' . "\r\n" . '							case 3:  //复选题' . "\r\n" . '								if( theOptionArray[3] == 2 )  //计算模式' . "\r\n" . '								{' . "\r\n" . '									switch(theOptionArray[1])' . "\r\n" . '									{' . "\r\n" . '										case 1:opertion = \'==\';break;' . "\r\n" . '										case 2:opertion = \'<\';break;' . "\r\n" . '										case 3:opertion = \'<=\';break;' . "\r\n" . '										case 4:opertion = \'>\';break;' . "\r\n" . '										case 5:opertion = \'>=\';break;' . "\r\n" . '										case 6:opertion = \'!=\';break;' . "\r\n" . '									}' . "\r\n" . '									if( i == Con_Total) opertionRelation = \'\';' . "\r\n" . '									else opertionRelation = \' && \';' . "\r\n" . '									if( IsSamePage(qtnID,condOnID) )' . "\r\n" . '									{' . "\r\n" . '										conList += \'(getCheckBoxSelNum(document.Survey_Form.option_\'+condOnID+\') \'+opertion+\' \'+theOptionArray[0]+\')\'+opertionRelation;' . "\r\n" . '									}' . "\r\n" . '									else' . "\r\n" . '									{' . "\r\n" . '										conList += "( getID(\'option_"+condOnID+"\') != null && getID(\'option_"+condOnID+"\').value.split(\',\').length "+opertion+" "+theOptionArray[0]+")"+opertionRelation;' . "\r\n" . '									}' . "\r\n" . '								}' . "\r\n" . '								else' . "\r\n" . '								{' . "\r\n" . '									if( theOptionArray[1] == 1 )  //选择' . "\r\n" . '									{' . "\r\n" . '										if( IsSamePage(qtnID,condOnID) )' . "\r\n" . '										{' . "\r\n" . '											if( QtnListArray[condOnID].isSelect == 1 ) //下拉' . "\r\n" . '											{' . "\r\n" . '												conList += \'( IsInSelectedList(document.Survey_Form.option_\'+condOnID+\',\'+theOptionArray[0]+\') )\'+opertionRelation;' . "\r\n" . '											}' . "\r\n" . '											else' . "\r\n" . '											{' . "\r\n" . '												conList += \'( IsInCheckBox(document.Survey_Form.option_\'+condOnID+\',\'+theOptionArray[0]+\') )\'+opertionRelation;' . "\r\n" . '											}' . "\r\n" . '										}' . "\r\n" . '										else' . "\r\n" . '										{' . "\r\n" . '											conList += \'( getID(\\\'option_\'+condOnID+\'\\\') != null && isInValueList(\'+theOptionArray[0]+\',getID(\\\'option_\'+condOnID+\'\\\').value) )\'+opertionRelation;				' . "\r\n" . '										}' . "\r\n" . '									}' . "\r\n" . '									else' . "\r\n" . '									{' . "\r\n" . '										if( IsSamePage(qtnID,condOnID) )' . "\r\n" . '										{' . "\r\n" . '											if( QtnListArray[condOnID].isSelect == 1 ) //下拉' . "\r\n" . '											{' . "\r\n" . '												conList += \'( !IsInSelectedList(document.Survey_Form.option_\'+condOnID+\',\'+theOptionArray[0]+\') )\'+opertionRelation;' . "\r\n" . '											}' . "\r\n" . '											else' . "\r\n" . '											{' . "\r\n" . '												conList += \'( !IsInCheckBox(document.Survey_Form.option_\'+condOnID+\',\'+theOptionArray[0]+\') )\'+opertionRelation;' . "\r\n" . '											}' . "\r\n" . '										}' . "\r\n" . '										else' . "\r\n" . '										{' . "\r\n" . '											conList += \'( getID(\\\'option_\'+condOnID+\'\\\') != null && !isInValueList(\'+theOptionArray[0]+\',getID(\\\'option_\'+condOnID+\'\\\').value) )\'+opertionRelation;				' . "\r\n" . '										}' . "\r\n" . '									}' . "\r\n" . '								}' . "\r\n" . '							break;' . "\r\n" . '							case 17:' . "\r\n" . '								if( QtnListArray[condOnID].isSelect == 1 )  //单选' . "\r\n" . '								{' . "\r\n" . '									if( theOptionArray[1] == 1 )  //选择' . "\r\n" . '									{' . "\r\n" . '										if( IsSamePage(qtnID,condOnID) )' . "\r\n" . '										{' . "\r\n" . '											conList += \'( IsInCheckBox(document.Survey_Form.option_\'+condOnID+\',\'+theOptionArray[0]+\') )\'+opertionRelation;' . "\r\n" . '										}' . "\r\n" . '										else' . "\r\n" . '										{' . "\r\n" . '											conList += \'( getID(\\\'option_\'+condOnID+\'\\\') != null && getID(\\\'option_\'+condOnID+\'\\\').value == \'+theOptionArray[0]+\')\'+opertionRelation;' . "\r\n" . '										}' . "\r\n" . '									}' . "\r\n" . '									else' . "\r\n" . '									{' . "\r\n" . '										if( IsSamePage(qtnID,condOnID) )' . "\r\n" . '										{' . "\r\n" . '											conList += \'( !IsInCheckBox(document.Survey_Form.option_\'+condOnID+\',\'+theOptionArray[0]+\') )\'+opertionRelation;' . "\r\n" . '										}' . "\r\n" . '										else' . "\r\n" . '										{' . "\r\n" . '											conList += \'( getID(\\\'option_\'+condOnID+\'\\\') != null && getID(\\\'option_\'+condOnID+\'\\\').value != \'+theOptionArray[0]+\')\'+opertionRelation;' . "\r\n" . '										}' . "\r\n" . '									}' . "\r\n" . '								}' . "\r\n" . '								else' . "\r\n" . '								{' . "\r\n" . '									if( theOptionArray[1] == 1 )  //选择' . "\r\n" . '									{' . "\r\n" . '										if( IsSamePage(qtnID,condOnID) )' . "\r\n" . '										{' . "\r\n" . '											conList += \'( IsInCheckBox(document.Survey_Form.option_\'+condOnID+\',\'+theOptionArray[0]+\') )\'+opertionRelation;' . "\r\n" . '										}' . "\r\n" . '										else' . "\r\n" . '										{' . "\r\n" . '											conList += \'( getID(\\\'option_\'+condOnID+\'\\\') != null && isInValueList(\'+theOptionArray[0]+\',getID(\\\'option_\'+condOnID+\'\\\').value) )\'+opertionRelation;				' . "\r\n" . '										}' . "\r\n" . '									}' . "\r\n" . '									else' . "\r\n" . '									{' . "\r\n" . '										if( IsSamePage(qtnID,condOnID) )' . "\r\n" . '										{' . "\r\n" . '											conList += \'( !IsInCheckBox(document.Survey_Form.option_\'+condOnID+\',\'+theOptionArray[0]+\') )\'+opertionRelation;' . "\r\n" . '										}' . "\r\n" . '										else' . "\r\n" . '										{' . "\r\n" . '											conList += \'( getID(\\\'option_\'+condOnID+\'\\\') != null && !isInValueList(\'+theOptionArray[0]+\',getID(\\\'option_\'+condOnID+\'\\\').value) )\'+opertionRelation;				' . "\r\n" . '										}' . "\r\n" . '									}' . "\r\n" . '								}' . "\r\n" . '							break;' . "\r\n" . '							case 24:  //复合单选题						   ' . "\r\n" . '								if( theOptionArray[1] == 1 )  //选择' . "\r\n" . '								{' . "\r\n" . '									if( IsSamePage(qtnID,condOnID) )' . "\r\n" . '									{' . "\r\n" . '										conList += \'( IsInCheckBox(document.Survey_Form.option_\'+condOnID+\',\'+theOptionArray[0]+\') )\'+opertionRelation;' . "\r\n" . '									}' . "\r\n" . '									else' . "\r\n" . '									{' . "\r\n" . '										conList += \'( getID(\\\'option_\'+condOnID+\'\\\') != null && getID(\\\'option_\'+condOnID+\'\\\').value == \'+theOptionArray[0]+\')\'+opertionRelation;' . "\r\n" . '									}' . "\r\n" . '								}' . "\r\n" . '								else' . "\r\n" . '								{' . "\r\n" . '									if( IsSamePage(qtnID,condOnID) )' . "\r\n" . '									{' . "\r\n" . '										conList += \'( !IsInCheckBox(document.Survey_Form.option_\'+condOnID+\',\'+theOptionArray[0]+\') )\'+opertionRelation;' . "\r\n" . '									}' . "\r\n" . '									else' . "\r\n" . '									{' . "\r\n" . '										conList += \'( getID(\\\'option_\'+condOnID+\'\\\') != null && getID(\\\'option_\'+condOnID+\'\\\').value != \'+theOptionArray[0]+\')\'+opertionRelation;' . "\r\n" . '									}' . "\r\n" . '								}' . "\r\n" . '							break;' . "\r\n" . '							case 25:  //复合复选题						   ' . "\r\n" . '								if( theOptionArray[3] == 2 )  //计算模式' . "\r\n" . '								{' . "\r\n" . '									switch(theOptionArray[1])' . "\r\n" . '									{' . "\r\n" . '										case 1:opertion = \'==\';break;' . "\r\n" . '										case 2:opertion = \'<\';break;' . "\r\n" . '										case 3:opertion = \'<=\';break;' . "\r\n" . '										case 4:opertion = \'>\';break;' . "\r\n" . '										case 5:opertion = \'>=\';break;' . "\r\n" . '										case 6:opertion = \'!=\';break;' . "\r\n" . '									}' . "\r\n" . '									if( i == Con_Total) opertionRelation = \'\';' . "\r\n" . '									else opertionRelation = \' && \';' . "\r\n" . '									if( IsSamePage(qtnID,condOnID) )' . "\r\n" . '									{' . "\r\n" . '										conList += \'(getCheckBoxSelNum(document.Survey_Form.option_\'+condOnID+\') \'+opertion+\' \'+theOptionArray[0]+\')\'+opertionRelation;' . "\r\n" . '									}' . "\r\n" . '									else' . "\r\n" . '									{' . "\r\n" . '										conList += "( getID(\'option_"+condOnID+"\') != null && getID(\'option_"+condOnID+"\').value.split(\',\').length "+opertion+" "+theOptionArray[0]+")"+opertionRelation;' . "\r\n" . '									}' . "\r\n" . '								}' . "\r\n" . '								else' . "\r\n" . '								{' . "\r\n" . '									if( theOptionArray[1] == 1 )  //选择' . "\r\n" . '									{' . "\r\n" . '										if( IsSamePage(qtnID,condOnID) )' . "\r\n" . '										{' . "\r\n" . '											conList += \'( IsInCheckBox(document.Survey_Form.option_\'+condOnID+\',\'+theOptionArray[0]+\') )\'+opertionRelation;' . "\r\n" . '										}' . "\r\n" . '										else' . "\r\n" . '										{' . "\r\n" . '											conList += \'( getID(\\\'option_\'+condOnID+\'\\\') != null && isInValueList(\'+theOptionArray[0]+\',getID(\\\'option_\'+condOnID+\'\\\').value) )\'+opertionRelation;				' . "\r\n" . '										}' . "\r\n" . '									}' . "\r\n" . '									else' . "\r\n" . '									{' . "\r\n" . '										if( IsSamePage(qtnID,condOnID) )' . "\r\n" . '										{' . "\r\n" . '											conList += \'( !IsInCheckBox(document.Survey_Form.option_\'+condOnID+\',\'+theOptionArray[0]+\') )\'+opertionRelation;' . "\r\n" . '										}' . "\r\n" . '										else' . "\r\n" . '										{' . "\r\n" . '											conList += \'( getID(\\\'option_\'+condOnID+\'\\\') != null && !isInValueList(\'+theOptionArray[0]+\',getID(\\\'option_\'+condOnID+\'\\\').value) )\'+opertionRelation;				' . "\r\n" . '										}' . "\r\n" . '									}' . "\r\n" . '								}' . "\r\n" . '							break;' . "\r\n" . '							case 30: //空题' . "\r\n" . '								if( theOptionArray[1] == 1 )  //等于' . "\r\n" . '								{' . "\r\n" . '									if( theOptionArray[0] == 1 )' . "\r\n" . '									{' . "\r\n" . '										conList += \'( getID(\\\'option_\'+condOnID+\'\\\') != null && parseInt(getID(\\\'option_\'+condOnID+\'\\\').value) == 1 )\'+opertionRelation;	' . "\r\n" . '									}' . "\r\n" . '									else' . "\r\n" . '									{' . "\r\n" . '										conList += \'( getID(\\\'option_\'+condOnID+\'\\\') != null && parseInt(getID(\\\'option_\'+condOnID+\'\\\').value) == 0 )\'+opertionRelation;	' . "\r\n" . '									}' . "\r\n" . '								}' . "\r\n" . '								else' . "\r\n" . '								{' . "\r\n" . '									if( theOptionArray[0] == 1 )' . "\r\n" . '									{' . "\r\n" . '										conList += \'( getID(\\\'option_\'+condOnID+\'\\\') != null && parseInt(getID(\\\'option_\'+condOnID+\'\\\').value) != 1 )\'+opertionRelation;	' . "\r\n" . '									}' . "\r\n" . '									else' . "\r\n" . '									{' . "\r\n" . '										conList += \'( getID(\\\'option_\'+condOnID+\'\\\') != null && parseInt(getID(\\\'option_\'+condOnID+\'\\\').value) != 0 )\'+opertionRelation;	' . "\r\n" . '									}' . "\r\n" . '								}' . "\r\n" . '							break;	' . "\r\n" . '						} //end of switch' . "\r\n" . '					} //end of if' . "\r\n" . '				} //end of foreach' . "\r\n" . '				if( Con_Total >= 2 )	conList += \')\';' . "\r\n" . '			break;' . "\r\n" . '			case 6:  //Range' . "\r\n" . '			case 7:  //Multiple' . "\r\n" . '			case 19: //AutoRange' . "\r\n" . '			case 28: //AutoMultiple' . "\r\n" . '			case 23: //CombText' . "\r\n" . '			case 10: //Rank' . "\r\n" . '			case 15: //Rating' . "\r\n" . '			case 16: //Weight' . "\r\n" . '			case 20: //AutoRank' . "\r\n" . '			case 21: //AutoRating' . "\r\n" . '			case 22: //AutoWeight' . "\r\n" . '			case 31: //级联' . "\r\n" . '				var RangeTotal = count(theCondOnIDArray); ' . "\r\n" . '				var k = 0;' . "\r\n" . '				if( RangeTotal >= 2 )  conList += \'(\';' . "\r\n" . '				for( var theRangeID in theCondOnIDArray )' . "\r\n" . '				{' . "\r\n" . '					var theRangeArray = theCondOnIDArray[theRangeID];' . "\r\n" . '					var i = 0;' . "\r\n" . '					var Con_Total = count(theRangeArray);' . "\r\n" . '					if( Con_Total >= 2 )  conList += \'(\';' . "\r\n" . '					for( var p in theRangeArray )' . "\r\n" . '					{' . "\r\n" . '						var theOptionArray = theRangeArray[p];' . "\r\n" . '						i++;' . "\r\n" . '						switch( condOnID_QuestionType )' . "\r\n" . '						{' . "\r\n" . '							case 23:' . "\r\n" . '							case 10:' . "\r\n" . '							case 16:' . "\r\n" . '							case 20:' . "\r\n" . '							case 22:' . "\r\n" . '								switch(theOptionArray[1])' . "\r\n" . '								{' . "\r\n" . '									case 1:opertion = \'==\';break;' . "\r\n" . '									case 2:opertion = \'<\';break;' . "\r\n" . '									case 3:opertion = \'<=\';break;' . "\r\n" . '									case 4:opertion = \'>\';break;' . "\r\n" . '									case 5:opertion = \'>=\';break;' . "\r\n" . '									case 6:opertion = \'!=\';break;' . "\r\n" . '								}' . "\r\n" . '								if( i == Con_Total) opertionRelation = \'\';' . "\r\n" . '								else opertionRelation = \' && \';' . "\r\n" . '								conList += \'( getID(\\\'option_\'+condOnID+\'_\'+theRangeID+\'\\\') != null && !isNaN(getID(\\\'option_\'+condOnID+\'_\'+theRangeID+\'\\\').value) && getID(\\\'option_\'+condOnID+\'_\'+theRangeID+\'\\\').value != \\\'\\\' && getID(\\\'option_\'+condOnID+\'_\'+theRangeID+\'\\\').value \'+opertion+\' \'+theOptionArray[0]+\')\'+opertionRelation;' . "\r\n" . '							break;' . "\r\n" . '							case 15:' . "\r\n" . '							case 21:' . "\r\n" . '								switch(theOptionArray[1])' . "\r\n" . '								{' . "\r\n" . '									case 1:opertion = \'==\';break;' . "\r\n" . '									case 2:opertion = \'<\';break;' . "\r\n" . '									case 3:opertion = \'<=\';break;' . "\r\n" . '									case 4:opertion = \'>\';break;' . "\r\n" . '									case 5:opertion = \'>=\';break;' . "\r\n" . '									case 6:opertion = \'!=\';break;' . "\r\n" . '								}' . "\r\n" . '								if( i == Con_Total) opertionRelation = \'\';' . "\r\n" . '								else opertionRelation = \' && \';' . "\r\n" . '								switch( QtnListArray[condOnID].isSelect )' . "\r\n" . '								{' . "\r\n" . '									case 0:' . "\r\n" . '										if( IsSamePage(qtnID,condOnID) )' . "\r\n" . '										{' . "\r\n" . '											conList += \'( getID(\\\'option_\'+condOnID+\'_\'+theRangeID+\'\\\') != null && getRadioCheckBoxValue(document.Survey_Form.option_\'+condOnID+\'_\'+theRangeID+\') != \\\'\\\' && getRadioCheckBoxValue(document.Survey_Form.option_\'+condOnID+\'_\'+theRangeID+\') != 99 && parseInt(getRadioCheckBoxValue(document.Survey_Form.option_\'+condOnID+\'_\'+theRangeID+\') * \'+QtnListArray[condOnID].weight+\') \'+opertion+\' \'+theOptionArray[0]+\')\'+opertionRelation;' . "\r\n" . '										}' . "\r\n" . '										else' . "\r\n" . '										{' . "\r\n" . '											conList += \'( getID(\\\'option_\'+condOnID+\'_\'+theRangeID+\'\\\') != null && getID(\\\'option_\'+condOnID+\'_\'+theRangeID+\'\\\').value != \\\'\\\' && getID(\\\'option_\'+condOnID+\'_\'+theRangeID+\'\\\').value != 99 && parseInt(getID(\\\'option_\'+condOnID+\'_\'+theRangeID+\'\\\').value * \'+QtnListArray[condOnID].weight+\') \'+opertion+\' \'+theOptionArray[0]+\')\'+opertionRelation;' . "\r\n" . '										}' . "\r\n" . '									break;' . "\r\n" . '									case 1:' . "\r\n" . '									case 2:' . "\r\n" . '										conList += \'( getID(\\\'option_\'+condOnID+\'_\'+theRangeID+\'\\\') != null && !isNaN(getID(\\\'option_\'+condOnID+\'_\'+theRangeID+\'\\\').value) && getID(\\\'option_\'+condOnID+\'_\'+theRangeID+\'\\\').value != \\\'\\\' && getID(\\\'option_\'+condOnID+\'_\'+theRangeID+\'\\\').value \'+opertion+\' \'+theOptionArray[0]+\')\'+opertionRelation;' . "\r\n" . '									break;' . "\r\n" . '								}' . "\r\n" . '							break;' . "\r\n" . '							case 6:' . "\r\n" . '							case 19:' . "\r\n" . '								if( i == Con_Total) opertionRelation = \'\';' . "\r\n" . '								else{' . "\r\n" . '									if( parseInt(theOptionArray[2]) == 1 ) opertionRelation = \' && \';' . "\r\n" . '									else opertionRelation = \' || \';' . "\r\n" . '								}' . "\r\n" . '								if( theOptionArray[1] == 1 )  //选择' . "\r\n" . '								{' . "\r\n" . '									if( IsSamePage(qtnID,condOnID) )' . "\r\n" . '									{' . "\r\n" . '										conList += \'( IsInCheckBox(document.Survey_Form.option_\'+condOnID+\'_\'+theRangeID+\',\'+theOptionArray[0]+\') )\'+opertionRelation;' . "\r\n" . '									}' . "\r\n" . '									else' . "\r\n" . '									{' . "\r\n" . '										conList += \'( getID(\\\'option_\'+condOnID+\'_\'+theRangeID+\'\\\') != null && getID(\\\'option_\'+condOnID+\'_\'+theRangeID+\'\\\').value == \'+theOptionArray[0]+\')\'+opertionRelation;' . "\r\n" . '									}' . "\r\n" . '								}' . "\r\n" . '								else' . "\r\n" . '								{' . "\r\n" . '									if( IsSamePage(qtnID,condOnID) )' . "\r\n" . '									{' . "\r\n" . '										conList += \'( !IsInCheckBox(document.Survey_Form.option_\'+condOnID+\'_\'+theRangeID+\',\'+theOptionArray[0]+\') )\'+opertionRelation;' . "\r\n" . '									}' . "\r\n" . '									else' . "\r\n" . '									{' . "\r\n" . '										conList += \'( getID(\\\'option_\'+condOnID+\'_\'+theRangeID+\'\\\') != null && getID(\\\'option_\'+condOnID+\'_\'+theRangeID+\'\\\').value != \'+theOptionArray[0]+\')\'+opertionRelation;' . "\r\n" . '									}' . "\r\n" . '								}' . "\r\n" . '							break;' . "\r\n" . '							case 7:' . "\r\n" . '							case 28:' . "\r\n" . '								if( i == Con_Total) opertionRelation = \'\';' . "\r\n" . '								else{' . "\r\n" . '									if( parseInt(theOptionArray[2]) == 1 ) opertionRelation = \' && \';' . "\r\n" . '									else opertionRelation = \' || \';' . "\r\n" . '								}' . "\r\n" . '								if( theOptionArray[1] == 1 )  //选择' . "\r\n" . '								{' . "\r\n" . '									if( IsSamePage(qtnID,condOnID) )' . "\r\n" . '									{' . "\r\n" . '										conList += \'( IsInCheckBox(document.Survey_Form.option_\'+condOnID+\'_\'+theRangeID+\',\'+theOptionArray[0]+\') )\'+opertionRelation;' . "\r\n" . '									}' . "\r\n" . '									else' . "\r\n" . '									{' . "\r\n" . '										conList += \'( getID(\\\'option_\'+condOnID+\'_\'+theRangeID+\'\\\') != null && isInValueList(\'+theOptionArray[0]+\',getID(\\\'option_\'+condOnID+\'_\'+theRangeID+\'\\\').value) )\'+opertionRelation;' . "\r\n" . '									}' . "\r\n" . '								}' . "\r\n" . '								else' . "\r\n" . '								{' . "\r\n" . '									if( IsSamePage(qtnID,condOnID) )' . "\r\n" . '									{' . "\r\n" . '										conList += \'( !IsInCheckBox(document.Survey_Form.option_\'+condOnID+\'_\'+theRangeID+\',\'+theOptionArray[0]+\') )\'+opertionRelation;' . "\r\n" . '									}' . "\r\n" . '									else' . "\r\n" . '									{' . "\r\n" . '										conList += \'( getID(\\\'option_\'+condOnID+\'_\'+theRangeID+\'\\\') != null && !isInValueList(\'+theOptionArray[0]+\',getID(\\\'option_\'+condOnID+\'_\'+theRangeID+\'\\\').value) )\'+opertionRelation;' . "\r\n" . '									}' . "\r\n" . '								}' . "\r\n" . '							break;' . "\r\n" . '							case 31:' . "\r\n" . '								if( i == Con_Total) opertionRelation = \'\';' . "\r\n" . '								else{' . "\r\n" . '									if( parseInt(theOptionArray[2]) == 1 ) opertionRelation = \' && \';' . "\r\n" . '									else opertionRelation = \' || \';' . "\r\n" . '								}' . "\r\n" . '								if( theOptionArray[1] == 1 )  //选择' . "\r\n" . '								{' . "\r\n" . '									if( IsSamePage(qtnID,condOnID) )' . "\r\n" . '									{' . "\r\n" . '										conList += \'( IsInSelectedList(document.Survey_Form.option_\'+condOnID+\'_\'+theRangeID+\',\'+theOptionArray[0]+\') )\'+opertionRelation;' . "\r\n" . '									}' . "\r\n" . '									else' . "\r\n" . '									{' . "\r\n" . '										conList += \'( getID(\\\'option_\'+condOnID+\'_\'+theRangeID+\'\\\') != null && getID(\\\'option_\'+condOnID+\'_\'+theRangeID+\'\\\').value == \'+theOptionArray[0]+\')\'+opertionRelation;' . "\r\n" . '									}' . "\r\n" . '								}' . "\r\n" . '								else' . "\r\n" . '								{' . "\r\n" . '									if( IsSamePage(qtnID,condOnID) )' . "\r\n" . '									{' . "\r\n" . '										conList += \'( !IsInSelectedList(document.Survey_Form.option_\'+condOnID+\'_\'+theRangeID+\',\'+theOptionArray[0]+\') )\'+opertionRelation;' . "\r\n" . '									}' . "\r\n" . '									else' . "\r\n" . '									{' . "\r\n" . '										conList += \'( getID(\\\'option_\'+condOnID+\'_\'+theRangeID+\'\\\') != null && getID(\\\'option_\'+condOnID+\'_\'+theRangeID+\'\\\').value != \'+theOptionArray[0]+\')\'+opertionRelation;' . "\r\n" . '									}' . "\r\n" . '								}' . "\r\n" . '							break;' . "\r\n" . '						} //end of switch' . "\r\n" . '					}//end of foreach' . "\r\n" . '					if( Con_Total >= 2 )  conList += \')\';					' . "\r\n" . '					k++;' . "\r\n" . '					if( k != RangeTotal )' . "\r\n" . '					{' . "\r\n" . '						if( QtnListArray[qtnID].isLogicAnd == 1) { conList += \' && \'; }' . "\r\n" . '						else { conList += \' || \'; }' . "\r\n" . '					}' . "\r\n" . '				}//end of foreach' . "\r\n" . '				if( RangeTotal >= 2 )  conList += \')\';' . "\r\n" . '			break;' . "\r\n" . '		} //end of switch' . "\r\n" . '		' . "\r\n" . '		j ++;' . "\r\n" . '		if( j != count(CondListArray[qtnID]))' . "\r\n" . '		{' . "\r\n" . '			if( QtnListArray[qtnID].isLogicAnd == 1) { conList += \' && \'; }' . "\r\n" . '			else { conList += \' || \'; }' . "\r\n" . '		}' . "\r\n" . '	} //end of foreach' . "\r\n" . '	return conList;' . "\r\n" . '}' . "\r\n" . '' . "\r\n" . '//判断是否需要跳页' . "\r\n" . 'function isSkipPage(pageTag,arrow)' . "\r\n" . '{' . "\r\n" . '   //PagesBreakArray   所有的分页标记数组' . "\r\n" . '   //PagesListArray    每个分页中所有问题的二维数组' . "\r\n" . '  ' . "\r\n" . '	dataRow = eval(\'(\'+ getDbRows(\'SELECT * FROM eq_response_\'+qid+\' WHERE responseID = \'+theResponseID+\' LIMIT 1\',\'rexsee:enableq.db\') + \')\' );' . "\r\n" . '   //最后一页' . "\r\n" . '   if( arrow == 1 )' . "\r\n" . '   {' . "\r\n" . '	   if(pageTag == count(PagesBreakArray)-1 )   return pageTag;' . "\r\n" . '   }' . "\r\n" . '   else' . "\r\n" . '   {' . "\r\n" . '	   if(pageTag <= 0 )   return 0;' . "\r\n" . '   }' . "\r\n" . '' . "\r\n" . '   //遍历的问卷页没有问题' . "\r\n" . '   if( typeof PagesListArray[pageTag] == \'undefined\' || PagesListArray[pageTag] == "" )' . "\r\n" . '   {' . "\r\n" . '       if( arrow == 1 )' . "\r\n" . '	   {' . "\r\n" . '		  return isSkipPage(pageTag+1,1);' . "\r\n" . '	   }' . "\r\n" . '	   else' . "\r\n" . '	   {' . "\r\n" . '		  return isSkipPage(pageTag-1,2);' . "\r\n" . '       }' . "\r\n" . '   }' . "\r\n" . '   else' . "\r\n" . '   {' . "\r\n" . '	    var thisPageQtnList = PagesListArray[pageTag].toString().split(\',\');' . "\r\n" . '		//取出本页中逻辑关系所有问题' . "\r\n" . '		var haveConQtnIDArray = [];' . "\r\n" . '		for( var qtnID in CondListArray )' . "\r\n" . '		{' . "\r\n" . '		    if( in_array(qtnID,thisPageQtnList) )' . "\r\n" . '			{' . "\r\n" . '				haveConQtnIDArray.push(qtnID);' . "\r\n" . '			}' . "\r\n" . '		}' . "\r\n" . '' . "\r\n" . '		//查本页的掩蔽题型' . "\r\n" . '		var theMaskQtnList = [];' . "\r\n" . '		var maskingQtnType = new Array(17,19,20,21,22,28,29);' . "\r\n" . '		for( var tmp in thisPageQtnList )' . "\r\n" . '		{' . "\r\n" . '			var theQtnId = thisPageQtnList[tmp];' . "\r\n" . '			if( !in_array(QtnListArray[theQtnId].questionType,maskingQtnType )) continue;' . "\r\n" . '			if( QtnListArray[theQtnId].isNeg == 1 ) continue;' . "\r\n" . '			var thisBaseID = QtnListArray[theQtnId].baseID;' . "\r\n" . '			if( QtnListArray[thisBaseID].questionType != 3 ) continue;' . "\r\n" . '			if( count(dataRow.rows) != 0 )' . "\r\n" . '			{' . "\r\n" . '				if( dataRow.rows[0][dataIndex[\'option_\'+thisBaseID]] != \'\' && ! IsCheckBoxSelect(\'99999\',thisBaseID) )  continue;' . "\r\n" . '			}' . "\r\n" . '			theMaskQtnList.push(theQtnId);' . "\r\n" . '		}' . "\r\n" . '' . "\r\n" . '	    //遍历的问卷页没有逻辑关系' . "\r\n" . '		if( count(haveConQtnIDArray) == 0 || haveConQtnIDArray == \'\' )' . "\r\n" . '		{' . "\r\n" . '			 var haveNoMaskQtn = array_diff(thisPageQtnList,theMaskQtnList);' . "\r\n" . '			 if( count(haveNoMaskQtn) != 0 && haveNoMaskQtn != \'\' )' . "\r\n" . '			 {' . "\r\n" . '				  return pageTag;' . "\r\n" . '			 }' . "\r\n" . '			 else' . "\r\n" . '			 {' . "\r\n" . '			      if( arrow == 1 )' . "\r\n" . '				  {' . "\r\n" . '					   return isSkipPage(pageTag+1,1);' . "\r\n" . '				  }' . "\r\n" . '				  else' . "\r\n" . '				  {' . "\r\n" . '				       return isSkipPage(pageTag-1,2);' . "\r\n" . '			      }' . "\r\n" . '			 }	' . "\r\n" . '		}' . "\r\n" . '		else' . "\r\n" . '		{' . "\r\n" . '			 //问卷页中尚有无逻辑关系的问题' . "\r\n" . '			 var haveNoCondQtn = array_diff(thisPageQtnList,haveConQtnIDArray);' . "\r\n" . '			 var isMaskSkip = true;' . "\r\n" . '			 var haveNoMaskQtn = array_diff(haveNoCondQtn,theMaskQtnList);' . "\r\n" . '			 if( count(haveNoMaskQtn) != 0 && haveNoMaskQtn != \'\') isMaskSkip = false;' . "\r\n" . '			 //遍历有逻辑关系的问题' . "\r\n" . '		     var isSkipPageTag = true;' . "\r\n" . '			 for( var tmp in haveConQtnIDArray )' . "\r\n" . '			 {' . "\r\n" . '				 var haveConQtnID = haveConQtnIDArray[tmp];' . "\r\n" . '				 var ConSuccFlag = GetQtnConSucc(haveConQtnID);' . "\r\n" . '				 //该问题的逻辑条件成立，需展现该问题' . "\r\n" . '				 if( eval(ConSuccFlag) )' . "\r\n" . '			     {' . "\r\n" . '				       isSkipPageTag = false;' . "\r\n" . '					   break;   //跳出循环' . "\r\n" . '				 }' . "\r\n" . '			  }' . "\r\n" . '' . "\r\n" . '			  //所有的逻辑关系不成立' . "\r\n" . '			  if( isSkipPageTag == true && isMaskSkip == true )' . "\r\n" . '			  {' . "\r\n" . '			      if( arrow == 1 )' . "\r\n" . '				  {' . "\r\n" . '					   return isSkipPage(pageTag+1,1);' . "\r\n" . '				  }' . "\r\n" . '				  else' . "\r\n" . '				  {' . "\r\n" . '				       return isSkipPage(pageTag-1,2);' . "\r\n" . '			      }' . "\r\n" . '			   }' . "\r\n" . '		       else' . "\r\n" . '			   {' . "\r\n" . '				   return pageTag;' . "\r\n" . '			   }				' . "\r\n" . '		 } //遍历的问卷页没有逻辑关系' . "\r\n" . '	}//遍历的问卷页没有问题' . "\r\n" . '}' . "\r\n" . '' . "\r\n" . 'function IsCheckBoxSelect(checkID,qtnID)' . "\r\n" . '{' . "\r\n" . '	if( count(dataRow.rows) != 0 )' . "\r\n" . '	{' . "\r\n" . '		if( dataRow.rows[0][dataIndex[\'option_\'+qtnID]] != \'\' )' . "\r\n" . '		{' . "\r\n" . '			var nowValueArray = dataRow.rows[0][dataIndex[\'option_\'+qtnID]].split(\',\');' . "\r\n" . '			if( in_array(checkID,nowValueArray) )' . "\r\n" . '			{' . "\r\n" . '				return 1;' . "\r\n" . '			}' . "\r\n" . '			else' . "\r\n" . '			{' . "\r\n" . '				return 0;' . "\r\n" . '			}' . "\r\n" . '		}' . "\r\n" . '		else' . "\r\n" . '		{' . "\r\n" . '			return 0;' . "\r\n" . '		}' . "\r\n" . '	}' . "\r\n" . '	else' . "\r\n" . '	{' . "\r\n" . '		return 0;' . "\r\n" . '	}' . "\r\n" . '}' . "\r\n" . '' . "\r\n" . 'function isRadioSelect(checkID,qtnID )' . "\r\n" . '{' . "\r\n" . '	if( count(dataRow.rows) != 0 )' . "\r\n" . '	{' . "\r\n" . '		if(qtnID.toString().indexOf(\'_\') != -1 ) //矩阵问题' . "\r\n" . '		{' . "\r\n" . '			if( dataRow.rows[0][dataIndex[\'option_\'+qtnID]].toString() == checkID.toString() )' . "\r\n" . '			{' . "\r\n" . '			   return 1;' . "\r\n" . '			}' . "\r\n" . '			else' . "\r\n" . '			{' . "\r\n" . '			   return 0;' . "\r\n" . '			}' . "\r\n" . '		}' . "\r\n" . '		else' . "\r\n" . '		{' . "\r\n" . '			switch(QtnListArray[qtnID].questionType )' . "\r\n" . '			{' . "\r\n" . '				case 2: //Radio					' . "\r\n" . '					if( checkID == \'0\' ) //Other' . "\r\n" . '					{' . "\r\n" . '						if( dataRow.rows[0][dataIndex[\'option_\'+qtnID]].toString() == checkID.toString() && dataRow.rows[0][dataIndex[\'TextOtherValue_\'+qtnID]] != \'\' )' . "\r\n" . '						{' . "\r\n" . '						   return 1;' . "\r\n" . '						}' . "\r\n" . '						else' . "\r\n" . '						{' . "\r\n" . '						   return 0;' . "\r\n" . '						}' . "\r\n" . '					}' . "\r\n" . '					else' . "\r\n" . '					{' . "\r\n" . '						if( dataRow.rows[0][dataIndex[\'option_\'+qtnID]].toString() == checkID.toString() )' . "\r\n" . '						{' . "\r\n" . '						   return 1;' . "\r\n" . '						}' . "\r\n" . '						else' . "\r\n" . '						{' . "\r\n" . '						   return 0;' . "\r\n" . '						}' . "\r\n" . '					}' . "\r\n" . '				break;' . "\r\n" . '				default:' . "\r\n" . '					if( dataRow.rows[0][dataIndex[\'option_\'+qtnID]].toString() == checkID.toString() )' . "\r\n" . '					{' . "\r\n" . '					   return 1;' . "\r\n" . '					}' . "\r\n" . '					else' . "\r\n" . '					{' . "\r\n" . '					   return 0;' . "\r\n" . '					}' . "\r\n" . '				break;' . "\r\n" . '			}' . "\r\n" . '		}' . "\r\n" . '	}' . "\r\n" . '	else' . "\r\n" . '	{' . "\r\n" . '		return 0;' . "\r\n" . '	}' . "\r\n" . '}' . "\r\n" . '' . "\r\n" . 'function isRadioUnSelect(checkID,qtnID )' . "\r\n" . '{' . "\r\n" . '	if( count(dataRow.rows) != 0 )' . "\r\n" . '	{' . "\r\n" . '		if( dataRow.rows[0][dataIndex[\'option_\'+qtnID]].toString() != checkID.toString() )' . "\r\n" . '		{' . "\r\n" . '		   return 1;' . "\r\n" . '		}' . "\r\n" . '		else' . "\r\n" . '		{' . "\r\n" . '		   return 0;' . "\r\n" . '		}' . "\r\n" . '	}' . "\r\n" . '	else' . "\r\n" . '	{' . "\r\n" . '		return 0;' . "\r\n" . '	}' . "\r\n" . '}' . "\r\n" . '' . "\r\n" . 'function IsCheckBoxUnSelect(checkID,qtnID)' . "\r\n" . '{' . "\r\n" . '	if( count(dataRow.rows) != 0 )' . "\r\n" . '	{' . "\r\n" . '		if( dataRow.rows[0][dataIndex[\'option_\'+qtnID]] != \'\' )' . "\r\n" . '		{' . "\r\n" . '			var nowValueArray = dataRow.rows[0][dataIndex[\'option_\'+qtnID]].split(\',\');' . "\r\n" . '			if( in_array(checkID,nowValueArray) )' . "\r\n" . '			{' . "\r\n" . '				return 0;' . "\r\n" . '			}' . "\r\n" . '			else' . "\r\n" . '			{' . "\r\n" . '				return 1;' . "\r\n" . '			}' . "\r\n" . '		}' . "\r\n" . '		else' . "\r\n" . '		{' . "\r\n" . '			return 1;' . "\r\n" . '		}' . "\r\n" . '	}' . "\r\n" . '	else' . "\r\n" . '	{' . "\r\n" . '		return 0;' . "\r\n" . '	}' . "\r\n" . '}' . "\r\n" . '' . "\r\n" . 'function IsGetCheckBoxSelNum(filedName,opertion,checkID )' . "\r\n" . '{' . "\r\n" . '	if( count(dataRow.rows) != 0 )' . "\r\n" . '	{' . "\r\n" . '		if( dataRow.rows[0][dataIndex[filedName]] == \'\' )  return 0;' . "\r\n" . '		if( eval(dataRow.rows[0][dataIndex[filedName]].split(\',\').length+opertion+checkID ) )' . "\r\n" . '		{' . "\r\n" . '			return 1;' . "\r\n" . '		}' . "\r\n" . '		else' . "\r\n" . '		{' . "\r\n" . '			return 0;' . "\r\n" . '		}' . "\r\n" . '	}' . "\r\n" . '	else' . "\r\n" . '	{' . "\r\n" . '		return 0 ;' . "\r\n" . '	}' . "\r\n" . '}' . "\r\n" . '' . "\r\n" . 'function isNumberTextLogicTrue(filedName,opertion,checkID,weight,isSkipUnkown,nullType )' . "\r\n" . '{' . "\r\n" . '	if( count(dataRow.rows) != 0 )' . "\r\n" . '	{' . "\r\n" . '		if( nullType == 1 ) //数值(组合)填空' . "\r\n" . '		{' . "\r\n" . '			if( dataRow.rows[0][dataIndex[filedName]] == \'\' )  return 0;' . "\r\n" . '		}' . "\r\n" . '		else' . "\r\n" . '		{' . "\r\n" . '			if( dataRow.rows[0][dataIndex[filedName]] == \'\' || dataRow.rows[0][dataIndex[filedName]] == \'0\' )  return 0;' . "\r\n" . '		}' . "\r\n" . '		if( isSkipUnkown == 1 && dataRow.rows[0][dataIndex[filedName]] == \'99\' )  return 0;' . "\r\n" . '		var theValue = dataRow.rows[0][dataIndex[filedName]] * weight;' . "\r\n" . '		if( eval(theValue+opertion+checkID ) ) ' . "\r\n" . '		{' . "\r\n" . '			return 1;' . "\r\n" . '		}' . "\r\n" . '		else' . "\r\n" . '		{' . "\r\n" . '			return 0;' . "\r\n" . '		}' . "\r\n" . '	}' . "\r\n" . '	else' . "\r\n" . '	{' . "\r\n" . '		return 0 ;' . "\r\n" . '	}' . "\r\n" . '}' . "\r\n" . '' . "\r\n" . '//得到对应问题逻辑关系是否成立的逻辑表达式' . "\r\n" . 'function GetQtnConSucc(theQtnID)' . "\r\n" . '{' . "\r\n" . '	//逻辑关系' . "\r\n" . '	var j = 0;' . "\r\n" . '	var conList = \'\';' . "\r\n" . '	if( typeof CondListArray[theQtnID] == \'undefined\') return conList;' . "\r\n" . '	for( var condOnID in CondListArray[theQtnID] )' . "\r\n" . '	{' . "\r\n" . '		var theCondOnIDArray = CondListArray[theQtnID][condOnID];' . "\r\n" . '		var condOnID_QuestionType = QtnListArray[condOnID].questionType;' . "\r\n" . '		switch(condOnID_QuestionType)' . "\r\n" . '		{' . "\r\n" . '			case 1: //YesNo' . "\r\n" . '			case 2: //Radio' . "\r\n" . '			case 3: //CheckBox' . "\r\n" . '			case 4: //Text' . "\r\n" . '			case 24: //CombRadio' . "\r\n" . '			case 25: //CombCheckBox' . "\r\n" . '			case 30: //Empty' . "\r\n" . '			case 17: //Auto' . "\r\n" . '				var Con_Total = count(theCondOnIDArray[0]); //qtnID=0' . "\r\n" . '				var i = 0;' . "\r\n" . '				if( Con_Total >= 2 )  conList += \'(\';' . "\r\n" . '				for( var tmp in theCondOnIDArray[0] )' . "\r\n" . '				{' . "\r\n" . '					var theOptionArray = theCondOnIDArray[0][tmp];' . "\r\n" . '					i++;' . "\r\n" . '					if( condOnID_QuestionType == 4 )  //数值填空' . "\r\n" . '					{' . "\r\n" . '						switch(theOptionArray[1])' . "\r\n" . '						{' . "\r\n" . '							case 1:opertion = \'==\';break;' . "\r\n" . '							case 2:opertion = \'<\';break;' . "\r\n" . '							case 3:opertion = \'<=\';break;' . "\r\n" . '							case 4:opertion = \'>\';break;' . "\r\n" . '							case 5:opertion = \'>=\';break;' . "\r\n" . '							case 6:opertion = \'!=\';break;' . "\r\n" . '						}' . "\r\n" . '						if( i == Con_Total) opertionRelation = \'\';' . "\r\n" . '						else opertionRelation = \' && \';' . "\r\n" . '						conList += isNumberTextLogicTrue(\'option_\'+condOnID,opertion,theOptionArray[0],1,0,1)+opertionRelation;' . "\r\n" . '					}' . "\r\n" . '					else' . "\r\n" . '					{' . "\r\n" . '						if( i == Con_Total) opertionRelation = \'\';' . "\r\n" . '						else{' . "\r\n" . '							if( parseInt(theOptionArray[2]) == 1 ) opertionRelation = \' && \';' . "\r\n" . '							else opertionRelation = \' || \';' . "\r\n" . '						}' . "\r\n" . '						switch( condOnID_QuestionType )' . "\r\n" . '						{' . "\r\n" . '							case 1: //是非题' . "\r\n" . '							case 2:  //单选题' . "\r\n" . '							case 24:  //复合单选' . "\r\n" . '								if( theOptionArray[1] == 1 )' . "\r\n" . '								{' . "\r\n" . '									conList += isRadioSelect(theOptionArray[0],condOnID)+opertionRelation;' . "\r\n" . '								}' . "\r\n" . '								else' . "\r\n" . '								{' . "\r\n" . '									conList += isRadioUnSelect(theOptionArray[0],condOnID)+opertionRelation;' . "\r\n" . '								}' . "\r\n" . '							break;' . "\r\n" . '							case 3:  //复选题	' . "\r\n" . '							case 25: //复合多选' . "\r\n" . '								if( theOptionArray[3] == 2 )  //计算模式' . "\r\n" . '								{' . "\r\n" . '									switch(theOptionArray[1])' . "\r\n" . '									{' . "\r\n" . '										case 1:opertion = \'==\';break;' . "\r\n" . '										case 2:opertion = \'<\';break;' . "\r\n" . '										case 3:opertion = \'<=\';break;' . "\r\n" . '										case 4:opertion = \'>\';break;' . "\r\n" . '										case 5:opertion = \'>=\';break;' . "\r\n" . '										case 6:opertion = \'!=\';break;' . "\r\n" . '									}' . "\r\n" . '									if( i == Con_Total) opertionRelation = \'\';' . "\r\n" . '									else opertionRelation = \' && \';' . "\r\n" . '									conList += IsGetCheckBoxSelNum(\'option_\'+condOnID,opertion,theOptionArray[0])+opertionRelation;' . "\r\n" . '' . "\r\n" . '								}' . "\r\n" . '								else' . "\r\n" . '								{' . "\r\n" . '									if( theOptionArray[1] == 1 )' . "\r\n" . '									{' . "\r\n" . '										conList += IsCheckBoxSelect(theOptionArray[0],condOnID)+opertionRelation;' . "\r\n" . '									}' . "\r\n" . '									else' . "\r\n" . '									{' . "\r\n" . '										conList += IsCheckBoxUnSelect(theOptionArray[0],condOnID)+opertionRelation;' . "\r\n" . '									}' . "\r\n" . '								}' . "\r\n" . '							break;' . "\r\n" . '							case 17:' . "\r\n" . '								if(QtnListArray[condOnID].isSelect == 1 ) //单选' . "\r\n" . '								{' . "\r\n" . '									if( theOptionArray[1] == 1 )' . "\r\n" . '									{' . "\r\n" . '										conList += isRadioSelect(theOptionArray[0],condOnID)+opertionRelation;' . "\r\n" . '									}' . "\r\n" . '									else' . "\r\n" . '									{' . "\r\n" . '										conList += isRadioUnSelect(theOptionArray[0],condOnID)+opertionRelation;' . "\r\n" . '									}' . "\r\n" . '								}' . "\r\n" . '								else' . "\r\n" . '								{' . "\r\n" . '									if( theOptionArray[1] == 1 )' . "\r\n" . '									{' . "\r\n" . '										conList += IsCheckBoxSelect(theOptionArray[0],condOnID)+opertionRelation;' . "\r\n" . '									}' . "\r\n" . '									else' . "\r\n" . '									{' . "\r\n" . '										conList += IsCheckBoxUnSelect(theOptionArray[0],condOnID)+opertionRelation;' . "\r\n" . '									}' . "\r\n" . '								}' . "\r\n" . '							break;' . "\r\n" . '							case 30:' . "\r\n" . '								if( theOptionArray[1] == 1 )' . "\r\n" . '								{' . "\r\n" . '									if( theOptionArray[0] == 1 )' . "\r\n" . '									{' . "\r\n" . '										conList += isRadioSelect(\'1\',condOnID)+opertionRelation;' . "\r\n" . '									}' . "\r\n" . '									else' . "\r\n" . '									{' . "\r\n" . '										conList += isRadioSelect(\'0\',condOnID)+opertionRelation;' . "\r\n" . '									}' . "\r\n" . '								}' . "\r\n" . '								else' . "\r\n" . '								{' . "\r\n" . '									if( theOptionArray[0] == 1 )' . "\r\n" . '									{' . "\r\n" . '										conList += isRadioUnSelect(\'1\',condOnID)+opertionRelation;' . "\r\n" . '									}' . "\r\n" . '									else' . "\r\n" . '									{' . "\r\n" . '										conList += isRadioUnSelect(\'0\',condOnID)+opertionRelation;' . "\r\n" . '									}' . "\r\n" . '								}' . "\r\n" . '							break;' . "\r\n" . '						} //end of switch' . "\r\n" . '					} //end of if' . "\r\n" . '				} //end of foreach' . "\r\n" . '				if( Con_Total >= 2 )	conList += \')\';' . "\r\n" . '			break;' . "\r\n" . '			case 6:  //Range' . "\r\n" . '			case 7:  //Multiple' . "\r\n" . '			case 19: //AutoRange' . "\r\n" . '			case 28: //AutoMultiple' . "\r\n" . '			case 23: //CombText' . "\r\n" . '			case 10: //Rank' . "\r\n" . '			case 15: //Rating' . "\r\n" . '			case 16: //Weight' . "\r\n" . '			case 20: //AutoRank' . "\r\n" . '			case 21: //AutoRating' . "\r\n" . '			case 22: //AutoWeight' . "\r\n" . '			case 31: //级联' . "\r\n" . '				var RangeTotal = count(theCondOnIDArray); ' . "\r\n" . '				var k = 0;' . "\r\n" . '				if( RangeTotal >= 2 )  conList += \'(\';' . "\r\n" . '				for( var qtnID in theCondOnIDArray )' . "\r\n" . '				{' . "\r\n" . '					var theRangeArray = theCondOnIDArray[qtnID];' . "\r\n" . '					i = 0;' . "\r\n" . '					var Con_Total = count(theRangeArray);' . "\r\n" . '					if( Con_Total >= 2 )  conList += \'(\';' . "\r\n" . '					for(var tmp in theRangeArray )' . "\r\n" . '					{' . "\r\n" . '						var theOptionArray = theRangeArray[tmp];' . "\r\n" . '						i++;' . "\r\n" . '						switch( condOnID_QuestionType )' . "\r\n" . '						{' . "\r\n" . '							case 23:' . "\r\n" . '								switch(theOptionArray[1])' . "\r\n" . '								{' . "\r\n" . '									case 1:opertion = \'==\';break;' . "\r\n" . '									case 2:opertion = \'<\';break;' . "\r\n" . '									case 3:opertion = \'<=\';break;' . "\r\n" . '									case 4:opertion = \'>\';break;' . "\r\n" . '									case 5:opertion = \'>=\';break;' . "\r\n" . '									case 6:opertion = \'!=\';break;' . "\r\n" . '								}' . "\r\n" . '								if( i == Con_Total) opertionRelation = \'\';' . "\r\n" . '								else opertionRelation = \' && \';' . "\r\n" . '								conList += isNumberTextLogicTrue(\'option_\'+condOnID+\'_\'+qtnID,opertion,theOptionArray[0],1,0,1)+opertionRelation;' . "\r\n" . '							break;' . "\r\n" . '							case 10:' . "\r\n" . '							case 16:' . "\r\n" . '							case 20:' . "\r\n" . '							case 22:' . "\r\n" . '								switch(theOptionArray[1])' . "\r\n" . '								{' . "\r\n" . '									case 1:opertion = \'==\';break;' . "\r\n" . '									case 2:opertion = \'<\';break;' . "\r\n" . '									case 3:opertion = \'<=\';break;' . "\r\n" . '									case 4:opertion = \'>\';break;' . "\r\n" . '									case 5:opertion = \'>=\';break;' . "\r\n" . '									case 6:opertion = \'!=\';break;' . "\r\n" . '								}' . "\r\n" . '								if( i == Con_Total) opertionRelation = \'\';' . "\r\n" . '								else opertionRelation = \' && \';' . "\r\n" . '								conList += isNumberTextLogicTrue(\'option_\'+condOnID+\'_\'+qtnID,opertion,theOptionArray[0],1,0,2)+opertionRelation;' . "\r\n" . '							break;' . "\r\n" . '							case 15:' . "\r\n" . '							case 21:' . "\r\n" . '								switch(theOptionArray[1])' . "\r\n" . '								{' . "\r\n" . '									case 1:opertion = \'==\';break;' . "\r\n" . '									case 2:opertion = \'<\';break;' . "\r\n" . '									case 3:opertion = \'<=\';break;' . "\r\n" . '									case 4:opertion = \'>\';break;' . "\r\n" . '									case 5:opertion = \'>=\';break;' . "\r\n" . '									case 6:opertion = \'!=\';break;' . "\r\n" . '								}' . "\r\n" . '								if( i == Con_Total) opertionRelation = \'\';' . "\r\n" . '								else opertionRelation = \' && \';' . "\r\n" . '								switch( QtnListArray[condOnID].isSelect )' . "\r\n" . '								{' . "\r\n" . '									case 0:' . "\r\n" . '										conList += isNumberTextLogicTrue(\'option_\'+condOnID+\'_\'+qtnID,opertion,theOptionArray[0],QtnListArray[condOnID].weight,1,2)+opertionRelation;' . "\r\n" . '									break;' . "\r\n" . '									case 1:' . "\r\n" . '									case 2:' . "\r\n" . '										conList += isNumberTextLogicTrue(\'option_\'+condOnID+\'_\'+qtnID,opertion,theOptionArray[0],1,0,2)+opertionRelation;' . "\r\n" . '									break;' . "\r\n" . '								}' . "\r\n" . '							break;' . "\r\n" . '							case 6:' . "\r\n" . '							case 19:' . "\r\n" . '							case 31:' . "\r\n" . '								if( i == Con_Total) opertionRelation = \'\';' . "\r\n" . '								else{' . "\r\n" . '									if( parseInt(theOptionArray[2]) == 1 ) opertionRelation = \' && \';' . "\r\n" . '									else opertionRelation = \' || \';' . "\r\n" . '								}' . "\r\n" . '								if( theOptionArray[1] == 1 )' . "\r\n" . '								{' . "\r\n" . '									conList += isRadioSelect(theOptionArray[0],condOnID+\'_\'+qtnID)+opertionRelation;	' . "\r\n" . '								}' . "\r\n" . '								else' . "\r\n" . '								{' . "\r\n" . '									conList += isRadioUnSelect(theOptionArray[0],condOnID+\'_\'+qtnID)+opertionRelation;' . "\r\n" . '								}' . "\r\n" . '							break;' . "\r\n" . '							case 7:' . "\r\n" . '							case 28:' . "\r\n" . '								if( i == Con_Total) opertionRelation = \'\';' . "\r\n" . '								else{' . "\r\n" . '									if( parseInt(theOptionArray[2]) == 1 ) opertionRelation = \' && \';' . "\r\n" . '									else opertionRelation = \' || \';' . "\r\n" . '								}' . "\r\n" . '								if( theOptionArray[1] == 1 )' . "\r\n" . '								{' . "\r\n" . '									conList += IsCheckBoxSelect(theOptionArray[0],condOnID+\'_\'+qtnID)+opertionRelation;' . "\r\n" . '								}' . "\r\n" . '								else' . "\r\n" . '								{' . "\r\n" . '									conList += IsCheckBoxUnSelect(theOptionArray[0],condOnID+\'_\'+qtnID)+opertionRelation;' . "\r\n" . '								}' . "\r\n" . '							break;' . "\r\n" . '						} //end of switch' . "\r\n" . '					}//end of foreach' . "\r\n" . '					if( Con_Total >= 2 )  conList += \')\';					' . "\r\n" . '					k++;' . "\r\n" . '					if( k != RangeTotal )' . "\r\n" . '					{' . "\r\n" . '						if( QtnListArray[theQtnID].isLogicAnd == 1) { conList += \' && \'; }' . "\r\n" . '						else { conList += \' || \'; }' . "\r\n" . '					}' . "\r\n" . '				}//end of foreach' . "\r\n" . '				if( RangeTotal >= 2 )  conList += \')\';' . "\r\n" . '			break;' . "\r\n" . '		} //end of switch' . "\r\n" . '		' . "\r\n" . '		j ++;' . "\r\n" . '		if( j != count(CondListArray[theQtnID]))' . "\r\n" . '		{' . "\r\n" . '			if( QtnListArray[theQtnID].isLogicAnd == 1) { conList += \' && \'; }' . "\r\n" . '			else { conList += \' || \'; }' . "\r\n" . '		}' . "\r\n" . '	} //end of foreach' . "\r\n" . '' . "\r\n" . '	return conList;' . "\r\n" . '}' . "\r\n" . '' . "\r\n" . 'function array_diff (arr1) {' . "\r\n" . '    var retArr = {},' . "\r\n" . '        argl = arguments.length,' . "\r\n" . '        k1 = \'\',' . "\r\n" . '        i = 1,' . "\r\n" . '        k = \'\',' . "\r\n" . '        arr = {};' . "\r\n" . ' ' . "\r\n" . '    arr1keys: for (k1 in arr1) {' . "\r\n" . '        for (i = 1; i < argl; i++) {' . "\r\n" . '            arr = arguments[i];' . "\r\n" . '            for (k in arr) {' . "\r\n" . '                if (arr[k] === arr1[k1]) {' . "\r\n" . '                    // If it reaches here, it was found in at least one array, so try next value' . "\r\n" . '                    continue arr1keys;' . "\r\n" . '                }' . "\r\n" . '            }' . "\r\n" . '            retArr[k1] = arr1[k1];' . "\r\n" . '        }' . "\r\n" . '    }' . "\r\n" . ' ' . "\r\n" . '    return retArr;' . "\r\n" . '}' . "\r\n" . '' . "\r\n" . 'function qShowQtnName(qtnName,qtnID,inType)' . "\r\n" . '{' . "\r\n" . '	var reg = /\\[Answer_[^\\]]*\\]/ig;' . "\r\n" . '	var Matches = qtnName.match(reg);' . "\r\n" . '	if ( Matches != null )' . "\r\n" . '	{' . "\r\n" . '		var theQtnName = qtnName;' . "\r\n" . '		for( var tmp in Matches )' . "\r\n" . '		{' . "\r\n" . '			var Value = Matches[tmp];' . "\r\n" . '			var theBaseString = Value.replace(\'[\',\'\').replace(\']\',\'\');' . "\r\n" . '			var theQtnArray = theBaseString.split(\'_\');' . "\r\n" . '			var theQtnID = theQtnArray[1];' . "\r\n" . '			var theQtnType = new Array(2,3,4,17,18,23,24,25);' . "\r\n" . '			if( typeof QtnListArray[theQtnID] == \'undefined\' )' . "\r\n" . '			{' . "\r\n" . '				theQtnName = str_replace(Value,\'\',theQtnName);' . "\r\n" . '			}' . "\r\n" . '			else if( !in_array(QtnListArray[theQtnID].questionType,theQtnType) )   //不是正确的题型' . "\r\n" . '			{' . "\r\n" . '				theQtnName = str_replace(Value,\'\',theQtnName);' . "\r\n" . '			}' . "\r\n" . '			else' . "\r\n" . '			{' . "\r\n" . '				switch(inType)' . "\r\n" . '				{' . "\r\n" . '					case 1:' . "\r\n" . '						var nodeName = \'node_\';' . "\r\n" . '					break;' . "\r\n" . '					case 2:' . "\r\n" . '						var nodeName = \'tips_\';' . "\r\n" . '					break;' . "\r\n" . '				}' . "\r\n" . '				if( IsSamePage(theQtnID,qtnID) )  //同页' . "\r\n" . '				{' . "\r\n" . '					switch(QtnListArray[theQtnID].questionType)' . "\r\n" . '					{' . "\r\n" . '						case 2:' . "\r\n" . '							if( count(theQtnArray) == 2 )' . "\r\n" . '							{' . "\r\n" . '								if( QtnListArray[theQtnID].isSelect == 1 )  //下拉' . "\r\n" . '								{' . "\r\n" . '									check_survey_conditions_list += "\\tgetSelectOptionText(\'option_"+theQtnID+"\',"+theQtnID+","+qtnID+","+inType+");\\n";' . "\r\n" . '								}' . "\r\n" . '								else' . "\r\n" . '								{' . "\r\n" . '									check_survey_conditions_list += "\\tgetRadioOptionText(\'option_"+theQtnID+"\',"+theQtnID+","+qtnID+","+QtnListArray[theQtnID].questionType+","+inType+");\\n";' . "\r\n" . '								}' . "\r\n" . '								theQtnName = str_replace(Value,\'<span class=\'+nodeName+qtnID+\'_\'+theQtnID+\'></span>\',theQtnName);' . "\r\n" . '							}' . "\r\n" . '							else' . "\r\n" . '							{' . "\r\n" . '								if( theQtnArray[2] != 0 )' . "\r\n" . '								{' . "\r\n" . '									theQtnName = str_replace(Value,\'\',theQtnName);' . "\r\n" . '								}' . "\r\n" . '								else' . "\r\n" . '								{' . "\r\n" . '									check_survey_conditions_list += "\\tgetRangeInputTextValue(\'TextOtherValue_"+theQtnID+"\',"+theQtnID+","+qtnID+",0,"+inType+");\\n";' . "\r\n" . '									theQtnName = str_replace(Value,\'<span class=\'+nodeName+qtnID+\'_\'+theQtnID+\'_0></span>\',theQtnName);' . "\r\n" . '								}' . "\r\n" . '							}' . "\r\n" . '						break;' . "\r\n" . '						case 3:' . "\r\n" . '							if( count(theQtnArray) != 3 )' . "\r\n" . '							{' . "\r\n" . '								theQtnName = str_replace(Value,\'\',theQtnName);' . "\r\n" . '							}' . "\r\n" . '							else' . "\r\n" . '							{' . "\r\n" . '								if( theQtnArray[2] != 0 )' . "\r\n" . '								{' . "\r\n" . '									theQtnName = str_replace(Value,\'\',theQtnName);' . "\r\n" . '								}' . "\r\n" . '								else' . "\r\n" . '								{' . "\r\n" . '									check_survey_conditions_list += "\\tgetRangeInputTextValue(\'TextOtherValue_"+theQtnID+"\',"+theQtnID+","+qtnID+",0,"+inType+");\\n";' . "\r\n" . '									theQtnName = str_replace(Value,\'<span class=\'+nodeName+qtnID+\'_\'+theQtnID+\'_0></span>\',theQtnName);' . "\r\n" . '								}' . "\r\n" . '							}' . "\r\n" . '						break;' . "\r\n" . '						case 24: //复合单选' . "\r\n" . '							if( count(theQtnArray) == 2 )' . "\r\n" . '							{' . "\r\n" . '								check_survey_conditions_list += "\\tgetRadioOptionText(\'option_"+theQtnID+"\',"+theQtnID+","+qtnID+","+QtnListArray[theQtnID].questionType+","+inType+");\\n";' . "\r\n" . '								theQtnName = str_replace(Value,\'<span class=\'+nodeName+qtnID+\'_\'+theQtnID+\'></span>\',theQtnName);' . "\r\n" . '							}' . "\r\n" . '							else' . "\r\n" . '							{' . "\r\n" . '								if( typeof RadioListArray[theQtnID][theQtnArray[2]] == \'undefined\' ||  RadioListArray[theQtnID][theQtnArray[2]].isHaveText != 1 )' . "\r\n" . '								{' . "\r\n" . '									theQtnName = str_replace(Value,\'\',theQtnName);' . "\r\n" . '								}' . "\r\n" . '								else' . "\r\n" . '								{' . "\r\n" . '									check_survey_conditions_list += "\\tgetRangeInputTextValue(\'TextOtherValue_"+theQtnID+"_"+theQtnArray[2]+"\',"+theQtnID+","+qtnID+","+theQtnArray[2]+","+inType+");\\n";' . "\r\n" . '									theQtnName = str_replace(Value,\'<span class=\'+nodeName+qtnID+\'_\'+theQtnID+\'_\'+theQtnArray[2]+\'></span>\',theQtnName);' . "\r\n" . '								}' . "\r\n" . '							}' . "\r\n" . '						break;' . "\r\n" . '						case 23:  //CombText' . "\r\n" . '							if( count(theQtnArray) != 3 )' . "\r\n" . '							{' . "\r\n" . '								theQtnName = str_replace(Value,\'\',theQtnName);' . "\r\n" . '							}' . "\r\n" . '							else' . "\r\n" . '							{' . "\r\n" . '								if( typeof YesNoListArray[theQtnID][theQtnArray[2]] == \'undefined\' )' . "\r\n" . '								{' . "\r\n" . '									theQtnName = str_replace(Value,\'\',theQtnName);' . "\r\n" . '								}' . "\r\n" . '								else' . "\r\n" . '								{' . "\r\n" . '									check_survey_conditions_list += "\\tgetRangeInputTextValue(\'option_"+theQtnID+"_"+theQtnArray[2]+"\',"+theQtnID+","+qtnID+","+theQtnArray[2]+","+inType+");\\n";' . "\r\n" . '									theQtnName = str_replace(Value,\'<span class=\'+nodeName+qtnID+\'_\'+theQtnID+\'_\'+theQtnArray[2]+\'></span>\',theQtnName);' . "\r\n" . '								}' . "\r\n" . '							}' . "\r\n" . '						break;' . "\r\n" . '						case 25:  //CombCheckBox' . "\r\n" . '							if( count(theQtnArray) != 3 )' . "\r\n" . '							{' . "\r\n" . '								theQtnName = str_replace(Value,\'\',theQtnName);' . "\r\n" . '							}' . "\r\n" . '							else' . "\r\n" . '							{' . "\r\n" . '								if( typeof CheckBoxListArray[theQtnID][theQtnArray[2]] == \'undefined\' || CheckBoxListArray[theQtnID][theQtnArray[2]].isHaveText != 1 )' . "\r\n" . '								{' . "\r\n" . '									theQtnName = str_replace(Value,\'\',theQtnName);' . "\r\n" . '								}' . "\r\n" . '								else' . "\r\n" . '								{' . "\r\n" . '									check_survey_conditions_list += "\\tgetRangeInputTextValue(\'TextOtherValue_"+theQtnID+"_"+theQtnArray[2]+"\',"+theQtnID+","+qtnID+","+theQtnArray[2]+","+inType+");\\n";' . "\r\n" . '									theQtnName = str_replace(Value,\'<span class=\'+nodeName+qtnID+\'_\'+theQtnID+\'_\'+theQtnArray[2]+\'></span>\',theQtnName);' . "\r\n" . '								}' . "\r\n" . '							}' . "\r\n" . '						break;' . "\r\n" . '						case 17: //Auto' . "\r\n" . '						    if( QtnListArray[theQtnID].isSelect != 1 )  //多选' . "\r\n" . '							{' . "\r\n" . '								theQtnName = str_replace(Value,\'\',theQtnName);' . "\r\n" . '							}' . "\r\n" . '							else' . "\r\n" . '							{' . "\r\n" . '								check_survey_conditions_list += "\\tgetAutoOptionText(\'option_"+theQtnID+"\',"+theQtnID+","+qtnID+","+inType+");\\n";' . "\r\n" . '								theQtnName = str_replace(Value,\'<span class=\'+nodeName+qtnID+\'_\'+theQtnID+\'></span>\',theQtnName);' . "\r\n" . '							}' . "\r\n" . '						break;' . "\r\n" . '						case 18: //Cond' . "\r\n" . '						    if( QtnListArray[theQtnID].isSelect == 1 )  //多选' . "\r\n" . '							{' . "\r\n" . '								theQtnName = str_replace(Value,\'\',theQtnName);' . "\r\n" . '							}' . "\r\n" . '							else' . "\r\n" . '							{' . "\r\n" . '								check_survey_conditions_list += "\\tgetSelectOptionText(\'option_"+theQtnID+"\',"+theQtnID+","+qtnID+","+inType+");\\n";' . "\r\n" . '								theQtnName = str_replace(Value,\'<span class=\'+nodeName+qtnID+\'_\'+theQtnID+\'></span>\',theQtnName);' . "\r\n" . '							}' . "\r\n" . '						break;' . "\r\n" . '						case 4:' . "\r\n" . '							check_survey_conditions_list += "\\tgetInputTextValue(\'option_"+theQtnID+"\',"+theQtnID+","+qtnID+","+inType+");\\n";' . "\r\n" . '							theQtnName = str_replace(Value,\'<span class=\'+nodeName+qtnID+\'_\'+theQtnID+\'></span>\',theQtnName);' . "\r\n" . '						break;' . "\r\n" . '					}' . "\r\n" . '				}' . "\r\n" . '				else' . "\r\n" . '				{' . "\r\n" . '					switch(QtnListArray[theQtnID].questionType)' . "\r\n" . '					{' . "\r\n" . '						case 2:  //单选' . "\r\n" . '							if( count(dataRow.rows) != 0 )' . "\r\n" . '							{' . "\r\n" . '								if( count(theQtnArray) == 2 )' . "\r\n" . '								{' . "\r\n" . '									if( dataRow.rows[0][dataIndex[\'option_\'+theQtnID]] == \'0\' || dataRow.rows[0][dataIndex[\'option_\'+theQtnID]] == \'\' )' . "\r\n" . '									{' . "\r\n" . '										if( QtnListArray[theQtnID].isSelect == 1 )  //下拉' . "\r\n" . '										{' . "\r\n" . '											theQtnName = str_replace(Value,\'\',theQtnName);									' . "\r\n" . '										}' . "\r\n" . '										else' . "\r\n" . '										{' . "\r\n" . '											if( dataRow.rows[0][dataIndex[\'TextOtherValue_\'+theQtnID]] == \'\' )' . "\r\n" . '											{' . "\r\n" . '												theQtnName = str_replace(Value,\'\',theQtnName);' . "\r\n" . '											}' . "\r\n" . '											else' . "\r\n" . '											{' . "\r\n" . '												theQtnName = str_replace(Value,qJsonCharFilter(QtnListArray[theQtnID].otherText),theQtnName);' . "\r\n" . '											}' . "\r\n" . '										}' . "\r\n" . '									}' . "\r\n" . '									else' . "\r\n" . '									{' . "\r\n" . '										if( typeof RadioListArray[theQtnID][dataRow.rows[0][dataIndex[\'option_\'+theQtnID]]] == \'undefined\' )' . "\r\n" . '										{' . "\r\n" . '											theQtnName = str_replace(Value,\'\',theQtnName);' . "\r\n" . '										}' . "\r\n" . '										else' . "\r\n" . '										{' . "\r\n" . '											theQtnName = str_replace(Value,qJsonCharFilter(RadioListArray[theQtnID][dataRow.rows[0][dataIndex[\'option_\'+theQtnID]]].optionName),theQtnName);' . "\r\n" . '										}' . "\r\n" . '									}' . "\r\n" . '								}' . "\r\n" . '								else //其他' . "\r\n" . '								{' . "\r\n" . '									if( theQtnArray[2] != 0 )' . "\r\n" . '									{' . "\r\n" . '										theQtnName = str_replace(Value,\'\',theQtnName);' . "\r\n" . '									}' . "\r\n" . '									else' . "\r\n" . '									{' . "\r\n" . '										if( typeof dataRow.rows[0][dataIndex[\'TextOtherValue_\'+theQtnID]] == \'undefined\' )' . "\r\n" . '										{' . "\r\n" . '											theQtnName = str_replace(Value,\'\',theQtnName);' . "\r\n" . '										}' . "\r\n" . '										else' . "\r\n" . '										{' . "\r\n" . '											theQtnName = str_replace(Value,qhtmlspecialchars(dataRow.rows[0][dataIndex[\'TextOtherValue_\'+theQtnID]]),theQtnName);' . "\r\n" . '										}' . "\r\n" . '									}' . "\r\n" . '								}' . "\r\n" . '							}' . "\r\n" . '							else' . "\r\n" . '							{' . "\r\n" . '								theQtnName = str_replace(Value,\'\',theQtnName);' . "\r\n" . '							}' . "\r\n" . '						break;' . "\r\n" . '						case 3:' . "\r\n" . '							if( count(dataRow.rows) != 0 )' . "\r\n" . '							{' . "\r\n" . '								if( count(theQtnArray) != 3 )' . "\r\n" . '								{' . "\r\n" . '									theQtnName = str_replace(Value,\'\',theQtnName);' . "\r\n" . '								}' . "\r\n" . '								else' . "\r\n" . '								{' . "\r\n" . '									if( theQtnArray[2] != 0 )' . "\r\n" . '									{' . "\r\n" . '										theQtnName = str_replace(Value,\'\',theQtnName);' . "\r\n" . '									}' . "\r\n" . '									else' . "\r\n" . '									{' . "\r\n" . '										if( typeof dataRow.rows[0][dataIndex[\'TextOtherValue_\'+theQtnID]] == \'undefined\' )' . "\r\n" . '										{' . "\r\n" . '											theQtnName = str_replace(Value,\'\',theQtnName);' . "\r\n" . '										}' . "\r\n" . '										else' . "\r\n" . '										{' . "\r\n" . '											theQtnName = str_replace(Value,qhtmlspecialchars(dataRow.rows[0][dataIndex[\'TextOtherValue_\'+theQtnID]]),theQtnName);' . "\r\n" . '										}' . "\r\n" . '									}' . "\r\n" . '								}' . "\r\n" . '							}' . "\r\n" . '							else' . "\r\n" . '							{' . "\r\n" . '								theQtnName = str_replace(Value,\'\',theQtnName);' . "\r\n" . '							}' . "\r\n" . '						break;' . "\r\n" . '						case 23:  //CombText' . "\r\n" . '							if( count(dataRow.rows) != 0 )' . "\r\n" . '							{' . "\r\n" . '								if( count(theQtnArray) != 3 )' . "\r\n" . '								{' . "\r\n" . '									theQtnName = str_replace(Value,\'\',theQtnName);' . "\r\n" . '								}' . "\r\n" . '								else' . "\r\n" . '								{' . "\r\n" . '									if( typeof dataRow.rows[0][dataIndex[\'option_\'+theQtnID+\'_\'+theQtnArray[2]]] == \'undefined\' )' . "\r\n" . '									{' . "\r\n" . '										theQtnName = str_replace(Value,\'\',theQtnName);' . "\r\n" . '									}' . "\r\n" . '									else' . "\r\n" . '									{' . "\r\n" . '										theQtnName = str_replace(Value,qhtmlspecialchars(dataRow.rows[0][dataIndex[\'option_\'+theQtnID+\'_\'+theQtnArray[2]]]),theQtnName);' . "\r\n" . '									}' . "\r\n" . '								}' . "\r\n" . '							}' . "\r\n" . '							else' . "\r\n" . '							{' . "\r\n" . '								theQtnName = str_replace(Value,\'\',theQtnName);' . "\r\n" . '							}' . "\r\n" . '						break;' . "\r\n" . '						case 4:  //填空' . "\r\n" . '							if( count(dataRow.rows) != 0 )' . "\r\n" . '							{' . "\r\n" . '								if( typeof dataRow.rows[0][dataIndex[\'option_\'+theQtnID]] == \'undefined\' )' . "\r\n" . '								{' . "\r\n" . '									theQtnName = str_replace(Value,\'\',theQtnName);' . "\r\n" . '								}' . "\r\n" . '								else' . "\r\n" . '								{' . "\r\n" . '									theQtnName = str_replace(Value,qhtmlspecialchars(dataRow.rows[0][dataIndex[\'option_\'+theQtnID]]),theQtnName);' . "\r\n" . '								}' . "\r\n" . '							}' . "\r\n" . '							else' . "\r\n" . '							{' . "\r\n" . '								theQtnName = str_replace(Value,\'\',theQtnName);' . "\r\n" . '							}' . "\r\n" . '						break;' . "\r\n" . '						case 24:  //CombRadio' . "\r\n" . '							if( count(dataRow.rows) != 0 )' . "\r\n" . '							{' . "\r\n" . '								if( count(theQtnArray) == 2 )' . "\r\n" . '								{' . "\r\n" . '									if( dataRow.rows[0][dataIndex[\'option_\'+theQtnID]] != \'0\' && dataRow.rows[0][dataIndex[\'option_\'+theQtnID]] != \'\')' . "\r\n" . '									{' . "\r\n" . '										if( typeof RadioListArray[theQtnID][dataRow.rows[0][dataIndex[\'option_\'+theQtnID]]] == \'undefined\' )' . "\r\n" . '										{' . "\r\n" . '											theQtnName = str_replace(Value,\'\',theQtnName);' . "\r\n" . '										}' . "\r\n" . '										else' . "\r\n" . '										{' . "\r\n" . '											theQtnName = str_replace(Value,qJsonCharFilter(RadioListArray[theQtnID][dataRow.rows[0][dataIndex[\'option_\'+theQtnID]]].optionName),theQtnName);' . "\r\n" . '										}' . "\r\n" . '									}' . "\r\n" . '									else' . "\r\n" . '									{' . "\r\n" . '										theQtnName = str_replace(Value,\'\',theQtnName);' . "\r\n" . '									}' . "\r\n" . '								}' . "\r\n" . '								else  //开放文本' . "\r\n" . '								{' . "\r\n" . '									if( typeof dataRow.rows[0][dataIndex[\'TextOtherValue_\'+theQtnID+\'_\'+theQtnArray[2]]] == \'undefined\' )' . "\r\n" . '									{' . "\r\n" . '										theQtnName = str_replace(Value,\'\',theQtnName);' . "\r\n" . '									}' . "\r\n" . '									else' . "\r\n" . '									{' . "\r\n" . '										theQtnName = str_replace(Value,qhtmlspecialchars(dataRow.rows[0][dataIndex[\'TextOtherValue_\'+theQtnID+\'_\'+theQtnArray[2]]]),theQtnName);' . "\r\n" . '									}' . "\r\n" . '								}' . "\r\n" . '							}' . "\r\n" . '							else' . "\r\n" . '							{' . "\r\n" . '								theQtnName = str_replace(Value,\'\',theQtnName);' . "\r\n" . '							}' . "\r\n" . '						break;' . "\r\n" . '						case 25:' . "\r\n" . '							if( count(dataRow.rows) != 0 )' . "\r\n" . '							{' . "\r\n" . '								if( count(theQtnArray) != 3 )' . "\r\n" . '								{' . "\r\n" . '									theQtnName = str_replace(Value,\'\',theQtnName);' . "\r\n" . '								}' . "\r\n" . '								else' . "\r\n" . '								{' . "\r\n" . '									if( typeof dataRow.rows[0][dataIndex[\'TextOtherValue_\'+theQtnID+\'_\'+theQtnArray[2]]] == \'undefined\' )' . "\r\n" . '									{' . "\r\n" . '										theQtnName = str_replace(Value,\'\',theQtnName);' . "\r\n" . '									}' . "\r\n" . '									else' . "\r\n" . '									{' . "\r\n" . '										theQtnName = str_replace(Value,qhtmlspecialchars(dataRow.rows[0][dataIndex[\'TextOtherValue_\'+theQtnID+\'_\'+theQtnArray[2]]]),theQtnName);' . "\r\n" . '									}' . "\r\n" . '								}' . "\r\n" . '							}' . "\r\n" . '							else' . "\r\n" . '							{' . "\r\n" . '								theQtnName = str_replace(Value,\'\',theQtnName);' . "\r\n" . '							}' . "\r\n" . '						break;' . "\r\n" . '						case 17:  //Auto' . "\r\n" . '						    if( QtnListArray[theQtnID].isSelect != 1 )  //多选' . "\r\n" . '							{' . "\r\n" . '								theQtnName = str_replace(Value,\'\',theQtnName);' . "\r\n" . '							}' . "\r\n" . '							else' . "\r\n" . '							{' . "\r\n" . '								if( count(dataRow.rows) != 0 )' . "\r\n" . '								{' . "\r\n" . '									var thisBaseID = QtnListArray[theQtnID].baseID;' . "\r\n" . '									var thisBaseQtnArray = QtnListArray[thisBaseID];' . "\r\n" . '									var thisCheckBoxListArray = CheckBoxListArray[thisBaseQtnArray.questionID];' . "\r\n" . '									if( dataRow.rows[0][dataIndex[\'option_\'+theQtnID]] == \'\' )' . "\r\n" . '									{' . "\r\n" . '										theQtnName = str_replace(Value,\'\',theQtnName);' . "\r\n" . '									}' . "\r\n" . '									else' . "\r\n" . '									{' . "\r\n" . '										if( dataRow.rows[0][dataIndex[\'option_\'+theQtnID]] == \'0\' )' . "\r\n" . '										{' . "\r\n" . '											theQtnName = str_replace(Value,qJsonCharFilter(QtnListArray[thisBaseID].otherText),theQtnName);' . "\r\n" . '										}' . "\r\n" . '										else' . "\r\n" . '										{' . "\r\n" . '											if( typeof thisCheckBoxListArray[dataRow.rows[0][dataIndex[\'option_\'+theQtnID]]] == \'undefined\' )' . "\r\n" . '											{' . "\r\n" . '												theQtnName = str_replace(Value,\'\',theQtnName);' . "\r\n" . '											}' . "\r\n" . '											else' . "\r\n" . '											{' . "\r\n" . '												theQtnName = str_replace(Value,qJsonCharFilter(thisCheckBoxListArray[dataRow.rows[0][dataIndex[\'option_\'+theQtnID]]].optionName),theQtnName);' . "\r\n" . '											}' . "\r\n" . '										}' . "\r\n" . '									}' . "\r\n" . '								}' . "\r\n" . '								else' . "\r\n" . '								{' . "\r\n" . '									theQtnName = str_replace(Value,\'\',theQtnName);' . "\r\n" . '								}' . "\r\n" . '							}' . "\r\n" . '						break;' . "\r\n" . '						case 18:  //Cond' . "\r\n" . '						    if( QtnListArray[theQtnID].isSelect == 1 )  //多选' . "\r\n" . '							{' . "\r\n" . '								theQtnName = str_replace(Value,\'\',theQtnName);' . "\r\n" . '							}' . "\r\n" . '							else' . "\r\n" . '							{' . "\r\n" . '								if( count(dataRow.rows) != 0 )' . "\r\n" . '								{' . "\r\n" . '									if( dataRow.rows[0][dataIndex[\'option_\'+theQtnID]] != \'\' )' . "\r\n" . '									{' . "\r\n" . '										if( typeof YesNoListArray[theQtnID][dataRow.rows[0][dataIndex[\'option_\'+theQtnID]]] == \'undefined\' )' . "\r\n" . '										{' . "\r\n" . '											theQtnName = str_replace(Value,\'\',theQtnName);' . "\r\n" . '										}' . "\r\n" . '										else' . "\r\n" . '										{' . "\r\n" . '											theQtnName = str_replace(Value,qJsonCharFilter(YesNoListArray[theQtnID][dataRow.rows[0][dataIndex[\'option_\'+theQtnID]]].optionName),theQtnName);' . "\r\n" . '										}' . "\r\n" . '									}' . "\r\n" . '									else' . "\r\n" . '									{' . "\r\n" . '										theQtnName = str_replace(Value,\'\',theQtnName);' . "\r\n" . '									}' . "\r\n" . '								}' . "\r\n" . '								else' . "\r\n" . '								{' . "\r\n" . '									theQtnName = str_replace(Value,\'\',theQtnName);' . "\r\n" . '								}' . "\r\n" . '							}' . "\r\n" . '						break;' . "\r\n" . '					} //End for switch' . "\r\n" . '				} //End for if' . "\r\n" . '			} //End for if' . "\r\n" . '		} //End for foreach' . "\r\n" . '		return theQtnName;' . "\r\n" . '	}           ' . "\r\n" . '	else' . "\r\n" . '	{' . "\r\n" . '		var reg = /\\[Kish_[^\\]]*\\]/ig;' . "\r\n" . '		var Matches = qtnName.match(reg);' . "\r\n" . '		if ( Matches != null )' . "\r\n" . '		{' . "\r\n" . '			var theQtnName = qtnName;' . "\r\n" . '			for( var tmp in Matches )' . "\r\n" . '			{' . "\r\n" . '				var Value = Matches[tmp];' . "\r\n" . '				var theBaseString = Value.replace(\'[\',\'\').replace(\']\',\'\');' . "\r\n" . '				var theQtnArray = theBaseString.split(\'_\');' . "\r\n" . '				var theQtnID = theQtnArray[1];' . "\r\n" . '				var theQtnType = new Array(23,27);' . "\r\n" . '				if( typeof QtnListArray[theQtnID] == \'undefined\' )' . "\r\n" . '				{' . "\r\n" . '					theQtnName = str_replace(Value,\'\',theQtnName);' . "\r\n" . '				}' . "\r\n" . '				else if( !in_array(QtnListArray[theQtnID].questionType,theQtnType) )   //不是正确的题型' . "\r\n" . '				{' . "\r\n" . '					theQtnName = str_replace(Value,\'\',theQtnName);' . "\r\n" . '				}' . "\r\n" . '				else' . "\r\n" . '				{' . "\r\n" . '					if( IsSamePage(theQtnID,qtnID) )  //同页' . "\r\n" . '					{' . "\r\n" . '						switch(inType)' . "\r\n" . '						{' . "\r\n" . '							case 1:' . "\r\n" . '								var nodeName = \'knode_\';' . "\r\n" . '							break;' . "\r\n" . '							case 2:' . "\r\n" . '								var nodeName = \'ktips_\';' . "\r\n" . '							break;' . "\r\n" . '						}' . "\r\n" . '						switch(QtnListArray[theQtnID].questionType)' . "\r\n" . '						{' . "\r\n" . '							case 23:' . "\r\n" . '								var objField = \'\';' . "\r\n" . '								for( var question_yesnoID in YesNoListArray[theQtnID] )' . "\r\n" . '								{' . "\r\n" . '									objField += question_yesnoID+\',\';' . "\r\n" . '								}' . "\r\n" . '								check_survey_conditions_list += "\\tgetCombTextRandText(\'"+objField.substr(0,objField.length-1)+"\',"+theQtnID+","+qtnID+","+inType+");\\n";' . "\r\n" . '								theQtnName = str_replace(Value,\'<span class=\'+nodeName+qtnID+\'_\'+theQtnID+\'></span>\',theQtnName);' . "\r\n" . '							break;' . "\r\n" . '							case 27: ' . "\r\n" . '								var objField = \'\';' . "\r\n" . '								for( var question_range_optionID in OptionListArray[theQtnID] )' . "\r\n" . '								{' . "\r\n" . '									objField += question_range_optionID+\',\';' . "\r\n" . '								}' . "\r\n" . '								check_survey_conditions_list += "\\tgetMultipleTextRandText(\'"+objField.substr(0,objField.length-1)+"\',"+theQtnID+","+qtnID+","+theQtnArray[2]+","+inType+");\\n";' . "\r\n" . '								theQtnName = str_replace(Value,\'<span class=\'+nodeName+qtnID+\'_\'+theQtnID+\'_\'+theQtnArray[2]+\'></span>\',theQtnName);' . "\r\n" . '							break;' . "\r\n" . '						}' . "\r\n" . '					}' . "\r\n" . '					else' . "\r\n" . '					{' . "\r\n" . '						switch(QtnListArray[theQtnID].questionType)' . "\r\n" . '						{' . "\r\n" . '							case 23:' . "\r\n" . '								if( count(dataRow.rows) != 0 )' . "\r\n" . '								{' . "\r\n" . '									var theExistValueArray = [];' . "\r\n" . '									for( var question_yesnoID in YesNoListArray[theQtnID] )' . "\r\n" . '									{' . "\r\n" . '										var theOptionID = \'option_\'+theQtnID+\'_\'+question_yesnoID;' . "\r\n" . '										if( typeof dataRow.rows[0][dataIndex[theOptionID]] != \'undefined\' && dataRow.rows[0][dataIndex[theOptionID]] != \'\' )' . "\r\n" . '										{' . "\r\n" . '											theExistValueArray.push(qhtmlspecialchars(dataRow.rows[0][dataIndex[theOptionID]]));' . "\r\n" . '										}' . "\r\n" . '									}' . "\r\n" . '									if( theExistValueArray.length == 0 ) //空值' . "\r\n" . '									{' . "\r\n" . '										theQtnName = str_replace(Value,\'\',theQtnName);' . "\r\n" . '									}' . "\r\n" . '									else' . "\r\n" . '									{' . "\r\n" . '										var theAfterRandKey = array_data_rand(theExistValueArray,1);' . "\r\n" . '										theQtnName = str_replace(Value,theExistValueArray[theAfterRandKey],theQtnName);' . "\r\n" . '									}' . "\r\n" . '								}' . "\r\n" . '								else' . "\r\n" . '								{' . "\r\n" . '									theQtnName = str_replace(Value,\'\',theQtnName);' . "\r\n" . '								}' . "\r\n" . '							break;' . "\r\n" . '							case 27:' . "\r\n" . '								if( count(dataRow.rows) != 0 )' . "\r\n" . '								{' . "\r\n" . '									var theExistValueArray = [];' . "\r\n" . '									for( var question_range_optionID in OptionListArray[theQtnID] )' . "\r\n" . '									{' . "\r\n" . '										var theOptionID = \'option_\'+theQtnID+\'_\'+question_range_optionID+\'_\'+theQtnArray[2];' . "\r\n" . '										if( typeof dataRow.rows[0][dataIndex[theOptionID]] != \'undefined\' && dataRow.rows[0][dataIndex[theOptionID]] != \'\' )' . "\r\n" . '										{' . "\r\n" . '											theExistValueArray.push(qhtmlspecialchars(dataRow.rows[0][dataIndex[theOptionID]]));' . "\r\n" . '										}' . "\r\n" . '									}' . "\r\n" . '									if( theExistValueArray.length == 0 ) //空值' . "\r\n" . '									{' . "\r\n" . '										theQtnName = str_replace(Value,\'\',theQtnName);' . "\r\n" . '									}' . "\r\n" . '									else' . "\r\n" . '									{' . "\r\n" . '										var theAfterRandKey = array_data_rand(theExistValueArray,1);' . "\r\n" . '										theQtnName = str_replace(Value,theExistValueArray[theAfterRandKey],theQtnName);' . "\r\n" . '									}' . "\r\n" . '								}' . "\r\n" . '								else' . "\r\n" . '								{' . "\r\n" . '									theQtnName = str_replace(Value,\'\',theQtnName);' . "\r\n" . '								}' . "\r\n" . '							break;' . "\r\n" . '						} //End for switch' . "\r\n" . '					} //End for if' . "\r\n" . '				} //End for if' . "\r\n" . '			} //End for foreach' . "\r\n" . '			return theQtnName;' . "\r\n" . '		}' . "\r\n" . '		else //Kish' . "\r\n" . '		{' . "\r\n" . '			return qtnName;' . "\r\n" . '		}' . "\r\n" . '	} //插入前述问题的答案' . "\r\n" . '}' . "\r\n" . '';

?>
