<?php
//dezend by http://www.yunlu99.com/
echo '//复选题' . "\r\n" . 'function create_checkbox_qtn(questionID)' . "\r\n" . '{' . "\r\n" . '  theInfoQtnName = qNoScriptString(QtnListArray[questionID].questionName);' . "\r\n" . '  this_fields_list += \'option_\'+questionID+\'|\';' . "\r\n" . '  if( QtnListArray[questionID].isSelect == 1 )' . "\r\n" . '  {' . "\r\n" . '	  this_fields_type += \'5|\';' . "\r\n" . '  }' . "\r\n" . '  else' . "\r\n" . '  {' . "\r\n" . '	  this_fields_type += \'2|\';' . "\r\n" . '  }' . "\r\n" . '' . "\r\n" . '  if( QtnListArray[questionID].isSelect == 1)   //下拉' . "\r\n" . '  {' . "\r\n" . '	  var tplText = \'<table width="100%" class="pertable" id="question_{$questionID}"><tr><td class="question" valign=center>&nbsp;{$questionRequire}<span class="textEdit" id="questionName_{$questionID}">{$questionName}</span>&nbsp;<span class=notes>{$questionNotes}</span></td></tr><tr><td class="tips"><span class="textEdit" id="questionNotes_{$questionID}">{$questionTips}</span></td></tr><tr><td><table cellSpacing=0 cellPadding=0 width="98%"><tr><td class="answer"><select name="{$optionIdName}" id="{$optionIdName}" size=8 multiple onchange="jQuery.Check_Survey_Conditions()"><option value=\\\'\\\'>请选择...</option>{foreach $qtns as $i => $qtn}<option value="{$qtn.optionValue}" {$qtn.isCheck}>{$qtn.optionName}</option>{/foreach}</select><span class=red>*</span> 多重选择</td></tr></table></td></tr></table>\';' . "\r\n" . '  }' . "\r\n" . '  else' . "\r\n" . '  {' . "\r\n" . '	  if( _IsOptAssCond(questionID) == true || QtnListArray[questionID].perRowCol < 2 ) //选项关联关系' . "\r\n" . '	  {' . "\r\n" . '		  var tplText = \'<table width="100%" class="pertable" id="question_{$questionID}"><tr><td class="question" valign=center>&nbsp;{$questionRequire}<span class="textEdit" id="questionName_{$questionID}">{$questionName}</span>&nbsp;<span class=notes>{$questionNotes}</span></td></tr><tr><td class="tips"><span class="textEdit" id="questionNotes_{$questionID}">{$questionTips}</span></td></tr><tr><td><table width=100% id="qtn_table_{$questionID}">{foreach $qtns as $i => $qtn}{$qtn.optionList}{/foreach}\';' . "\r\n" . '		  if( QtnListArray[questionID].isSelect != 1 && QtnListArray[questionID].isHaveOther == 1)' . "\r\n" . '		  {' . "\r\n" . '			  tplText += \'<tr style="display:{$isHaveOther}"><td class="answer tdheight" nowrap valign=center align=center width=1%><input onclick="jQuery.Check_Survey_Conditions()" type="checkbox" value="0" name="{$optionID}" id="{$optionID}" {$isCheck0}></td><td class="answer" nowrap valign=center align=left><a href="javascript:void(0)" onclick=javascript:selCheckBoxCheckRows("option_{$questionID}",{$theOptionOdNum});><div style="white-space:nowrap;" class=tdlineheight><span class="textEdit" id="optionName_3_{$questionID}_0">{$otherText}</span>：</div></a></td></tr>\';' . "\r\n" . '			  tplText += \'<tr style="display:{$isHaveOther}" class="no_color_tr"><td>&nbsp;</td><td class="answer" nowrap><input name="TextOtherValue_{$questionID}" id="TextOtherValue_{$questionID}" type="{$inputPrompt}" size="{$length}" value="{$value}" {$datePrompt} onblur="jQuery.Check_Survey_Conditions();">&nbsp;{$unitText}</td></tr>\';' . "\r\n" . '		  }' . "\r\n" . '	      if( QtnListArray[questionID].isNeg == 1 )' . "\r\n" . '		  {' . "\r\n" . '			  tplText += \'<tr style="display:{$isHaveNeg}"><td class="answer tdheight" nowrap valign=center align=center width=1%><input onclick="jQuery.Check_Survey_Conditions()" type="checkbox" value="99999" name="{$optionID}" id="{$optionID}" {$isCheck99999}></td><td class="answer" nowrap valign=center align=left><a href="javascript:void(0)" onclick=javascript:selCheckBoxCheckRows("option_{$questionID}",{$theOptionOdNum99999});><div style="white-space:nowrap" class=tdlineheight><span class="textEdit" id="optionName_3_{$questionID}_99999">{$negText}</span></div></a></td></tr>\';' . "\r\n" . '		  }' . "\r\n" . '		  tplText += \'</table></td></tr></table>\';' . "\r\n" . '	  }' . "\r\n" . '	  else' . "\r\n" . '	  {' . "\r\n" . '		  var tplText = \'<table width="100%" class="pertable" id="question_{$questionID}"><tr><td class="question" valign=center>&nbsp;{$questionRequire}<span class="textEdit" id="questionName_{$questionID}">{$questionName}</span>&nbsp;<span class=notes>{$questionNotes}</span></td></tr><tr><td class="tips"><span class="textEdit" id="questionNotes_{$questionID}">{$questionTips}</span></td></tr><tr><td><table width=100% cellSpacing=0 cellPadding=0 id="qtn_table_{$questionID}"><tr>{foreach $qtns as $i => $qtn}{$qtn.optionList}{/foreach}</tr>\';' . "\r\n" . '		  if( QtnListArray[questionID].isSelect != 1 && QtnListArray[questionID].isHaveOther == 1)' . "\r\n" . '		  {' . "\r\n" . '			  tplText += \'<tr style="display:{isHaveOther}"><td colspan=50 style="padding:0px"><table cellSpacing=0 cellPadding=0><tr style="display:{$isHaveOther}"><td class="answer tdheight" nowrap valign=center align=center width=1%><input onclick="jQuery.Check_Survey_Conditions()" type="checkbox" value="0" name="{$optionID}" id="{$optionID}" {$isCheck0}></td><td class="answer" nowrap valign=center align=left><a href="javascript:void(0)" onclick=javascript:selCheckBoxCheckRows("option_{$questionID}",{$theOptionOdNum});><div style="white-space:nowrap;" class=tdlineheight><span class="textEdit" id="optionName_3_{$questionID}_0">{$otherText}</span>：</div></a></td></tr></table></td></tr>\';' . "\r\n" . '			  tplText += \'<tr style="display:{isHaveOther}" class="no_color_tr"><td colspan=50 style="padding:0px"><table cellSpacing=0 cellPadding=0><tr style="display:{$isHaveOther}" class="no_color_tr"><td>&nbsp;</td><td class="answer" nowrap><input name="TextOtherValue_{$questionID}" id="TextOtherValue_{$questionID}" type="{$inputPrompt}" size="{$length}" value="{$value}" {$datePrompt} onblur="jQuery.Check_Survey_Conditions();">&nbsp;{$unitText}</td></tr></table></td></tr>\';' . "\r\n" . '		  }' . "\r\n" . '	      if( QtnListArray[questionID].isNeg == 1 )' . "\r\n" . '		  {' . "\r\n" . '			  tplText += \'<tr style="display:{isHaveNeg}"><td colspan=50 style="padding:0px"><table cellSpacing=0 cellPadding=0><tr style="display:{$isHaveNeg}"><td class="answer tdheight" nowrap valign=center align=center width=1%><input onclick="jQuery.Check_Survey_Conditions()" type="checkbox" value="99999" name="{$optionID}" id="{$optionID}" {$isCheck99999}></td><td class="answer" nowrap valign=center align=left><a href="javascript:void(0)" onclick=javascript:selCheckBoxCheckRows("option_{$questionID}",{$theOptionOdNum99999});><div style="white-space:nowrap" class=tdlineheight><span class="textEdit" id="optionName_3_{$questionID}_99999">{$negText}</span></div></a></td></tr></table></td></tr>\';' . "\r\n" . '		  }' . "\r\n" . '		  tplText += \'</table></td></tr></table>\';' . "\r\n" . '	  }		' . "\r\n" . '  }' . "\r\n" . '' . "\r\n" . '  var questionRequire = \'\';' . "\r\n" . '  var questionName = \'\';' . "\r\n" . '  var questionNotes = \'\';' . "\r\n" . '  var minOption=\'\',maxOption = \'\';' . "\r\n" . '  var check_survey_form_no_con_list = \'\';' . "\r\n" . '  if( QtnListArray[questionID].isRequired == 1 )' . "\r\n" . '  {' . "\r\n" . '		questionRequire = \'<span class=red>*</span>\';' . "\r\n" . '		if( QtnListArray[questionID].minOption != 0 )' . "\r\n" . '		{' . "\r\n" . '			 minOption += \'[最少\'+QtnListArray[questionID].minOption+\'项]\';' . "\r\n" . '		}' . "\r\n" . '		if( QtnListArray[questionID].maxOption != 0 )' . "\r\n" . '		{' . "\r\n" . '			 maxOption += \'[最多\'+QtnListArray[questionID].maxOption+\'项]\';' . "\r\n" . '		}' . "\r\n" . '		//检测项' . "\r\n" . '		if( QtnListArray[questionID].isSelect == 1 )' . "\r\n" . '		{' . "\r\n" . '			 check_survey_form_no_con_list += "\\tif (!CheckListNoSelect(document.Survey_Form."+\'option_\'+questionID+", \'"+theInfoQtnName+"\')){return false;} \\n";' . "\r\n" . '			 if( QtnListArray[questionID].minOption != 0 )' . "\r\n" . '			 {' . "\r\n" . '				 check_survey_form_no_con_list += "\\tif (!CheckListMinSelect(document.Survey_Form."+\'option_\'+questionID+", \'"+theInfoQtnName+"\',"+QtnListArray[questionID].minOption+")){return false;} \\n";' . "\r\n" . '			 }' . "\r\n" . '			 if( QtnListArray[questionID].maxOption != 0 )' . "\r\n" . '			 {' . "\r\n" . '				 check_survey_form_no_con_list += "\\tif (!CheckListMaxSelect(document.Survey_Form."+\'option_\'+questionID+", \'"+theInfoQtnName+"\',"+QtnListArray[questionID].maxOption+")){return false;} \\n";' . "\r\n" . '			 }' . "\r\n" . '		}' . "\r\n" . '		else' . "\r\n" . '		{' . "\r\n" . '			 check_survey_form_no_con_list += "\\tif (!CheckRadioNoClickInAssMode("+questionID+",document.Survey_Form."+\'option_\'+questionID+", \'"+theInfoQtnName+"\')){return false;} \\n";' . "\r\n" . '			 if( QtnListArray[questionID].minOption != 0 )' . "\r\n" . '			 {' . "\r\n" . '				 check_survey_form_no_con_list += "\\tif (!CheckCheckMinClickInAssMode("+questionID+",document.Survey_Form."+\'option_\'+questionID+", \'"+theInfoQtnName+"\',"+QtnListArray[questionID].minOption+")){return false;} \\n";' . "\r\n" . '			 }' . "\r\n" . '			 if( QtnListArray[questionID].maxOption != 0 )' . "\r\n" . '			 {' . "\r\n" . '				 check_survey_form_no_con_list += "\\tif (!CheckCheckMaxClickInAssMode("+questionID+",document.Survey_Form."+\'option_\'+questionID+", \'"+theInfoQtnName+"\',"+QtnListArray[questionID].maxOption+")){return false;} \\n";' . "\r\n" . '			 }' . "\r\n" . '        }' . "\r\n" . '  }' . "\r\n" . '  questionName = qQuotaChar(qJsonCharFilter(QtnListArray[questionID].questionName));' . "\r\n" . '  questionNotes = \'[多选题]\';' . "\r\n" . '  questionNotes += minOption;' . "\r\n" . '  questionNotes += maxOption;' . "\r\n" . '  ' . "\r\n" . '  var dataqtn = "{ ";' . "\r\n" . '  dataqtn += " questionID: "+questionID+",";' . "\r\n" . '  dataqtn += " questionRequire: \'"+questionRequire+"\',";' . "\r\n" . '  dataqtn += " questionName: \'"+qShowQtnName(questionName,questionID,1)+"\',";' . "\r\n" . '  dataqtn += " questionNotes: \'"+questionNotes+"\',";' . "\r\n" . '  questionTips = qQuotaChar(qJsonCharFilter(QtnListArray[questionID].questionNotes));' . "\r\n" . '  dataqtn += " questionTips: \'"+qShowQtnName(questionTips,questionID,2)+"\',";' . "\r\n" . '  dataqtn += " optionIdName:\'option_"+questionID+"\',";' . "\r\n" . '  dataqtn += " optionID: \'option_"+questionID+"\',";' . "\r\n" . '' . "\r\n" . '  //其他项' . "\r\n" . '  var optionTotalNum = count(CheckBoxListArray[questionID]);' . "\r\n" . '  if( QtnListArray[questionID].isSelect != 1 && QtnListArray[questionID].isHaveOther == 1)' . "\r\n" . '  {' . "\r\n" . '	  this_fields_list += \'TextOtherValue_\'+questionID+\'|\';' . "\r\n" . '	  this_fields_type += \'3|\';' . "\r\n" . '' . "\r\n" . '	  dataqtn += " isHaveOther: \'\',";' . "\r\n" . '	  dataqtn += " otherText: \'"+qJsonCharFilter(QtnListArray[questionID].otherText)+"\',";' . "\r\n" . '	  if( count(dataRow.rows) != 0 )' . "\r\n" . '	  {' . "\r\n" . '		  dataqtn += " value: \'"+qhtmlspecialchars(dataRow.rows[0][dataIndex[\'TextOtherValue_\'+questionID]])+"\',";' . "\r\n" . '		  if( dataRow.rows[0][dataIndex[\'option_\'+questionID]] != \'\' && IsCheckBoxSelect(0,questionID) )' . "\r\n" . '		  {' . "\r\n" . '		      dataqtn += " isCheck0: \'checked\',";' . "\r\n" . '		  }' . "\r\n" . '		  else' . "\r\n" . '		  {' . "\r\n" . '			  dataqtn += " isCheck0: \'\',";' . "\r\n" . '		  }' . "\r\n" . '	  }' . "\r\n" . '	  else' . "\r\n" . '	  {' . "\r\n" . '		  dataqtn += " value: \'\',";' . "\r\n" . '		  dataqtn += " isCheck0: \'\',";' . "\r\n" . '	  }' . "\r\n" . '	  dataqtn += " length: \'"+QtnListArray[questionID][\'length\']+"\',";' . "\r\n" . '	  switch(QtnListArray[questionID].isCheckType ) ' . "\r\n" . '	  {' . "\r\n" . '			case 4:  //数值' . "\r\n" . '			case 8:  //企业法人代码' . "\r\n" . '			case 9:  //邮政编码' . "\r\n" . '				dataqtn += " datePrompt:\'\',";' . "\r\n" . '				dataqtn += " inputPrompt:\'number\',";' . "\r\n" . '			break;' . "\r\n" . '			case 5:  //电话' . "\r\n" . '			case 11:  //手机' . "\r\n" . '				dataqtn += " datePrompt:\'\',";' . "\r\n" . '				dataqtn += " inputPrompt:\'tel\',";' . "\r\n" . '			break;' . "\r\n" . '			case 6:  //日期' . "\r\n" . '				var datePrompt = " onclick=\\"javascript:seldate(this)\\" ";' . "\r\n" . '				dataqtn += " datePrompt:\'"+datePrompt+"\',";' . "\r\n" . '				dataqtn += " inputPrompt:\'text\',";' . "\r\n" . '			break;' . "\r\n" . '			default:' . "\r\n" . '				dataqtn += " datePrompt:\'\',";' . "\r\n" . '				dataqtn += " inputPrompt:\'text\',";' . "\r\n" . '			break;' . "\r\n" . '	  }' . "\r\n" . '	  switch( QtnListArray[questionID].isCheckType )' . "\r\n" . '	  {' . "\r\n" . '		   case 4:' . "\r\n" . '				if( typeof QtnListArray[questionID].unitText == \'undefined\' )' . "\r\n" . '				{' . "\r\n" . '					dataqtn += " unitText:\'\',";' . "\r\n" . '				}' . "\r\n" . '				else' . "\r\n" . '				{' . "\r\n" . '					dataqtn += " unitText:\'"+qJsonCharFilter(QtnListArray[questionID].unitText)+"\',";' . "\r\n" . '				}' . "\r\n" . '		   break;' . "\r\n" . '		   default:' . "\r\n" . '				dataqtn += " unitText:\'\',";' . "\r\n" . '		   break;' . "\r\n" . '	  }' . "\r\n" . ' 	  dataqtn += " theOptionOdNum: \'"+optionTotalNum+"\',";' . "\r\n" . '  }' . "\r\n" . '  else' . "\r\n" . '  {' . "\r\n" . '	  dataqtn += " isHaveOther: \'none\',";' . "\r\n" . '	  dataqtn += " otherText: \'\',";' . "\r\n" . '	  dataqtn += " value: \'\',";' . "\r\n" . '	  dataqtn += " isCheck0: \'\',";' . "\r\n" . '	  dataqtn += " length: \'0\',";' . "\r\n" . ' 	  dataqtn += " theOptionOdNum: \'"+optionTotalNum+"\',";' . "\r\n" . '	  dataqtn += " datePrompt:\'\',";' . "\r\n" . '	  dataqtn += " inputPrompt:\'text\',";' . "\r\n" . '	  dataqtn += " unitText: \'\',";' . "\r\n" . '  }' . "\r\n" . '  ' . "\r\n" . '  //处理互斥选项' . "\r\n" . '  if( QtnListArray[questionID].isNeg == 1 )' . "\r\n" . '  {' . "\r\n" . '	  dataqtn += " isHaveNeg: \'\',";' . "\r\n" . '	  var negText = ( QtnListArray[questionID].allowType == \'\' ) ? \'以上都不是\' : qJsonCharFilter(QtnListArray[questionID].allowType);' . "\r\n" . '	  dataqtn += " negText: \'"+negText+"\',";' . "\r\n" . '	  if( count(dataRow.rows) != 0 )' . "\r\n" . '	  {' . "\r\n" . '		  if( dataRow.rows[0][dataIndex[\'option_\'+questionID]] != \'\' && IsCheckBoxSelect(99999,questionID) )' . "\r\n" . '		  {' . "\r\n" . '			   dataqtn += " isCheck99999: \'checked\',";' . "\r\n" . '		  }' . "\r\n" . '		  else' . "\r\n" . '		  {' . "\r\n" . '			   dataqtn += " isCheck99999: \'\',";' . "\r\n" . '		  }' . "\r\n" . '	  }' . "\r\n" . '	  else' . "\r\n" . '	  {' . "\r\n" . '		  dataqtn += " isCheck99999: \'\',";' . "\r\n" . '	  }	    ' . "\r\n" . '	  if( QtnListArray[questionID].isSelect != 1 && QtnListArray[questionID].isHaveOther == 1)' . "\r\n" . '	  {' . "\r\n" . '		  var theOptionOdNum99999 = optionTotalNum +1;' . "\r\n" . '	  }' . "\r\n" . '	  else' . "\r\n" . '	  {' . "\r\n" . '		  var theOptionOdNum99999 = optionTotalNum;' . "\r\n" . '	  }	' . "\r\n" . ' 	  dataqtn += " theOptionOdNum99999: \'"+theOptionOdNum99999+"\',";' . "\r\n" . '  }' . "\r\n" . '  else' . "\r\n" . '  {' . "\r\n" . '	  dataqtn += " isHaveNeg: \'none\',";' . "\r\n" . '	  dataqtn += " negText: \'\',";' . "\r\n" . '	  dataqtn += " isCheck99999: \'\',";' . "\r\n" . '	  if( QtnListArray[questionID].isSelect != 1 && QtnListArray[questionID].isHaveOther == 1)' . "\r\n" . '	  {' . "\r\n" . '		  var theOptionOdNum99999 = optionTotalNum +1;' . "\r\n" . '	  }' . "\r\n" . '	  else' . "\r\n" . '	  {' . "\r\n" . '		  var theOptionOdNum99999 = optionTotalNum;' . "\r\n" . '	  }	' . "\r\n" . ' 	  dataqtn += " theOptionOdNum99999: \'"+theOptionOdNum99999+"\',";' . "\r\n" . '  }' . "\r\n" . '' . "\r\n" . '  dataqtn += " qtns:[ ";' . "\r\n" . '' . "\r\n" . '  var theCheckBoxListArray = [];' . "\r\n" . '  if( QtnListArray[questionID].isRandOptions == 1 ) //随机' . "\r\n" . '  {' . "\r\n" . '	  var tmpArray = [];' . "\r\n" . '	  for(var tmp in CheckBoxListArray[questionID] )' . "\r\n" . '	  {' . "\r\n" . '		 tmpArray.push(tmp);' . "\r\n" . '	  }' . "\r\n" . '	  var theRandListArray = array_rand(tmpArray,optionTotalNum);' . "\r\n" . '	  for( var i=0;i<theRandListArray.length;i++)' . "\r\n" . '	  {' . "\r\n" . '		 theCheckBoxListArray.push(tmpArray[theRandListArray[i]]);' . "\r\n" . '	  }' . "\r\n" . '	  tmpArray = null;' . "\r\n" . '	  theRandListArray = null;' . "\r\n" . '  }' . "\r\n" . '  else' . "\r\n" . '  {' . "\r\n" . '	  for( var tmp in CheckBoxListArray[questionID] )' . "\r\n" . '	  {' . "\r\n" . '		  theCheckBoxListArray.push(tmp);' . "\r\n" . '	  }' . "\r\n" . '  }' . "\r\n" . '  ' . "\r\n" . '  var perLine = 0;' . "\r\n" . '  var theOptionOdNum = 0;' . "\r\n" . '  var theOptionOrderID = 0;' . "\r\n" . '  for( var k in theCheckBoxListArray )' . "\r\n" . '  {' . "\r\n" . '	  var question_checkboxID = theCheckBoxListArray[k];' . "\r\n" . '	  var theQuestionArray = CheckBoxListArray[questionID][question_checkboxID];' . "\r\n" . '      theOptionOrderID++;' . "\r\n" . '	  switch(QtnListArray[questionID].isSelect)' . "\r\n" . '	  {' . "\r\n" . '		  case 1: //select' . "\r\n" . '			  dataqtn += "{";' . "\r\n" . '			  dataqtn += " optionName:\'"+qJsonCharFilter(theQuestionArray.optionName)+"\',";' . "\r\n" . '			  dataqtn += " optionValue:\'"+question_checkboxID+"\',";' . "\r\n" . '			  if( count(dataRow.rows) != 0 )' . "\r\n" . '			  {' . "\r\n" . '				  if( dataRow.rows[0][dataIndex[\'option_\'+questionID]] != \'\' && IsCheckBoxSelect(question_checkboxID.toString(),questionID) )' . "\r\n" . '				  {' . "\r\n" . '					  dataqtn += " isCheck:\'selected\'";' . "\r\n" . '				  }' . "\r\n" . '				  else' . "\r\n" . '				  {' . "\r\n" . '					  dataqtn += " isCheck:\'\'";' . "\r\n" . '				  }			' . "\r\n" . '			  }' . "\r\n" . '			  else' . "\r\n" . '			  {' . "\r\n" . '				  dataqtn += " isCheck:\'\'";' . "\r\n" . '			  }' . "\r\n" . '			  dataqtn += "},";' . "\r\n" . '			' . "\r\n" . '			  //选项关联' . "\r\n" . '			  var OptAssCon = _GetOptAssCond(questionID,question_checkboxID);' . "\r\n" . '			  if( OptAssCon != \'\' )' . "\r\n" . '			  {' . "\r\n" . '				  check_survey_conditions_list += "\\tif("+OptAssCon+")\\n\\t{\\n";' . "\r\n" . '				  check_survey_conditions_list += "\\t\\t$(\\"#option_"+questionID+" option[value=\'"+question_checkboxID+"\']\\").remove();";' . "\r\n" . '				  check_survey_conditions_list += "\\n\\t} \\n";' . "\r\n" . '				  check_survey_conditions_list += "\\telse { \\n";' . "\r\n" . '				  check_survey_conditions_list += "\\t\\tif(!selectIsExitItem(document.Survey_Form.option_"+questionID+","+question_checkboxID+")){\\n";' . "\r\n" . '				  check_survey_conditions_list += "\\t\\t$(\\"#option_"+questionID+"\\").append(\\"<option value=\'"+question_checkboxID+"\'>"+qJsonCharFilter(theQuestionArray.optionName)+"</option>\\");}\\n\\t} \\n";' . "\r\n" . '			  }' . "\r\n" . '		  break;' . "\r\n" . '		  default: //普通多选' . "\r\n" . '			  if( _IsOptAssCond(questionID) == true || QtnListArray[questionID].perRowCol < 2 ) //选项关联关系' . "\r\n" . '			  {' . "\r\n" . '				  if( theQuestionArray.optionNameFile == \'\' )  //仅文本选项' . "\r\n" . '				  {' . "\r\n" . '					  optionList = "<tr class=tdheight id=\\"option_checkbox_"+question_checkboxID+"_container\\"><td class=answer align=center valign=center width=1%><input type=\\"checkbox\\" value=\\""+question_checkboxID+"\\" name=\\""+\'option_\'+questionID+"\\" id=\\""+\'option_\'+questionID+"\\" onclick=\\"jQuery.Check_Survey_Conditions()\\" ";' . "\r\n" . '					  ' . "\r\n" . '					  if( count(dataRow.rows) != 0 )' . "\r\n" . '					  {' . "\r\n" . '						  if( dataRow.rows[0][dataIndex[\'option_\'+questionID]] != \'\' && IsCheckBoxSelect(question_checkboxID,questionID) )' . "\r\n" . '						  {' . "\r\n" . '							  optionList += " checked ";' . "\r\n" . '						  }' . "\r\n" . '						  else' . "\r\n" . '						  {' . "\r\n" . '							  optionList += "";' . "\r\n" . '						  }				' . "\r\n" . '					  }' . "\r\n" . '					  else' . "\r\n" . '					  {' . "\r\n" . '						  optionList += "";' . "\r\n" . '					  }' . "\r\n" . '					  ' . "\r\n" . '					  //阀值判断' . "\r\n" . '					  if( theQuestionArray.optionMargin != 0 )' . "\r\n" . '					  {' . "\r\n" . '						   dataOptionRow = eval(\'(\'+getDbRows("SELECT count(*) as optionResponseNum FROM eq_response_"+qid+" WHERE (\',\' || option_"+questionID+" || \',\') LIKE \'%,"+question_checkboxID+",%\' AND overFlag IN (1,3) ",\'rexsee:enableq.db\')+\')\');' . "\r\n" . '						   if( count(dataOptionRow.rows) != 0 )' . "\r\n" . '						   {' . "\r\n" . '								if( parseInt(dataOptionRow.rows[0][0]) != 0 && parseInt(dataOptionRow.rows[0][0]) >= theQuestionArray.optionMargin)' . "\r\n" . '								{' . "\r\n" . '									 optionList += " disabled ";' . "\r\n" . '								}' . "\r\n" . '								else' . "\r\n" . '								{' . "\r\n" . '									 optionList += "";' . "\r\n" . '								}' . "\r\n" . '						   }' . "\r\n" . '						   else' . "\r\n" . '						   {' . "\r\n" . '								optionList += "";' . "\r\n" . '						   }' . "\r\n" . '					  }' . "\r\n" . '					  optionList += "></td><td align=left valign=center class=answer nowrap width=99% colspan=2><a href=\\"javascript:void(0)\\"  onclick=javascript:selCheckBoxCheckRows(\\"option_"+questionID+"\\","+theOptionOdNum+");><div style=\\"white-space:nowrap;\\" class=tdlineheight><span class=\\"textEdit\\" id=\\"optionName_3_"+questionID+"_"+question_checkboxID+"\\">"+qJsonCharFilter(theQuestionArray.optionName)+"</span></div></a></td></tr>";' . "\r\n" . '				  }' . "\r\n" . '				  else  //图片选项' . "\r\n" . '				  {' . "\r\n" . '					  var picFilePath = \'file:///mnt/sdcard/enableq_offline/datas/\'+qid+\'/\';' . "\r\n" . '					  optionList = "<tr class=tdheight id=\\"option_checkbox_"+question_checkboxID+"_container\\"><td class=answer align=center valign=center width=1%><input type=\\"checkbox\\" value=\\""+question_checkboxID+"\\" name=\\""+\'option_\'+questionID+"\\" id=\\""+\'option_\'+questionID+"\\" onclick=\\"jQuery.Check_Survey_Conditions()\\" ";' . "\r\n" . '					   ' . "\r\n" . '					  if( count(dataRow.rows) != 0 )' . "\r\n" . '					  {' . "\r\n" . '						  if( dataRow.rows[0][dataIndex[\'option_\'+questionID]] != \'\' && IsCheckBoxSelect(question_checkboxID,questionID) )' . "\r\n" . '						  {' . "\r\n" . '							  optionList += " checked ";' . "\r\n" . '						  }' . "\r\n" . '						  else' . "\r\n" . '						  {' . "\r\n" . '							  optionList += "";' . "\r\n" . '						  }				' . "\r\n" . '					  }' . "\r\n" . '					  else' . "\r\n" . '					  {' . "\r\n" . '						  optionList += "";' . "\r\n" . '					  }' . "\r\n" . '					  //阀值判断' . "\r\n" . '					  if( theQuestionArray.optionMargin != 0 )' . "\r\n" . '					  {' . "\r\n" . '						   dataOptionRow = eval(\'(\'+getDbRows("SELECT count(*) as optionResponseNum FROM eq_response_"+qid+" WHERE (\',\' || option_"+questionID+" || \',\') LIKE \'%,"+question_checkboxID+",%\' AND overFlag IN (1,3) ",\'rexsee:enableq.db\')+\')\');' . "\r\n" . '						   if( count(dataOptionRow.rows) != 0 )' . "\r\n" . '						   {' . "\r\n" . '								if( parseInt(dataOptionRow.rows[0][0]) != 0 && parseInt(dataOptionRow.rows[0][0]) >= theQuestionArray.optionMargin)' . "\r\n" . '								{' . "\r\n" . '									 optionList += " disabled ";' . "\r\n" . '								}' . "\r\n" . '								else' . "\r\n" . '								{' . "\r\n" . '									 optionList += "";' . "\r\n" . '								}' . "\r\n" . '						   }' . "\r\n" . '						   else' . "\r\n" . '						   {' . "\r\n" . '								optionList += "";' . "\r\n" . '						   }' . "\r\n" . '					  }' . "\r\n" . '					  optionList += "></td><td align=left valign=center class=answer nowrap width=1%><a href=\\""+picFilePath+theQuestionArray.optionNameFile+"\\" title=\\""+qJsonCharFilter(theQuestionArray.optionName)+"\\" rel=\\"picbox\\"><img src=\\""+picFilePath+"s_"+theQuestionArray.optionNameFile+"\\" border=0 align=absmiddle></a></td><td align=left valign=center class=answer nowrap width=98%><a href=\\"javascript:void(0)\\" onclick=javascript:selCheckBoxCheckRows(\\"option_"+questionID+"\\","+theOptionOdNum+");><div class=\\"tdlineheight\\" style=\\"white-space:nowrap;\\" id=\\"cont_3_"+questionID+"_"+question_checkboxID+"\\"><span class=\\"textEdit\\" id=\\"optionName_3_"+questionID+"_"+question_checkboxID+"\\">"+qJsonCharFilter(theQuestionArray.optionName)+"</span></div></a></td></tr>";' . "\r\n" . '						' . "\r\n" . '					  //设定div的高度' . "\r\n" . '					  check_survey_conditions_list += "\\t\\tvar tdHeight = $(\\"#cont_3_"+questionID+"_"+question_checkboxID+"\\").closest(\'td\').height();\\n";' . "\r\n" . '					  check_survey_conditions_list += "\\t\\t$(\\"#cont_3_"+questionID+"_"+question_checkboxID+"\\").height(tdHeight);\\n";			' . "\r\n" . '					  check_survey_conditions_list += "\\t\\t$(\\"#cont_3_"+questionID+"_"+question_checkboxID+"\\").css(\'line-height\',tdHeight+\'px\');\\n";		  ' . "\r\n" . '				  } //判断是否为图片' . "\r\n" . '				  dataqtn += "{";' . "\r\n" . '				  dataqtn += " optionList:\'"+optionList+"\' ";' . "\r\n" . '				  dataqtn += "},";' . "\r\n" . '' . "\r\n" . '				  //选项关联' . "\r\n" . '				  var OptAssCon = _GetOptAssCond(questionID,question_checkboxID);' . "\r\n" . '				  if( OptAssCon != \'\' )' . "\r\n" . '				  {' . "\r\n" . '					  check_survey_conditions_list += "\\tif("+OptAssCon+")\\n\\t{\\n";' . "\r\n" . '					  check_survey_conditions_list += "\\t\\t$(\\"#option_checkbox_"+question_checkboxID+"_container\\").hide();\\n";			' . "\r\n" . '					  check_survey_conditions_list += "\\t\\t$(\\"input[id=\'option_"+questionID+"\'][value=\'"+question_checkboxID+"\']\\").attr(\\"checked\\",false);";' . "\r\n" . '					  check_survey_conditions_list += "\\n\\t} \\n";' . "\r\n" . '					  check_survey_conditions_list += "\\telse { \\n";' . "\r\n" . '					  check_survey_conditions_list += "\\t\\t$(\\"#option_checkbox_"+question_checkboxID+"_container\\").show();\\n\\t} \\n";' . "\r\n" . '				  }' . "\r\n" . '			  }' . "\r\n" . '			  else //分列的多选' . "\r\n" . '			  {' . "\r\n" . '				  if( theQuestionArray.optionNameFile == \'\' )  //仅文本选项' . "\r\n" . '				  {' . "\r\n" . '					  var colTdNum = perLine+1;' . "\r\n" . '					  optionList = "<td style=\\"padding:0px\\"><table cellSpacing=0 cellPadding=0><tr class=tdheight id=\\"option_checkbox_"+question_checkboxID+"_container\\"><td class=answer align=center valign=center width=1%><input type=\\"checkbox\\" value=\\""+question_checkboxID+"\\" name=\\""+\'option_\'+questionID+"\\" id=\\""+\'option_\'+questionID+"\\" onclick=\\"jQuery.Check_Survey_Conditions()\\" ";' . "\r\n" . '					  ' . "\r\n" . '					  if( count(dataRow.rows) != 0 )' . "\r\n" . '					  {' . "\r\n" . '						  if( dataRow.rows[0][dataIndex[\'option_\'+questionID]] != \'\' && IsCheckBoxSelect(question_checkboxID,questionID) )' . "\r\n" . '						  {' . "\r\n" . '							  optionList += " checked ";' . "\r\n" . '						  }' . "\r\n" . '						  else' . "\r\n" . '						  {' . "\r\n" . '							  optionList += "";' . "\r\n" . '						  }				' . "\r\n" . '					  }' . "\r\n" . '					  else' . "\r\n" . '					  {' . "\r\n" . '						  optionList += "";' . "\r\n" . '					  }' . "\r\n" . '					  ' . "\r\n" . '					  //阀值判断' . "\r\n" . '					  if( theQuestionArray.optionMargin != 0 )' . "\r\n" . '					  {' . "\r\n" . '						   dataOptionRow = eval(\'(\'+getDbRows("SELECT count(*) as optionResponseNum FROM eq_response_"+qid+" WHERE (\',\' || option_"+questionID+" || \',\') LIKE \'%,"+question_checkboxID+",%\' AND overFlag IN (1,3) ",\'rexsee:enableq.db\')+\')\');' . "\r\n" . '						   if( count(dataOptionRow.rows) != 0 )' . "\r\n" . '						   {' . "\r\n" . '								if( parseInt(dataOptionRow.rows[0][0]) != 0 && parseInt(dataOptionRow.rows[0][0]) >= theQuestionArray.optionMargin)' . "\r\n" . '								{' . "\r\n" . '									 optionList += " disabled ";' . "\r\n" . '								}' . "\r\n" . '								else' . "\r\n" . '								{' . "\r\n" . '									 optionList += "";' . "\r\n" . '								}' . "\r\n" . '						   }' . "\r\n" . '						   else' . "\r\n" . '						   {' . "\r\n" . '								optionList += "";' . "\r\n" . '						   }' . "\r\n" . '					  }' . "\r\n" . '					  optionList += "></td><td align=left valign=center class=answer nowrap width=99% colspan=2><a href=\\"javascript:void(0)\\"  onclick=javascript:selCheckBoxCheckRows(\\"option_"+questionID+"\\","+theOptionOdNum+");><div style=\\"white-space:nowrap;\\" class=tdlineheight><span class=\\"textEdit\\" id=\\"optionName_3_"+questionID+"_"+question_checkboxID+"\\">"+qJsonCharFilter(theQuestionArray.optionName)+"</span></div></a></td></tr></table></td>";' . "\r\n" . '					  ' . "\r\n" . '					  if( colTdNum != count(CheckBoxListArray[questionID]) )' . "\r\n" . '					  {' . "\r\n" . '						   if( colTdNum % QtnListArray[questionID].perRowCol == 0 ) ' . "\r\n" . '						   {' . "\r\n" . '							   optionList += "<td style=\\"padding:0px\\" width=99%></td></tr><tr>";' . "\r\n" . '						   }' . "\r\n" . '					  }' . "\r\n" . '					  else //最后一项' . "\r\n" . '					  {' . "\r\n" . '						   var theLeftTd = QtnListArray[questionID].perRowCol - (colTdNum % QtnListArray[questionID].perRowCol);' . "\r\n" . '						   for(var tt=1;tt<=theLeftTd;tt++)' . "\r\n" . '						   {' . "\r\n" . '							   optionList += "<td></td>";' . "\r\n" . '						   }' . "\r\n" . '						   optionList += "<td style=\\"padding:0px\\" width=99%></td>";' . "\r\n" . '					  }' . "\r\n" . '				  }' . "\r\n" . '				  else  //图片选项' . "\r\n" . '				  {' . "\r\n" . '					  var colTdNum = perLine+1;' . "\r\n" . '					  var picFilePath = \'file:///mnt/sdcard/enableq_offline/datas/\'+qid+\'/\';' . "\r\n" . '					  optionList = "<td style=\\"padding:0px\\"><table cellSpacing=0 cellPadding=0><tr class=tdheight id=\\"option_checkbox_"+question_checkboxID+"_container\\"><td class=answer align=center valign=center width=1%><input type=\\"checkbox\\" value=\\""+question_checkboxID+"\\" name=\\""+\'option_\'+questionID+"\\" id=\\""+\'option_\'+questionID+"\\" onclick=\\"jQuery.Check_Survey_Conditions()\\" ";' . "\r\n" . '					   ' . "\r\n" . '					  if( count(dataRow.rows) != 0 )' . "\r\n" . '					  {' . "\r\n" . '						  if( dataRow.rows[0][dataIndex[\'option_\'+questionID]] != \'\' && IsCheckBoxSelect(question_checkboxID,questionID) )' . "\r\n" . '						  {' . "\r\n" . '							  optionList += " checked ";' . "\r\n" . '						  }' . "\r\n" . '						  else' . "\r\n" . '						  {' . "\r\n" . '							  optionList += "";' . "\r\n" . '						  }				' . "\r\n" . '					  }' . "\r\n" . '					  else' . "\r\n" . '					  {' . "\r\n" . '						  optionList += "";' . "\r\n" . '					  }' . "\r\n" . '					  //阀值判断' . "\r\n" . '					  if( theQuestionArray.optionMargin != 0 )' . "\r\n" . '					  {' . "\r\n" . '						   dataOptionRow = eval(\'(\'+getDbRows("SELECT count(*) as optionResponseNum FROM eq_response_"+qid+" WHERE (\',\' || option_"+questionID+" || \',\') LIKE \'%,"+question_checkboxID+",%\' AND overFlag IN (1,3) ",\'rexsee:enableq.db\')+\')\');' . "\r\n" . '						   if( count(dataOptionRow.rows) != 0 )' . "\r\n" . '						   {' . "\r\n" . '								if( parseInt(dataOptionRow.rows[0][0]) != 0 && parseInt(dataOptionRow.rows[0][0]) >= theQuestionArray.optionMargin)' . "\r\n" . '								{' . "\r\n" . '									 optionList += " disabled ";' . "\r\n" . '								}' . "\r\n" . '								else' . "\r\n" . '								{' . "\r\n" . '									 optionList += "";' . "\r\n" . '								}' . "\r\n" . '						   }' . "\r\n" . '						   else' . "\r\n" . '						   {' . "\r\n" . '								optionList += "";' . "\r\n" . '						   }' . "\r\n" . '					  }' . "\r\n" . '					  optionList += "></td><td align=left valign=center class=answer nowrap width=1%><a href=\\""+picFilePath+theQuestionArray.optionNameFile+"\\" title=\\""+qJsonCharFilter(theQuestionArray.optionName)+"\\" rel=\\"picbox\\"><img src=\\""+picFilePath+"s_"+theQuestionArray.optionNameFile+"\\" border=0 align=absmiddle></a></td><td align=left valign=center class=answer nowrap width=98%><a href=\\"javascript:void(0)\\" onclick=javascript:selCheckBoxCheckRows(\\"option_"+questionID+"\\","+theOptionOdNum+");><div class=\\"tdlineheight\\" style=\\"white-space:nowrap;\\" id=\\"cont_3_"+questionID+"_"+question_checkboxID+"\\"><span class=\\"textEdit\\" id=\\"optionName_3_"+questionID+"_"+question_checkboxID+"\\">"+qJsonCharFilter(theQuestionArray.optionName)+"</span></div></a></td></tr></table></td>";' . "\r\n" . '						' . "\r\n" . '					  //设定div的高度' . "\r\n" . '					  check_survey_conditions_list += "\\t\\tvar tdHeight = $(\\"#cont_3_"+questionID+"_"+question_checkboxID+"\\").closest(\'td\').height();\\n";' . "\r\n" . '					  check_survey_conditions_list += "\\t\\t$(\\"#cont_3_"+questionID+"_"+question_checkboxID+"\\").height(tdHeight);\\n";			' . "\r\n" . '					  check_survey_conditions_list += "\\t\\t$(\\"#cont_3_"+questionID+"_"+question_checkboxID+"\\").css(\'line-height\',tdHeight+\'px\');\\n";		  ' . "\r\n" . '					  if( colTdNum != count(CheckBoxListArray[questionID]) )' . "\r\n" . '					  {' . "\r\n" . '						   if( colTdNum % QtnListArray[questionID].perRowCol == 0 ) ' . "\r\n" . '						   {' . "\r\n" . '							   optionList += "<td style=\\"padding:0px\\" width=99%></td></tr><tr>";' . "\r\n" . '						   }' . "\r\n" . '					  }' . "\r\n" . '					  else //最后一项' . "\r\n" . '					  {' . "\r\n" . '						   var theLeftTd = QtnListArray[questionID].perRowCol - (colTdNum % QtnListArray[questionID].perRowCol);' . "\r\n" . '						   for(var tt=1;tt<=theLeftTd;tt++)' . "\r\n" . '						   {' . "\r\n" . '							   optionList += "<td></td>";' . "\r\n" . '						   }' . "\r\n" . '						   optionList += "<td style=\\"padding:0px\\" width=99%></td>";' . "\r\n" . '					  }' . "\r\n" . '				  } //判断是否为图片' . "\r\n" . '				  dataqtn += "{";' . "\r\n" . '				  dataqtn += " optionList:\'"+optionList+"\' ";' . "\r\n" . '				  dataqtn += "},";' . "\r\n" . '			  }' . "\r\n" . '		  break;' . "\r\n" . '      } //判断是否为列表' . "\r\n" . '	  theOptionOdNum++;' . "\r\n" . '      perLine++ ;' . "\r\n" . '  }' . "\r\n" . '  //互斥' . "\r\n" . '  if( QtnListArray[questionID].isSelect == 1 && QtnListArray[questionID].isNeg == 1 ) ' . "\r\n" . '  {' . "\r\n" . '	  var negText = ( QtnListArray[questionID].allowType == \'\' ) ? \'以上都不是\' : qJsonCharFilter(QtnListArray[questionID].allowType);' . "\r\n" . '	  dataqtn += "{";' . "\r\n" . '	  dataqtn += " optionName:\'"+negText+"\',";' . "\r\n" . '	  dataqtn += " optionValue:\'99999\',";' . "\r\n" . '	  if( count(dataRow.rows) != 0 )' . "\r\n" . '	  {' . "\r\n" . '		  if( dataRow.rows[0][dataIndex[\'option_\'+questionID]] != \'\' && IsCheckBoxSelect(\'99999\',questionID) )' . "\r\n" . '		  {' . "\r\n" . '			  dataqtn += " isCheck:\'selected\'";' . "\r\n" . '		  }' . "\r\n" . '		  else' . "\r\n" . '		  {' . "\r\n" . '			  dataqtn += " isCheck:\'\'";' . "\r\n" . '		  }			' . "\r\n" . '	 }' . "\r\n" . '	 else' . "\r\n" . '	 {' . "\r\n" . '		  dataqtn += " isCheck:\'\'";' . "\r\n" . '	 }' . "\r\n" . '	 dataqtn += "},";' . "\r\n" . '  }' . "\r\n" . '' . "\r\n" . '  dataqtn = dataqtn.substr(0,dataqtn.length-1)+"] }";' . "\r\n" . '  var jsondata = eval(\'(\'+dataqtn+\')\');' . "\r\n" . '' . "\r\n" . '  if( QtnListArray[questionID].isSelect != 1 )' . "\r\n" . '  {' . "\r\n" . '	  //改变背景颜色' . "\r\n" . '	  check_survey_conditions_list += "\\tchangeMaskingSingleBgColor("+questionID+");";' . "\r\n" . '  }' . "\r\n" . '' . "\r\n" . '  //判断其他' . "\r\n" . '  if( QtnListArray[questionID].isSelect != 1 && QtnListArray[questionID].isHaveOther == 1 )' . "\r\n" . '  {' . "\r\n" . '        check_survey_form_no_con_list += "\\tif (document.Survey_Form."+\'option_\'+questionID+"["+perLine+"].checked )\\n\\t{\\n\\t\\tif (!CheckNotNull(document.Survey_Form."+\'TextOtherValue_\'+questionID+", \'"+theInfoQtnName+\' - \'+qNoScriptString(QtnListArray[questionID].otherText)+"\')){return false;}\\n";' . "\r\n" . '		switch( QtnListArray[questionID].isCheckType )' . "\r\n" . '		{' . "\r\n" . '			case 1:  //Email' . "\r\n" . '				check_survey_form_no_con_list += "\\t\\tif (!CheckEmail(document.Survey_Form."+\'TextOtherValue_\'+questionID+", \'"+theInfoQtnName+\' - \'+qNoScriptString(QtnListArray[questionID].otherText)+"\')){return false;} \\n";' . "\r\n" . '			break;' . "\r\n" . '			case 2:  //长度' . "\r\n" . '				check_survey_form_no_con_list += "\\t\\tif (!CheckStringLength(document.Survey_Form."+\'TextOtherValue_\'+questionID+", \'"+theInfoQtnName+\' - \'+qNoScriptString(QtnListArray[questionID].otherText)+"\',"+QtnListArray[questionID].minSize+","+QtnListArray[questionID].maxSize+")){return false;} \\n";' . "\r\n" . '			break;' . "\r\n" . '			case 3:  //中文' . "\r\n" . '				check_survey_form_no_con_list += "\\t\\tif (!CheckNoChinese(document.Survey_Form."+\'TextOtherValue_\'+questionID+", \'"+theInfoQtnName+\' - \'+qNoScriptString(QtnListArray[questionID].otherText)+"\')){return false;} \\n";' . "\r\n" . '			break;' . "\r\n" . '			case 4:  //数值' . "\r\n" . '				check_survey_form_no_con_list += "\\t\\tif (!CheckIsValue(document.Survey_Form."+\'TextOtherValue_\'+questionID+", \'"+theInfoQtnName+\' - \'+qNoScriptString(QtnListArray[questionID].otherText)+"\',"+QtnListArray[questionID].minSize+","+QtnListArray[questionID].maxSize+")){return false;} \\n";' . "\r\n" . '			break;' . "\r\n" . '			case 5:  //电话' . "\r\n" . '				check_survey_form_no_con_list += "\\t\\tif (!CheckPhone(document.Survey_Form."+\'TextOtherValue_\'+questionID+", \'"+theInfoQtnName+\' - \'+qNoScriptString(QtnListArray[questionID].otherText)+"\')){return false;} \\n";' . "\r\n" . '			break;' . "\r\n" . '			case 6:  //日期' . "\r\n" . '				check_survey_form_no_con_list += "\\t\\tif (!CheckDate(document.Survey_Form."+\'TextOtherValue_\'+questionID+", \'"+theInfoQtnName+\' - \'+qNoScriptString(QtnListArray[questionID].otherText)+"\')){return false;} \\n";' . "\r\n" . '			break;' . "\r\n" . '			case 7:  //身份证' . "\r\n" . '				check_survey_form_no_con_list += "\\t\\tif (!CheckIDCardNo(document.Survey_Form."+\'TextOtherValue_\'+questionID+", \'"+theInfoQtnName+\' - \'+qNoScriptString(QtnListArray[questionID].otherText)+"\')){return false;} \\n";' . "\r\n" . '			break;' . "\r\n" . '			case 8:  //企业法人代码' . "\r\n" . '				check_survey_form_no_con_list += "\\t\\tif (!CheckCorpCode(document.Survey_Form."+\'TextOtherValue_\'+questionID+", \'"+theInfoQtnName+\' - \'+qNoScriptString(QtnListArray[questionID].otherText)+"\')){return false;} \\n";' . "\r\n" . '			break;' . "\r\n" . '			case 9:  //邮政编码' . "\r\n" . '				check_survey_form_no_con_list += "\\t\\tif (!CheckPostalCode(document.Survey_Form."+\'TextOtherValue_\'+questionID+", \'"+theInfoQtnName+\' - \'+qNoScriptString(QtnListArray[questionID].otherText)+"\')){return false;} \\n";' . "\r\n" . '			break;' . "\r\n" . '			case 10:  //URL' . "\r\n" . '				check_survey_form_no_con_list += "\\t\\tif (!CheckURL(document.Survey_Form."+\'TextOtherValue_\'+questionID+", \'"+theInfoQtnName+\' - \'+qNoScriptString(QtnListArray[questionID].otherText)+"\')){return false;} \\n";' . "\r\n" . '			break;' . "\r\n" . '			case 11:  //手机' . "\r\n" . '				check_survey_form_no_con_list += "\\t\\tif (!CheckMobile(document.Survey_Form."+\'TextOtherValue_\'+questionID+", \'"+theInfoQtnName+\' - \'+qNoScriptString(QtnListArray[questionID].otherText)+"\')){return false;} \\n";' . "\r\n" . '			break;' . "\r\n" . '			case 12:  //中文' . "\r\n" . '				check_survey_form_no_con_list += "\\t\\tif (!CheckChinese(document.Survey_Form."+\'TextOtherValue_\'+questionID+", \'"+theInfoQtnName+\' - \'+qNoScriptString(QtnListArray[questionID].otherText)+"\')){return false;} \\n";' . "\r\n" . '			break;' . "\r\n" . '		}' . "\r\n" . '		check_survey_form_no_con_list += "\\t}\\n";' . "\r\n" . '		check_survey_form_no_con_list += "\\telse\\n\\t{\\n\\t\\tTextUnInput(document.Survey_Form.TextOtherValue_"+questionID+");\\n\\t}\\n";' . "\r\n" . '   }' . "\r\n" . '' . "\r\n" . '   //逻辑条件' . "\r\n" . '   var QuestionCon = _GetQuestionCond(questionID,qid);' . "\r\n" . '   if( QuestionCon != \'\' )' . "\r\n" . '   {' . "\r\n" . '		check_survey_conditions_list += "\\tif("+QuestionCon+")\\n\\t{\\n";' . "\r\n" . '		check_survey_conditions_list += "\\t\\t$(\'#question_"+questionID+"\').show();\\n\\t} \\n";' . "\r\n" . '		check_survey_conditions_list += "\\telse { \\n";' . "\r\n" . '		check_survey_conditions_list += "\\t\\t$(\'#question_"+questionID+"\').hide();\\n\\t} \\n";' . "\r\n" . '' . "\r\n" . '      check_form_list = "\\tif("+QuestionCon+")\\n\\t{\\n";' . "\r\n" . '      check_form_list += check_survey_form_no_con_list;' . "\r\n" . '      check_form_list += "\\t}\\n";' . "\r\n" . '      //移除已回复的值' . "\r\n" . '      check_form_list += "\\telse{\\n";' . "\r\n" . '      if( QtnListArray[questionID].isSelect == 1 )' . "\r\n" . '	  {' . "\r\n" . '		 check_form_list += "\\tListUnSelect(document.Survey_Form.option_"+questionID+");\\n";' . "\r\n" . '      }' . "\r\n" . '      else' . "\r\n" . '      {' . "\r\n" . '		  check_form_list += "\\tRadioUnClick(document.Survey_Form.option_"+questionID+");\\n";' . "\r\n" . '		  if(QtnListArray[questionID].isHaveOther == 1)' . "\r\n" . '		  {' . "\r\n" . '			 check_form_list += "\\tTextUnInput(document.Survey_Form.TextOtherValue_"+questionID+");\\n";' . "\r\n" . '		  }' . "\r\n" . '      }    ' . "\r\n" . '      check_form_list += "\\t}\\n";' . "\r\n" . '      check_survey_form_list += check_form_list;' . "\r\n" . '   }' . "\r\n" . '   else' . "\r\n" . '   {' . "\r\n" . '      check_survey_form_list += check_survey_form_no_con_list;' . "\r\n" . '   }' . "\r\n" . '' . "\r\n" . '   //排除性选项' . "\r\n" . '   if( QtnListArray[questionID].isNeg == 1 )' . "\r\n" . '   {' . "\r\n" . '      var theQtnIsSelect = (QtnListArray[questionID].isSelect == 1) ? 1 : 0;' . "\r\n" . '      check_survey_conditions_list += "\\ttheExcludeItemInAssMode(document.Survey_Form.option_"+questionID+","+theQtnIsSelect+",99999);\\n";' . "\r\n" . '   }' . "\r\n" . '' . "\r\n" . '   //关联关系' . "\r\n" . '   var RelSurveyCon = _GetSurveyValueRelationCond(questionID,qid,\'cn\');' . "\r\n" . '   if( RelSurveyCon != \'\' )' . "\r\n" . '   {' . "\r\n" . '		//此题存在多个数值关联关系的检查点' . "\r\n" . '		var theRelSurveyCon = RelSurveyCon.split(\'$$$$$$\');' . "\r\n" . '		for( var t in theRelSurveyCon )' . "\r\n" . '		{' . "\r\n" . '			var tRelSurveyCon = theRelSurveyCon[t].split(\'######\');' . "\r\n" . '			if( parseInt(tRelSurveyCon[0]) == 2 ) //空题' . "\r\n" . '			{' . "\r\n" . '				survey_empty_list += tRelSurveyCon[1];' . "\r\n" . '				var theEmptyList = tRelSurveyCon[1].split(\'*\');' . "\r\n" . '				var theEmptyId = parseInt(substr(theEmptyList[7],0,-3));' . "\r\n" . '				if( !IsSamePage(theEmptyId,questionID)) //不在同页' . "\r\n" . '				{' . "\r\n" . '					//空题字段' . "\r\n" . '					this_fields_list += \'option_\'+theEmptyId+\'|\';' . "\r\n" . '					this_fields_type += \'3|\';' . "\r\n" . '					//跑一遍空题的配额表达式' . "\r\n" . '					var theEmptyEndSurveyCon = _GetSurveyQuotaCond(theEmptyId,qid,\'cn\');' . "\r\n" . '					if( theEmptyEndSurveyCon != \'\' )' . "\r\n" . '					{' . "\r\n" . '						survey_quota_list += theEmptyEndSurveyCon;' . "\r\n" . '					}' . "\r\n" . '				}' . "\r\n" . '				theEmptyList = null;' . "\r\n" . '			}' . "\r\n" . '			else' . "\r\n" . '			{' . "\r\n" . '				survey_quota_list += tRelSurveyCon[1];' . "\r\n" . '			}' . "\r\n" . '			tRelSurveyCon = null;' . "\r\n" . '		}' . "\r\n" . '		theRelSurveyCon = null;' . "\r\n" . '   }' . "\r\n" . '' . "\r\n" . '   //问卷结束条件' . "\r\n" . '   var EndSurveyCon = _GetSurveyQuotaCond(questionID,qid,\'cn\');' . "\r\n" . '   if( EndSurveyCon != \'\' )' . "\r\n" . '   {' . "\r\n" . '      survey_quota_list += EndSurveyCon;' . "\r\n" . '   }' . "\r\n" . '  ' . "\r\n" . '   theCheckBoxListArray = null;' . "\r\n" . '   var t = new jSmart(tplText);' . "\r\n" . '   //$(\'#survey_content_container\').append( t.fetch(jsondata));' . "\r\n" . '   survey_content_container_html += t.fetch(jsondata);' . "\r\n" . '   jsondata = null;' . "\r\n" . '   theQuestionArray = null;' . "\r\n" . '}';

?>
