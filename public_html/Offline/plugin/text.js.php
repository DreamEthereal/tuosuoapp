<?php
//dezend by http://www.yunlu99.com/
echo '//填空' . "\r\n" . 'function create_text_qtn(questionID)' . "\r\n" . '{' . "\r\n" . '	var theInfoQtnName = qNoScriptString(QtnListArray[questionID].questionName);' . "\r\n" . '' . "\r\n" . '	if( QtnListArray[questionID].isHaveUnkown == 2 )  //不清楚' . "\r\n" . '	{' . "\r\n" . '		var tplText = \'<table width="100%" class="pertable" id="question_{$questionID}"><tr><td class="question" valign=center>&nbsp;{$questionRequire}<span class="textEdit" id="questionName_{$questionID}">{$questionName}</span>&nbsp;<span class=notes>{$questionNotes}</span></td></tr><tr><td class="tips"><span class="textEdit" id="questionNotes_{$questionID}">{$questionTips}</span></td></tr><tr><td class="answer">&nbsp;&nbsp;<input name="isHaveUnkown_{$questionID}" id="isHaveUnkown_{$questionID}" type=radio value=0 {$isHaveUnkown0}>&nbsp;<input type="{$inputPrompt}" name="{$optionID}" id="{$optionID}" size="{$length}" value="{$value}" {$datePrompt} {$dataInputAction}>&nbsp;{$unitText}</td></tr><tr><td nowrap>&nbsp;&nbsp;<input onclick="jQuery.Check_Survey_Conditions()" name="isHaveUnkown_{$questionID}" id="isHaveUnkown_{$questionID}" value=1 type=radio {$isHaveUnkown1}>&nbsp;<span class="answer">不清楚</span></td></tr></table>\';' . "\r\n" . '	}' . "\r\n" . '	else' . "\r\n" . '	{' . "\r\n" . '		var tplText = \'<table width="100%" class="pertable" id="question_{$questionID}"><tr><td class="question" valign=center>&nbsp;{$questionRequire}<span class="textEdit" id="questionName_{$questionID}">{$questionName}</span>&nbsp;<span class=notes>{$questionNotes}</span></td></tr><tr><td class="tips"><span class="textEdit" id="questionNotes_{$questionID}">{$questionTips}</span></td></tr><tr><td class="answer">&nbsp;&nbsp;<input type="{$inputPrompt}" name="{$optionID}" id="{$optionID}" size="{$length}" value="{$value}" {$datePrompt} {$dataInputAction}>&nbsp;{$unitText}</td></tr></table>\';' . "\r\n" . '	}' . "\r\n" . '' . "\r\n" . '	var questionNotes = \'\';' . "\r\n" . '	switch(QtnListArray[questionID].isCheckType ) ' . "\r\n" . '	{' . "\r\n" . '		case 6: //日期题' . "\r\n" . '			questionNotes = \'[日期题]\';' . "\r\n" . '		break;' . "\r\n" . '		case 4: //数值题' . "\r\n" . '			questionNotes = \'[数值题]\';' . "\r\n" . '		break;' . "\r\n" . '		default:' . "\r\n" . '			questionNotes = \'[填空题]\';' . "\r\n" . '		break;' . "\r\n" . '	}' . "\r\n" . '' . "\r\n" . '	if( QtnListArray[questionID].isHaveUnkown == 2 )  //不清楚' . "\r\n" . '	{' . "\r\n" . '		var questionRequire = \'\';' . "\r\n" . '		var questionName = \'\';' . "\r\n" . '		if( QtnListArray[questionID].isRequired == 1 )' . "\r\n" . '		{' . "\r\n" . '			questionRequire = \'<span class=red>*</span>\';' . "\r\n" . '		}' . "\r\n" . '		questionName = qQuotaChar(qJsonCharFilter(QtnListArray[questionID].questionName));' . "\r\n" . '' . "\r\n" . '		var jsonqtn = "";' . "\r\n" . '		jsonqtn += "{";' . "\r\n" . '		jsonqtn += " questionName: \'"+qShowQtnName(questionName,questionID,1)+"\',";' . "\r\n" . '		jsonqtn += " questionRequire:\'"+questionRequire+"\',";' . "\r\n" . '		jsonqtn += " questionID:"+questionID+",";' . "\r\n" . '		jsonqtn += " questionNotes:\'"+questionNotes+"\',";' . "\r\n" . '		questionTips = qQuotaChar(qJsonCharFilter(QtnListArray[questionID].questionNotes));' . "\r\n" . '		jsonqtn += " questionTips:\'"+qShowQtnName(questionTips,questionID,2)+"\',";' . "\r\n" . '		jsonqtn += " optionID:\'option_"+questionID+"\',";' . "\r\n" . '		jsonqtn += " length:\'"+QtnListArray[questionID][\'length\']+"\',";' . "\r\n" . '		if( typeof QtnListArray[questionID].unitText == \'undefined\' )' . "\r\n" . '		{' . "\r\n" . '			jsonqtn += " unitText:\'\',";' . "\r\n" . '		}' . "\r\n" . '		else' . "\r\n" . '		{' . "\r\n" . '			jsonqtn += " unitText:\'"+qJsonCharFilter(QtnListArray[questionID].unitText)+"\',";' . "\r\n" . '		}' . "\r\n" . '		if( count(dataRow.rows) != 0 )' . "\r\n" . '		{' . "\r\n" . '			if( parseInt(dataRow.rows[0][dataIndex[\'isHaveUnkown_\'+questionID]]) == 1 ) //不清楚' . "\r\n" . '			{' . "\r\n" . '				jsonqtn += " isHaveUnkown0:\'\',";' . "\r\n" . '				jsonqtn += " isHaveUnkown1:\'checked\',";' . "\r\n" . '				jsonqtn += " value:\'\',";' . "\r\n" . '			}' . "\r\n" . '			else' . "\r\n" . '			{' . "\r\n" . '				jsonqtn += " isHaveUnkown0:\'checked\',";' . "\r\n" . '				jsonqtn += " isHaveUnkown1:\'\',";' . "\r\n" . '				jsonqtn += " value:\'"+qhtmlspecialchars(dataRow.rows[0][dataIndex[\'option_\'+questionID]])+"\',";' . "\r\n" . '			}			   ' . "\r\n" . '		}' . "\r\n" . '		else' . "\r\n" . '		{' . "\r\n" . '			jsonqtn += " isHaveUnkown0:\'checked\',";' . "\r\n" . '			jsonqtn += " isHaveUnkown1:\'\',";' . "\r\n" . '			jsonqtn += " value:\'\',";' . "\r\n" . '		}' . "\r\n" . '		switch(QtnListArray[questionID].isCheckType ) ' . "\r\n" . '		{' . "\r\n" . '			case 4:  //数值' . "\r\n" . '			case 8:  //企业法人代码' . "\r\n" . '			case 9:  //邮政编码' . "\r\n" . '				jsonqtn += " datePrompt:\'\',";' . "\r\n" . '				jsonqtn += " inputPrompt:\'number\',";' . "\r\n" . '			break;' . "\r\n" . '			case 5:  //电话' . "\r\n" . '			case 11:  //手机' . "\r\n" . '				jsonqtn += " datePrompt:\'\',";' . "\r\n" . '				jsonqtn += " inputPrompt:\'tel\',";' . "\r\n" . '			break;' . "\r\n" . '			case 6:  //日期' . "\r\n" . '				var datePrompt = " onclick=\\"javascript:seldate(this)\\" ";' . "\r\n" . '				jsonqtn += " datePrompt:\'"+datePrompt+"\',";' . "\r\n" . '				jsonqtn += " inputPrompt:\'text\',";' . "\r\n" . '			break;' . "\r\n" . '			case 13:  //时间' . "\r\n" . '				jsonqtn += " datePrompt:\'\',";' . "\r\n" . '				jsonqtn += " inputPrompt:\'time\',";' . "\r\n" . '			break;' . "\r\n" . '			default:' . "\r\n" . '				jsonqtn += " datePrompt:\'\',";' . "\r\n" . '				jsonqtn += " inputPrompt:\'text\',";' . "\r\n" . '			break;' . "\r\n" . '		}' . "\r\n" . '' . "\r\n" . '		var dataInputAction = " onblur=\\"jQuery.Check_Survey_Conditions();\\"";' . "\r\n" . '		jsonqtn += " dataInputAction:\'"+dataInputAction+"\'";' . "\r\n" . '		jsonqtn += "}";' . "\r\n" . '' . "\r\n" . '		//处理页面字段' . "\r\n" . '		this_fields_list += \'option_\'+questionID+\'|\';' . "\r\n" . '		this_fields_type += \'3|\';' . "\r\n" . '		this_fields_list += \'isHaveUnkown_\'+questionID+\'|\';' . "\r\n" . '		this_fields_type += \'1|\';' . "\r\n" . '' . "\r\n" . '		//查重' . "\r\n" . '		if( QtnListArray[questionID].isNeg == 1 || QtnListArray[questionID].isSelect == 1 )' . "\r\n" . '		{' . "\r\n" . '			this_check_list += \'4*option_\'+questionID+\'|\';' . "\r\n" . '		}' . "\r\n" . '' . "\r\n" . '		//处理提交检查' . "\r\n" . '		check_survey_conditions_list += "\\tif ( typeof document.Survey_Form.isHaveUnkown_"+questionID+" != \'undefined\' && document.Survey_Form.isHaveUnkown_"+questionID+"[1].checked )\\n\\t{\\n ";' . "\r\n" . '		check_survey_conditions_list += "\\t\\tTextUnInput(document.Survey_Form.option_"+questionID+");\\n\\t}\\n";' . "\r\n" . '' . "\r\n" . '		//处理提交检查' . "\r\n" . '		var check_survey_form_no_con_list = \'\';' . "\r\n" . '		check_survey_form_no_con_list += "\\tif (!CheckRadioNoClick(document.Survey_Form.isHaveUnkown_"+questionID+", \'"+theInfoQtnName+"\')){return false;} \\n";' . "\r\n" . '		check_survey_form_no_con_list += "\\tif ( typeof document.Survey_Form.isHaveUnkown_"+questionID+" != \'undefined\' && document.Survey_Form.isHaveUnkown_"+questionID+"[0].checked )\\n\\t{\\n ";' . "\r\n" . '		if( QtnListArray[questionID].isRequired == 1 )' . "\r\n" . '		{' . "\r\n" . '			check_survey_form_no_con_list += "\\tif (!CheckNotNull(document.Survey_Form."+\'option_\'+questionID+", \'"+theInfoQtnName+"\')){return false;} \\n";' . "\r\n" . '		}' . "\r\n" . '		switch( QtnListArray[questionID].isCheckType )' . "\r\n" . '		{' . "\r\n" . '			case 1:  //Email' . "\r\n" . '				check_survey_form_no_con_list += "\\tif (!CheckEmail(document.Survey_Form."+\'option_\'+questionID+", \'"+theInfoQtnName+"\')){return false;} \\n";' . "\r\n" . '			break;' . "\r\n" . '			case 2:  //长度' . "\r\n" . '				check_survey_form_no_con_list += "\\tif (!CheckStringLength(document.Survey_Form."+\'option_\'+questionID+", \'"+theInfoQtnName+"\',"+QtnListArray[questionID].minOption+","+QtnListArray[questionID].maxOption+")){return false;} \\n";' . "\r\n" . '			break;' . "\r\n" . '			case 3:  //中文' . "\r\n" . '				check_survey_form_no_con_list += "\\tif (!CheckNoChinese(document.Survey_Form."+\'option_\'+questionID+", \'"+theInfoQtnName+"\')){return false;} \\n";' . "\r\n" . '			break;' . "\r\n" . '			case 4:  //数值' . "\r\n" . '				check_survey_form_no_con_list += "\\tif (!CheckIsValue(document.Survey_Form."+\'option_\'+questionID+", \'"+theInfoQtnName+"\',"+QtnListArray[questionID].minOption+","+QtnListArray[questionID].maxOption+")){return false;} \\n";        ' . "\r\n" . '			break;' . "\r\n" . '			case 5:  //电话' . "\r\n" . '				check_survey_form_no_con_list += "\\tif (!CheckPhone(document.Survey_Form."+\'option_\'+questionID+", \'"+theInfoQtnName+"\')){return false;} \\n";' . "\r\n" . '			break;' . "\r\n" . '			case 6:  //日期' . "\r\n" . '				check_survey_form_no_con_list += "\\tif (!CheckDate(document.Survey_Form."+\'option_\'+questionID+", \'"+theInfoQtnName+"\')){return false;} \\n";' . "\r\n" . '			break;' . "\r\n" . '			case 7:  //身份证' . "\r\n" . '				check_survey_form_no_con_list += "\\tif (!CheckIDCardNo(document.Survey_Form."+\'option_\'+questionID+", \'"+theInfoQtnName+"\')){return false;} \\n";' . "\r\n" . '			break;' . "\r\n" . '			case 8:  //企业法人代码' . "\r\n" . '				check_survey_form_no_con_list += "\\tif (!CheckCorpCode(document.Survey_Form."+\'option_\'+questionID+", \'"+theInfoQtnName+"\')){return false;} \\n";' . "\r\n" . '			break;' . "\r\n" . '			case 9:  //邮政编码' . "\r\n" . '				check_survey_form_no_con_list += "\\tif (!CheckPostalCode(document.Survey_Form."+\'option_\'+questionID+", \'"+theInfoQtnName+"\')){return false;} \\n";' . "\r\n" . '			break;' . "\r\n" . '			case 10:  //URL' . "\r\n" . '				check_survey_form_no_con_list += "\\tif (!CheckURL(document.Survey_Form."+\'option_\'+questionID+", \'"+theInfoQtnName+"\')){return false;} \\n";' . "\r\n" . '			break;' . "\r\n" . '			case 11:  //手机' . "\r\n" . '				check_survey_form_no_con_list += "\\tif (!CheckMobile(document.Survey_Form."+\'option_\'+questionID+", \'"+theInfoQtnName+"\')){return false;} \\n";' . "\r\n" . '			break;' . "\r\n" . '			case 12:  //中文' . "\r\n" . '				check_survey_form_no_con_list += "\\tif (!CheckChinese(document.Survey_Form."+\'option_\'+questionID+", \'"+theInfoQtnName+"\')){return false;} \\n";' . "\r\n" . '			break;' . "\r\n" . '			case 13:  //时间' . "\r\n" . '				check_survey_form_no_con_list += "\\tif (!CheckTime(document.Survey_Form."+\'option_\'+questionID+", \'"+theInfoQtnName+"\')){return false;} \\n";' . "\r\n" . '			break;' . "\r\n" . '		}' . "\r\n" . '		check_survey_form_no_con_list += "\\t}\\n";' . "\r\n" . '		check_survey_form_no_con_list += "\\telse\\n\\t{\\n\\t\\tTextUnInput(document.Survey_Form.option_"+questionID+");\\n\\t}\\n";' . "\r\n" . '' . "\r\n" . '		//逻辑条件' . "\r\n" . '		var QuestionCon = _GetQuestionCond(questionID,qid);' . "\r\n" . '		if( QuestionCon != \'\' )' . "\r\n" . '		{' . "\r\n" . '			check_survey_conditions_list += "\\tif("+QuestionCon+")\\n\\t{\\n";' . "\r\n" . '			check_survey_conditions_list += "\\t\\t$(\'#question_"+questionID+"\').show();\\n\\t} \\n";' . "\r\n" . '			check_survey_conditions_list += "\\telse { \\n";' . "\r\n" . '			check_survey_conditions_list += "\\t\\t$(\'#question_"+questionID+"\').hide();\\n\\t} \\n";' . "\r\n" . '' . "\r\n" . '			check_form_list = "if("+QuestionCon+")\\n\\t{\\n";' . "\r\n" . '			check_form_list += check_survey_form_no_con_list;' . "\r\n" . '			check_form_list += "\\t}\\n";' . "\r\n" . '			//移除已回复的值' . "\r\n" . '			check_form_list += "\\telse{\\n";' . "\r\n" . '			check_form_list +="\\tRadioUnClick(document.Survey_Form.isHaveUnkown_"+questionID+");\\n";' . "\r\n" . '			check_form_list +="\\tTextUnInput(document.Survey_Form.option_"+questionID+");\\n";' . "\r\n" . '			check_form_list += "\\t}\\n";' . "\r\n" . '' . "\r\n" . '			check_survey_form_list += check_form_list;' . "\r\n" . '		}' . "\r\n" . '		else' . "\r\n" . '		{' . "\r\n" . '			check_survey_form_list += check_survey_form_no_con_list;' . "\r\n" . '		}' . "\r\n" . '' . "\r\n" . '		//关联关系' . "\r\n" . '		var RelSurveyCon = _GetSurveyValueRelationCond(questionID,qid,\'cn\');' . "\r\n" . '		if( RelSurveyCon != \'\' )' . "\r\n" . '		{' . "\r\n" . '			//此题存在多个数值关联关系的检查点' . "\r\n" . '			var theRelSurveyCon = RelSurveyCon.split(\'$$$$$$\');' . "\r\n" . '			for( var t in theRelSurveyCon )' . "\r\n" . '			{' . "\r\n" . '				var tRelSurveyCon = theRelSurveyCon[t].split(\'######\');' . "\r\n" . '				if( parseInt(tRelSurveyCon[0]) == 2 ) //空题' . "\r\n" . '				{' . "\r\n" . '					survey_empty_list += tRelSurveyCon[1];' . "\r\n" . '					var theEmptyList = tRelSurveyCon[1].split(\'*\');' . "\r\n" . '					var theEmptyId = parseInt(substr(theEmptyList[7],0,-3));' . "\r\n" . '					if( !IsSamePage(theEmptyId,questionID)) //不在同页' . "\r\n" . '					{' . "\r\n" . '						//空题字段' . "\r\n" . '						this_fields_list += \'option_\'+theEmptyId+\'|\';' . "\r\n" . '						this_fields_type += \'3|\';' . "\r\n" . '						//跑一遍空题的配额表达式' . "\r\n" . '						var theEmptyEndSurveyCon = _GetSurveyQuotaCond(theEmptyId,qid,\'cn\');' . "\r\n" . '						if( theEmptyEndSurveyCon != \'\' )' . "\r\n" . '						{' . "\r\n" . '							survey_quota_list += theEmptyEndSurveyCon;' . "\r\n" . '						}' . "\r\n" . '					}' . "\r\n" . '					theEmptyList = null;' . "\r\n" . '				}' . "\r\n" . '				else' . "\r\n" . '				{' . "\r\n" . '					survey_quota_list += tRelSurveyCon[1];' . "\r\n" . '				}' . "\r\n" . '				tRelSurveyCon = null;' . "\r\n" . '			}' . "\r\n" . '			theRelSurveyCon = null;' . "\r\n" . '		}' . "\r\n" . '' . "\r\n" . '		//问卷结束条件' . "\r\n" . '		var EndSurveyCon = _GetSurveyQuotaCond(questionID,qid,\'cn\');' . "\r\n" . '		if( EndSurveyCon != \'\' )' . "\r\n" . '		{' . "\r\n" . '			survey_quota_list += EndSurveyCon;' . "\r\n" . '		}' . "\r\n" . '' . "\r\n" . '		var jsondata = eval(\'(\'+jsonqtn+\')\');' . "\r\n" . '		var t = new jSmart(tplText);' . "\r\n" . '		//$(\'#survey_content_container\').append( t.fetch(jsondata));  ' . "\r\n" . '		survey_content_container_html += t.fetch(jsondata);' . "\r\n" . '		jsondata = null;' . "\r\n" . '	}' . "\r\n" . '	else' . "\r\n" . '	{' . "\r\n" . '		var questionRequire = \'\';' . "\r\n" . '		var questionName = \'\';' . "\r\n" . '		if( QtnListArray[questionID].isRequired == 1 )' . "\r\n" . '		{' . "\r\n" . '			questionRequire = \'<span class=red>*</span>\';' . "\r\n" . '		}' . "\r\n" . '		questionName = qQuotaChar(qJsonCharFilter(QtnListArray[questionID].questionName));' . "\r\n" . '' . "\r\n" . '		var jsonqtn = "";' . "\r\n" . '		jsonqtn += "{";' . "\r\n" . '		jsonqtn += " questionName: \'"+qShowQtnName(questionName,questionID,1)+"\',";' . "\r\n" . '		jsonqtn += " questionRequire:\'"+questionRequire+"\',";' . "\r\n" . '		jsonqtn += " questionID:"+questionID+",";' . "\r\n" . '		jsonqtn += " questionNotes:\'"+questionNotes+"\',";' . "\r\n" . '		questionTips = qQuotaChar(qJsonCharFilter(QtnListArray[questionID].questionNotes));' . "\r\n" . '		jsonqtn += " questionTips:\'"+qShowQtnName(questionTips,questionID,2)+"\',";' . "\r\n" . '		jsonqtn += " optionID:\'option_"+questionID+"\',";' . "\r\n" . '		jsonqtn += " length:\'"+QtnListArray[questionID][\'length\']+"\',";' . "\r\n" . '	    switch( QtnListArray[questionID].isCheckType )' . "\r\n" . '	    {' . "\r\n" . '		    case 4:' . "\r\n" . '				if( typeof QtnListArray[questionID].unitText == \'undefined\' )' . "\r\n" . '				{' . "\r\n" . '					jsonqtn += " unitText:\'\',";' . "\r\n" . '				}' . "\r\n" . '				else' . "\r\n" . '				{' . "\r\n" . '					jsonqtn += " unitText:\'"+qJsonCharFilter(QtnListArray[questionID].unitText)+"\',";' . "\r\n" . '				}' . "\r\n" . '		    break;' . "\r\n" . '		    default:' . "\r\n" . '				jsonqtn += " unitText:\'\',";' . "\r\n" . '		    break;' . "\r\n" . '	    }' . "\r\n" . '		if( count(dataRow.rows) != 0 )' . "\r\n" . '		{' . "\r\n" . '			jsonqtn += " value:\'"+qhtmlspecialchars(dataRow.rows[0][dataIndex[\'option_\'+questionID]])+"\',";' . "\r\n" . '		}' . "\r\n" . '		else' . "\r\n" . '		{' . "\r\n" . '			jsonqtn += " value:\'\',";' . "\r\n" . '		}' . "\r\n" . '		switch(QtnListArray[questionID].isCheckType ) ' . "\r\n" . '		{' . "\r\n" . '			case 4:  //数值' . "\r\n" . '			case 8:  //企业法人代码' . "\r\n" . '			case 9:  //邮政编码' . "\r\n" . '				jsonqtn += " datePrompt:\'\',";' . "\r\n" . '				jsonqtn += " inputPrompt:\'number\',";' . "\r\n" . '			break;' . "\r\n" . '			case 5:  //电话' . "\r\n" . '			case 11:  //手机' . "\r\n" . '				jsonqtn += " datePrompt:\'\',";' . "\r\n" . '				jsonqtn += " inputPrompt:\'tel\',";' . "\r\n" . '			break;' . "\r\n" . '			case 6:  //日期' . "\r\n" . '				var datePrompt = " onclick=\\"javascript:seldate(this)\\" ";' . "\r\n" . '				jsonqtn += " datePrompt:\'"+datePrompt+"\',";' . "\r\n" . '				jsonqtn += " inputPrompt:\'text\',";' . "\r\n" . '			break;' . "\r\n" . '			case 13:  //时间' . "\r\n" . '				jsonqtn += " datePrompt:\'\',";' . "\r\n" . '				jsonqtn += " inputPrompt:\'time\',";' . "\r\n" . '			break;' . "\r\n" . '			default:' . "\r\n" . '				jsonqtn += " datePrompt:\'\',";' . "\r\n" . '				jsonqtn += " inputPrompt:\'text\',";' . "\r\n" . '			break;' . "\r\n" . '		}' . "\r\n" . '		var dataInputAction = " onblur=\\"jQuery.Check_Survey_Conditions();\\"";' . "\r\n" . '		jsonqtn += " dataInputAction:\'"+dataInputAction+"\'";' . "\r\n" . '		jsonqtn += "}";' . "\r\n" . '' . "\r\n" . '		//处理页面字段' . "\r\n" . '		this_fields_list += \'option_\'+questionID+\'|\';' . "\r\n" . '		this_fields_type += \'3|\';' . "\r\n" . '' . "\r\n" . '		//查重' . "\r\n" . '		if( QtnListArray[questionID].isNeg == 1 || QtnListArray[questionID].isSelect == 1 )' . "\r\n" . '		{' . "\r\n" . '			this_check_list += \'4*option_\'+questionID+\'|\';' . "\r\n" . '		}' . "\r\n" . '' . "\r\n" . '		//处理提交检查' . "\r\n" . '		var check_survey_form_no_con_list = \'\';' . "\r\n" . '		if( QtnListArray[questionID].isRequired == 1 )' . "\r\n" . '		{' . "\r\n" . '			check_survey_form_no_con_list += "\\tif (!CheckNotNull(document.Survey_Form."+\'option_\'+questionID+", \'"+theInfoQtnName+"\')){return false;} \\n";' . "\r\n" . '		}' . "\r\n" . '		switch( QtnListArray[questionID].isCheckType )' . "\r\n" . '		{' . "\r\n" . '			case 1:  //Email' . "\r\n" . '				check_survey_form_no_con_list += "\\tif (!CheckEmail(document.Survey_Form."+\'option_\'+questionID+", \'"+theInfoQtnName+"\')){return false;} \\n";' . "\r\n" . '			break;' . "\r\n" . '			case 2:  //长度' . "\r\n" . '				check_survey_form_no_con_list += "\\tif (!CheckStringLength(document.Survey_Form."+\'option_\'+questionID+", \'"+theInfoQtnName+"\',"+QtnListArray[questionID].minOption+","+QtnListArray[questionID].maxOption+")){return false;} \\n";' . "\r\n" . '			break;' . "\r\n" . '			case 3:  //中文' . "\r\n" . '				check_survey_form_no_con_list += "\\tif (!CheckNoChinese(document.Survey_Form."+\'option_\'+questionID+", \'"+theInfoQtnName+"\')){return false;} \\n";' . "\r\n" . '			break;' . "\r\n" . '			case 4:  //数值' . "\r\n" . '				check_survey_form_no_con_list += "\\tif (!CheckIsValue(document.Survey_Form."+\'option_\'+questionID+", \'"+theInfoQtnName+"\',"+QtnListArray[questionID].minOption+","+QtnListArray[questionID].maxOption+")){return false;} \\n";        ' . "\r\n" . '			break;' . "\r\n" . '			case 5:  //电话' . "\r\n" . '				check_survey_form_no_con_list += "\\tif (!CheckPhone(document.Survey_Form."+\'option_\'+questionID+", \'"+theInfoQtnName+"\')){return false;} \\n";' . "\r\n" . '			break;' . "\r\n" . '			case 6:  //日期' . "\r\n" . '				check_survey_form_no_con_list += "\\tif (!CheckDate(document.Survey_Form."+\'option_\'+questionID+", \'"+theInfoQtnName+"\')){return false;} \\n";' . "\r\n" . '			break;' . "\r\n" . '			case 7:  //身份证' . "\r\n" . '				check_survey_form_no_con_list += "\\tif (!CheckIDCardNo(document.Survey_Form."+\'option_\'+questionID+", \'"+theInfoQtnName+"\')){return false;} \\n";' . "\r\n" . '			break;' . "\r\n" . '			case 8:  //企业法人代码' . "\r\n" . '				check_survey_form_no_con_list += "\\tif (!CheckCorpCode(document.Survey_Form."+\'option_\'+questionID+", \'"+theInfoQtnName+"\')){return false;} \\n";' . "\r\n" . '			break;' . "\r\n" . '			case 9:  //邮政编码' . "\r\n" . '				check_survey_form_no_con_list += "\\tif (!CheckPostalCode(document.Survey_Form."+\'option_\'+questionID+", \'"+theInfoQtnName+"\')){return false;} \\n";' . "\r\n" . '			break;' . "\r\n" . '			case 10:  //URL' . "\r\n" . '				check_survey_form_no_con_list += "\\tif (!CheckURL(document.Survey_Form."+\'option_\'+questionID+", \'"+theInfoQtnName+"\')){return false;} \\n";' . "\r\n" . '			break;' . "\r\n" . '			case 11:  //手机' . "\r\n" . '				check_survey_form_no_con_list += "\\tif (!CheckMobile(document.Survey_Form."+\'option_\'+questionID+", \'"+theInfoQtnName+"\')){return false;} \\n";' . "\r\n" . '			break;' . "\r\n" . '			case 12:  //中文' . "\r\n" . '				check_survey_form_no_con_list += "\\tif (!CheckChinese(document.Survey_Form."+\'option_\'+questionID+", \'"+theInfoQtnName+"\')){return false;} \\n";' . "\r\n" . '			break;' . "\r\n" . '			case 13:  //时间' . "\r\n" . '				check_survey_form_no_con_list += "\\tif (!CheckTime(document.Survey_Form."+\'option_\'+questionID+", \'"+theInfoQtnName+"\')){return false;} \\n";' . "\r\n" . '			break;' . "\r\n" . '		}' . "\r\n" . '' . "\r\n" . '		//逻辑条件' . "\r\n" . '		var QuestionCon = _GetQuestionCond(questionID,qid);' . "\r\n" . '		if( QuestionCon != \'\' )' . "\r\n" . '		{' . "\r\n" . '			check_survey_conditions_list += "\\tif("+QuestionCon+")\\n\\t{\\n";' . "\r\n" . '			check_survey_conditions_list += "\\t\\t$(\'#question_"+questionID+"\').show();\\n\\t} \\n";' . "\r\n" . '			check_survey_conditions_list += "\\telse { \\n";' . "\r\n" . '			check_survey_conditions_list += "\\t\\t$(\'#question_"+questionID+"\').hide();\\n\\t} \\n";' . "\r\n" . '' . "\r\n" . '			check_form_list = "\\tif("+QuestionCon+")\\n\\t{\\n";' . "\r\n" . '			check_form_list += check_survey_form_no_con_list;' . "\r\n" . '			check_form_list += "\\t}\\n";' . "\r\n" . '			//移除已回复的值' . "\r\n" . '			check_form_list += "\\telse{\\n";' . "\r\n" . '			check_form_list +="\\tTextUnInput(document.Survey_Form.option_"+questionID+");\\n";' . "\r\n" . '			check_form_list += "\\t}\\n";' . "\r\n" . '' . "\r\n" . '			check_survey_form_list += check_form_list;' . "\r\n" . '		}' . "\r\n" . '		else' . "\r\n" . '		{' . "\r\n" . '			check_survey_form_list += check_survey_form_no_con_list;' . "\r\n" . '		}' . "\r\n" . '' . "\r\n" . '		//关联关系' . "\r\n" . '		var RelSurveyCon = _GetSurveyValueRelationCond(questionID,qid,\'cn\');' . "\r\n" . '		if( RelSurveyCon != \'\' )' . "\r\n" . '		{' . "\r\n" . '			//此题存在多个数值关联关系的检查点' . "\r\n" . '			var theRelSurveyCon = RelSurveyCon.split(\'$$$$$$\');' . "\r\n" . '			for( var t in theRelSurveyCon )' . "\r\n" . '			{' . "\r\n" . '				var tRelSurveyCon = theRelSurveyCon[t].split(\'######\');' . "\r\n" . '				if( parseInt(tRelSurveyCon[0]) == 2 ) //空题' . "\r\n" . '				{' . "\r\n" . '					survey_empty_list += tRelSurveyCon[1];' . "\r\n" . '					var theEmptyList = tRelSurveyCon[1].split(\'*\');' . "\r\n" . '					var theEmptyId = parseInt(substr(theEmptyList[7],0,-3));' . "\r\n" . '					if( !IsSamePage(theEmptyId,questionID)) //不在同页' . "\r\n" . '					{' . "\r\n" . '						//空题字段' . "\r\n" . '						this_fields_list += \'option_\'+theEmptyId+\'|\';' . "\r\n" . '						this_fields_type += \'3|\';' . "\r\n" . '						//跑一遍空题的配额表达式' . "\r\n" . '						var theEmptyEndSurveyCon = _GetSurveyQuotaCond(theEmptyId,qid,\'cn\');' . "\r\n" . '						if( theEmptyEndSurveyCon != \'\' )' . "\r\n" . '						{' . "\r\n" . '							survey_quota_list += theEmptyEndSurveyCon;' . "\r\n" . '						}' . "\r\n" . '					}' . "\r\n" . '					theEmptyList = null;' . "\r\n" . '				}' . "\r\n" . '				else' . "\r\n" . '				{' . "\r\n" . '					survey_quota_list += tRelSurveyCon[1];' . "\r\n" . '				}' . "\r\n" . '				tRelSurveyCon = null;' . "\r\n" . '			}' . "\r\n" . '			theRelSurveyCon = null;' . "\r\n" . '		}' . "\r\n" . '' . "\r\n" . '		//问卷结束条件' . "\r\n" . '		var EndSurveyCon = _GetSurveyQuotaCond(questionID,qid,\'cn\');' . "\r\n" . '		if( EndSurveyCon != \'\' )' . "\r\n" . '		{' . "\r\n" . '			survey_quota_list += EndSurveyCon;' . "\r\n" . '		}' . "\r\n" . '' . "\r\n" . '		var jsondata = eval(\'(\'+jsonqtn+\')\');' . "\r\n" . '		var t = new jSmart(tplText);' . "\r\n" . '		//$(\'#survey_content_container\').append( t.fetch(jsondata));  ' . "\r\n" . '		survey_content_container_html += t.fetch(jsondata);' . "\r\n" . '		jsondata = null;' . "\r\n" . '	}' . "\r\n" . '}';

?>
